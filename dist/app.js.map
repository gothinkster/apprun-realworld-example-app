{"version":3,"file":"app.js","sources":["../src/components/header.tsx","../src/fetch.ts","../src/api.ts","../src/components/article-list.tsx","../src/components/page-list.tsx","../src/components/home.tsx","../src/components/error-list.tsx","../src/components/signin.tsx","../src/components/register.tsx","../src/components/profile.tsx","../src/components/modal.tsx","../src/components/settings.tsx","../src/components/editor.tsx","../src/components/comment-list.tsx","../src/components/article-meta.tsx","../src/components/article.tsx","../src/main.ts"],"sourcesContent":["import app, { Component, on } from 'apprun';\n\nclass HeaderComponent extends Component {\n  state = {};\n  view = state => {\n    const user = state.user;\n    return (\n      <ul class=\"nav navbar-nav pull-xs-right\">\n        <li class=\"nav-item\">\n          <a class=\"nav-link active\" href=\"#/\">\n            Home\n          </a>\n        </li>\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/editor\">\n              <i class=\"ion-compose\"></i>&nbsp;New Post\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/settings\">\n              <i class=\"ion-gear-a\"></i>&nbsp;Settings\n            </a>\n          </li>\n        )}\n        {!user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/login\">\n              Sign In\n            </a>\n          </li>\n        )}\n        {!user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/register\">\n              Sign Up\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href={`#/profile/${user.username}`}>\n              {user.username}\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/logout\">\n              Sign Out\n            </a>\n          </li>\n        )}\n      </ul>\n    );\n  };\n\n  @on('/set-user') setUser = (state, user) => ({ ...state, user });\n}\n\nexport default new HeaderComponent().start('header');\n","declare var defaultBasePath;\n\nlet access_token: string =\n  (window && window.localStorage && window.localStorage.getItem('jwt')) || '';\nexport function getToken() {\n  return access_token;\n}\n\nexport function setToken(token: string) {\n  access_token = token;\n  if (!window.localStorage) return;\n  if (token) window.localStorage.setItem('jwt', token);\n  else window.localStorage.removeItem('jwt');\n}\n\nexport async function fetchAsync(\n  method: 'GET' | 'POST' | 'DELETE' | 'PUT',\n  url: string,\n  body?: any\n) {\n  const headers = { 'Content-Type': 'application/json; charset=utf-8' };\n  if (access_token) headers['Authorization'] = `Token ${access_token}`;\n  const response = await window['fetch'](`${defaultBasePath}${url}`, {\n    method,\n    headers,\n    body: body && JSON.stringify(body)\n  });\n  if (response.status === 401) {\n    setToken(null);\n    throw new Error('401');\n  }\n  const result = await response.json();\n  if (!response.ok) throw result;\n  return result;\n}\n\nexport function get<T>(url: string): Promise<T> {\n  return fetchAsync('GET', url);\n}\n\nexport function post<T>(url: string, body?: any): Promise<T> {\n  return fetchAsync('POST', url, body);\n}\n\nexport function del(url: string) {\n  return fetchAsync('DELETE', url);\n}\n\nexport function put(url: string, body?: any) {\n  return fetchAsync('PUT', url, body);\n}\nexport function toQueryString(obj) {\n  const parts = [];\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      parts.push(encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]));\n    }\n  }\n  return parts.join('&');\n}\n\nexport function serializeObject<T>(form) {\n  let obj = {};\n  if (typeof form == 'object' && form.nodeName == 'FORM') {\n    for (let i = 0; i < form.elements.length; i++) {\n      const field = form.elements[i];\n      if (\n        field.name &&\n        field.type != 'file' &&\n        field.type != 'reset' &&\n        field.type != 'submit' &&\n        field.type != 'button'\n      ) {\n        if (field.type == 'select-multiple') {\n          obj[field.name] = '';\n          let tempvalue = '';\n          for (let j = 0; j < form.elements[i].options.length; j++) {\n            if (field.options[j].selected) tempvalue += field.options[j].value + ';';\n          }\n          if (tempvalue.charAt(tempvalue.length - 1) === ';')\n            obj[field.name] = tempvalue.substring(0, tempvalue.length - 1);\n        } else if ((field.type != 'checkbox' && field.type != 'radio') || field.checked) {\n          obj[field.name] = field.value;\n        }\n      }\n    }\n  }\n  return obj as T;\n}\n","import app from 'apprun';\r\n\r\n// Conduit API\r\nwindow['defaultBasePath'] = 'https://conduit.productionready.io/api';\r\n\r\nimport { toQueryString, serializeObject, getToken, setToken, get, post, del, put } from './fetch';\r\nexport { toQueryString, serializeObject };\r\nimport { IUser, IProfile, IArticle, IComment } from './models';\r\n\r\nexport interface IAuthResponse {\r\n  user: IUser;\r\n}\r\n\r\nexport interface ITags {\r\n  tags: Array<string>;\r\n}\r\n\r\nexport interface IFeed {\r\n  articles: Array<IArticle>;\r\n  articlesCount: number;\r\n}\r\n\r\nexport interface IArticlesRequest {\r\n  tag?: string;\r\n  author?: string;\r\n  favorited?: string;\r\n  limit: number;\r\n  offset: number;\r\n}\r\n\r\nexport interface INewArticle {\r\n  title: string;\r\n  description: string;\r\n  body: string;\r\n  tagList: Array<string>;\r\n}\r\n\r\nexport interface IArticlesResponse {\r\n  article: IArticle;\r\n}\r\n\r\nexport interface ICommentsResponse {\r\n  comments: Array<IComment>;\r\n}\r\n\r\nexport interface IProfileResponse {\r\n  profile: IProfile;\r\n}\r\n\r\nexport const tags = {\r\n  all: () => get<ITags>('/tags')\r\n};\r\n\r\nexport const auth = {\r\n  current: () => (getToken() ? get<IAuthResponse>('/user') : null),\r\n  signIn: (user: { email: string; password: string }) =>\r\n    post<IAuthResponse>('/users/login', { user }),\r\n  register: (user: { username: string; email: string; password: string }) =>\r\n    post<IAuthResponse>('/users', { user }),\r\n  save: user => put('/user', { user }),\r\n  authorized: (): boolean => (app['user'] ? true : app.run('#/login') && false) // app.run returns true if found event handlers\r\n};\r\n\r\nexport const articles = {\r\n  search: (request: IArticlesRequest) => get<IFeed>(`/articles?${toQueryString(request)}`),\r\n  feed: (request: { limit: number; offset: number }) =>\r\n    get<IFeed>(`/articles/feed?${toQueryString(request)}`),\r\n  get: (slug: string) => get<IArticlesResponse>(`/articles/${slug}`),\r\n  delete: (slug: string) => del(`/articles/${slug}`),\r\n  favorite: (slug: string) => post(`/articles/${slug}/favorite`),\r\n  unfavorite: (slug: string) => del(`/articles/${slug}/favorite`),\r\n  update: (article: IArticle) => put(`/articles/${article.slug}`, { article }),\r\n  create: (article: INewArticle) => post<IArticlesResponse>('/articles', { article })\r\n};\r\n\r\nexport const comments = {\r\n  create: (slug: string, comment: { body: string }) =>\r\n    post(`/articles/${slug}/comments`, { comment }),\r\n  delete: (slug: string, commentId: string) => del(`/articles/${slug}/comments/${commentId}`),\r\n  forArticle: (slug: string) => get<ICommentsResponse>(`/articles/${slug}/comments`)\r\n};\r\n\r\nexport const profile = {\r\n  get: (username: string) => get<IProfileResponse>(`/profiles/${username}`),\r\n  follow: (username: string) => post<IProfileResponse>(`/profiles/${username}/follow`),\r\n  unfollow: (username: string) => del(`/profiles/${username}/follow`)\r\n};\r\n\r\napp.on('/get-user', async () => {\r\n  try {\r\n    const current = await auth.current();\r\n    if (current) app.run('/set-user', current.user);\r\n  } catch {\r\n    setToken(null);\r\n    document.location.reload(true);\r\n  }\r\n});\r\n\r\napp.on('/set-user', user => {\r\n  app['user'] = user;\r\n  setToken(user ? user.token : null);\r\n});\r\n\r\napp.on('/toggle-follow', async (author: IProfile, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = author.following\r\n    ? await profile.unfollow(author.username)\r\n    : await profile.follow(author.username);\r\n  component.run('update-follow', result.profile);\r\n});\r\n\r\napp.on('/toggle-fav-article', async (article: IArticle, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = article.favorited\r\n    ? await articles.unfavorite(article.slug)\r\n    : await articles.favorite(article.slug);\r\n  component.run('update-article', result.article);\r\n});\r\n","import app from 'apprun';\nimport { IArticle } from '../models';\n\nfunction Article(props) {\n  const article = props.article as IArticle;\n  const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\n  return (\n    <div class=\"article-preview\">\n      <div class=\"article-meta\">\n        <a href={article.author.image}>\n          <img src={article.author.image} />\n        </a>\n        <div class=\"info\">\n          <a href={`#/profile/${article.author.username}`} class=\"author\">\n            {article.author.username}\n          </a>\n          <span class=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\n        </div>\n        <button\n          class={`btn btn-sm pull-xs-right ${favClass}`}\n          onclick={e => app.run('toggle-fav-article', article, props.component)}>\n          <i class=\"ion-heart\"></i> {article.favoritesCount}\n        </button>\n      </div>\n      <a href={`#/article/${article.slug}`} class=\"preview-link\">\n        <h1>{article.title}</h1>\n        <p>{article.description}</p>\n        <span>Read more...</span>\n        <ul class=\"tag-list\">\n          {article.tagList.map(tag => (\n            <li class=\"tag-default tag-pill tag-outline\">\n              <a href={`#/tag/${tag}`}>{tag} </a>\n            </li>\n          ))}\n        </ul>\n      </a>\n    </div>\n  );\n}\n\nexport default function({ articles, component }: { articles: Array<IArticle>; component }) {\n  return articles.length ? (\n    articles.map(article => <Article article={article} component={component}></Article>)\n  ) : (\n    <div class=\"article-preview\">No articles are here... yet.</div>\n  );\n}\n","import app from 'apprun';\n\nexport default function({ max, selected, link }) {\n  const pages = new Array(max).fill(0);\n  return (\n    <nav>\n      <ul class=\"pagination\">\n        {pages.map((page, idx) => (\n          <li class={`page-item ${idx + 1 === selected ? 'active' : ''}`}>\n            <a href={`${link}/${idx + 1}`} class=\"page-link\">\n              {idx + 1}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, tags, articles } from '../api';\nimport { IArticle } from '../models';\nimport Articles from './article-list';\nimport Pages from './page-list';\n\nconst PAGE_SIZE = 10;\nconst Tag = ({ tag }) => (\n  <a href={`#/tag/${tag}/1`} class=\"tag-pill tag-default\">\n    {tag}\n  </a>\n);\n\ndeclare interface IState {\n  type: '' | 'feed' | 'tag';\n  articles: Array<IArticle>;\n  tags: Array<string>;\n  max: number;\n  page: number;\n}\n\nclass HomeComponent extends Component {\n  state: IState = {\n    type: '',\n    articles: [],\n    tags: [],\n    max: 1,\n    page: 1\n  };\n\n  view = state => {\n    const tag = state.type === 'tag' && state.tag ? `/${state.tag}` : '';\n    return (\n      <div class=\"home-page\">\n        <div class=\"banner\">\n          <div class=\"container\">\n            <h1 class=\"logo-font\">conduit</h1>\n            <p>A place to share your knowledge.</p>\n          </div>\n        </div>\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-9\">\n              <div class=\"feed-toggle\">\n                <ul class=\"nav nav-pills outline-active\">\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${app['user'] ? '' : 'disabled'} ${\n                        state.type === 'feed' ? 'active' : ''\n                      }`}\n                      href=\"#/feed\">\n                      Your Feed\n                    </a>\n                  </li>\n                  <li class=\"nav-item\">\n                    <a class={`nav-link ${state.type === '' ? 'active' : ''}`} href=\"#/\">\n                      Global Feed\n                    </a>\n                  </li>\n                  {state.tag ? (\n                    <li class=\"nav-item\">\n                      <a\n                        class={`nav-link ${state.type === 'tag' ? 'active' : ''}`}\n                        href={`#/tag/${state.tag}`}>\n                        #{state.tag}\n                      </a>\n                    </li>\n                  ) : (\n                    ''\n                  )}\n                </ul>\n              </div>\n              <Articles articles={state.articles} component={this} />\n              <Pages\n                max={Math.floor(state.max / PAGE_SIZE)}\n                selected={state.page}\n                link={`#/${state.type}${tag}`}\n              />\n            </div>\n            <div class=\"col-md-3\">\n              <div class=\"sidebar\">\n                <p>Popular Tags</p>\n                <div class=\"tag-list\">\n                  {state.tags.map(tag => (\n                    <Tag tag={tag} />\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  updateState = async (state, type: '' | 'feed' | 'tag', page, tag?: string) => {\n    try {\n      let tagList = state.tags.length ? { tags: state.tags } : await tags.all();\n      page = parseInt(page) || 1;\n      tag = tag || state.tag;\n      const limit = PAGE_SIZE;\n      const offset = (page - 1) * PAGE_SIZE;\n      let feed;\n      switch (type) {\n        case 'feed':\n          if (!auth.authorized()) return { ...state, articles: [], max: 0 };\n          feed = await articles.feed({ limit, offset });\n          break;\n        case 'tag':\n          feed = await articles.search({ tag, limit, offset });\n          break;\n        default:\n          feed = await articles.search({ limit, offset });\n          break;\n      }\n      page = Math.min(page, Math.floor(feed.articlesCount / PAGE_SIZE) + 1);\n      return {\n        ...state,\n        tags: tagList.tags,\n        type,\n        page,\n        tag,\n        articles: feed.articles,\n        max: feed.articlesCount\n      };\n    } catch ({ errors }) {\n      return { ...state, errors, articles: [], max: 0 };\n    }\n  };\n\n  @on('#/') root = async (state, page) => await this.updateState(state, '', page);\n\n  @on('#/feed') feed = async (state, page) => await this.updateState(state, 'feed', page);\n\n  @on('#/tag') tag = async (state, tag, page) => await this.updateState(state, 'tag', page, tag);\n\n  @on('update-article') updateArticle = (state, article) => {\n    state.articles = state.articles.map(a => {\n      return a.slug === article.slug ? article : a;\n    });\n    return state;\n  };\n}\n\nexport default new HomeComponent().mount('my-app');\n","import app from 'apprun';\n\nexport default function({ errors }) {\n  return (\n    <ul class=\"error-messages\">\n      {Object.keys(errors).map(key => (\n        <li>{`${key} ${errors[key]}`}</li>\n      ))}\n    </ul>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, serializeObject } from '../api';\n\nimport Errors from './error-list';\n\nclass SigninComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!state || state instanceof Promise) return;\n    return (\n      <div class=\"auth-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              <h1 class=\"text-xs-center\">Sign In</h1>\n              <p class=\"text-xs-center\">\n                <a href=\"#/register\">Need an account?</a>\n              </p>\n\n              {state.errors && <Errors errors={state.errors} />}\n\n              <form onsubmit={e => this.run('sign-in', e)}>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\">Sign In</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/login') login = state => ({ ...state, messages: [], returnTo: document.location.hash });\n\n  @on('#/logout') logout = state => {\n    app.run('/set-user', null);\n    document.location.hash = '#/';\n  };\n\n  @on('sign-in') signIn = async (state, e) => {\n    try {\n      e.preventDefault();\n      const session = await auth.signIn(serializeObject(e.target));\n      app.run('/set-user', session.user);\n      const returnTo: string = (state.returnTo || '').replace(/\\#\\/login\\/?/, '');\n      if (!returnTo) document.location.hash = '#/feed';\n      else {\n        app.run('route', returnTo);\n        history.pushState(null, null, returnTo);\n      }\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new SigninComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { auth, serializeObject } from '../api';\nimport Errors from './error-list';\n\nclass RegisterComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!state || state instanceof Promise) return;\n    return (\n      <div class=\"auth-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              <h1 class=\"text-xs-center\">Sign Up</h1>\n              <p class=\"text-xs-center\">\n                <a href=\"#/login\">Have an account?</a>\n              </p>\n\n              {state.errors && <Errors errors={state.errors} />}\n\n              <form onsubmit={e => this.run('register', e)}>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Your Name\"\n                    name=\"username\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\">Sign up</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/register') register = (state, messages) => ({ ...state, messages });\n\n  @on('register') submitRegistration = async (state, e) => {\n    try {\n      e.preventDefault();\n      const session = await auth.register(serializeObject(e.target));\n      app.run('#user', session.user);\n      app.run('route', '#/');\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new RegisterComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { IProfile } from '../models';\nimport { articles, profile } from '../api';\nimport Articles from './article-list';\nimport Pages from './page-list';\n\nconst PAGE_SIZE = 10;\n\nclass ProfileComponent extends Component {\n  state = {\n    name: '',\n    type: 'articles',\n    articles: [],\n    page: 1\n  };\n\n  view = state => {\n    const profile = state.profile as IProfile;\n    if (!profile) return;\n    return (\n      <div class=\"profile-page\">\n        <div class=\"user-info\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"col-xs-12 col-md-10 offset-md-1\">\n                <img src={profile.image} class=\"user-img\" />\n                <h4>{profile.username}</h4>\n                <p>{profile.bio}</p>\n                <button\n                  class=\"btn btn-sm btn-outline-secondary action-btn\"\n                  onclick={e => app.run('/toggle-follow', profile, this)}>\n                  {profile.following ? (\n                    <span>\n                      <i class=\"ion-minus-round\"></i> Unfollow {profile.username}\n                    </span>\n                  ) : (\n                    <span>\n                      <i class=\"ion-plus-round\"></i> Follow {profile.username}\n                    </span>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-xs-12 col-md-10 offset-md-1\">\n              <div class=\"articles-toggle\">\n                <ul class=\"nav nav-pills outline-active\">\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${state.type === 'articles' ? 'active' : ''}`}\n                      href={`#/profile/${profile.username}/articles/1`}>\n                      My Articles\n                    </a>\n                  </li>\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${state.type === 'favorites' ? 'active' : ''}`}\n                      href={`#/profile/${profile.username}/favorites/1`}>\n                      Favorited Articles\n                    </a>\n                  </li>\n                </ul>\n              </div>\n              <Articles articles={state.articles} component={this} />\n              <Pages\n                max={Math.floor(state.max / PAGE_SIZE)}\n                selected={state.page}\n                link={`#/profile/${state.profile.username}/${state.type}`}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  updateState = async (state, name, type, page) => {\n    name = decodeURIComponent(name || state.name);\n    type = type || state.type;\n    page = parseInt(page) || state.page;\n    let newState = state;\n    if (name !== state.name) {\n      const profileResult = await profile.get(name);\n      newState = { ...newState, profile: profileResult.profile };\n    }\n    if (name !== state.name || type !== state.type || page !== state.page) {\n      const limit = PAGE_SIZE;\n      const offset = (page - 1) * limit;\n      const articleResult =\n        type === 'favorites'\n          ? await articles.search({ favorited: name, offset, limit })\n          : await articles.search({ author: name, offset, limit });\n      newState = {\n        ...newState,\n        name,\n        type,\n        page,\n        articles: articleResult.articles,\n        max: articleResult.articlesCount\n      };\n    }\n    return newState;\n  };\n\n  @on('#/profile') root = (state, name, type, page) => this.updateState(state, name, type, page);\n\n  @on('update-article') updateArticle = (state, article) => {\n    state.articles = state.articles.map(a => {\n      return a.slug === article.slug ? article : a;\n    });\n    return state;\n  };\n\n  @on('update-follow') updateFollow = (state, profile) => ({ ...state, profile });\n}\n\nexport default new ProfileComponent().mount('my-app');\n","import app from 'apprun';\n\nexport default function({ title, body, ok, cancel, onOK, onCancel }) {\n  return (\n    <div class=\"modal-open\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">\n              {title}\n              <button\n                type=\"button\"\n                class=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                onclick={e => onCancel(e)}>\n                <span aria-hidden=\"true\">Ã—</span>\n              </button>\n            </h5>\n          </div>\n          <div class=\"modal-body\">\n            <p>{body}</p>\n          </div>\n          <div class=\"modal-footer\">\n            {cancel && (\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n                onclick={e => onCancel(e)}>\n                {cancel}\n              </button>\n            )}\n            &nbsp;&nbsp;\n            <button type=\"button\" class=\"btn btn-primary\" onclick={e => onOK(e)}>\n              {ok}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-backdrop show\" onclick={e => onCancel(e)}></div>\n    </div>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { serializeObject, auth } from '../api';\nimport Errors from './error-list';\nimport Modal from './modal';\n\nclass SettingsComponent extends Component {\n  state = {};\n\n  view = state => {\n    const user = state.user;\n    if (!user) return;\n    return (\n      <div class=\"settings-page\">\n        {state.showModal ? (\n          <Modal\n            title=\"Confirmation\"\n            body=\"Your settings has been updated successfully.\"\n            ok=\"OK\"\n            cancel=\"Cancel\"\n            onOK={e => this.run('ok', e)}\n            onCancel={e => this.run('cancel', e)}\n          />\n        ) : (\n          ''\n        )}\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              {state.errors && <Errors errors={state.errors} />}\n              <h1 class=\"text-xs-center\">Your Settings</h1>\n              <form onsubmit={e => this.run('submit-settings', e)}>\n                <fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control\"\n                      type=\"text\"\n                      placeholder=\"URL of profile picture\"\n                      name=\"image\"\n                      value={user.image}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Your Name\"\n                      name=\"username\"\n                      value={user.username}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <textarea\n                      class=\"form-control form-control-lg\"\n                      rows=\"8\"\n                      placeholder=\"Short bio about you\"\n                      name=\"bio\">\n                      {user.bio}\n                    </textarea>\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Email\"\n                      name=\"email\"\n                      value={user.email}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"password\"\n                      placeholder=\"Password\"\n                      name=\"password\"\n                      value={user.password}\n                    />\n                  </fieldset>\n                  <button class=\"btn btn-lg btn-primary pull-xs-right\">Update Settings</button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/settings') settings = state => {\n    if (!auth.authorized()) return;\n    return { user: app['user'] };\n  };\n\n  @on('submit-settings') submitSettings = async (state, e) => {\n    try {\n      e.preventDefault();\n      const user = serializeObject<any>(e.target);\n      const result = await auth.save(user);\n      app.run('#user', result.user);\n      return { showModal: true };\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n\n  @on('ok, cancel') ok = state => {\n    return { showModel: false };\n  };\n}\n\nexport default new SettingsComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { serializeObject, articles, auth } from '../api';\nimport Errors from './error-list';\n\nclass EditorComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!app['user'] || !state.article) return;\n    const article = state.article;\n    return (\n      <div class=\"editor-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-10 offset-md-1 col-xs-12\">\n              {state.errors && <Errors errors={state.errors} />}\n              <form onsubmit={e => this.run('submit-article', e)}>\n                {article.slug && <input type=\"hidden\" name=\"slug\" value={article.slug} />}\n                <fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control form-control-lg\"\n                      placeholder=\"Article Title\"\n                      name=\"title\"\n                      value={article.title}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"What's this article about?\"\n                      name=\"description\"\n                      value={article.description}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <textarea\n                      class=\"form-control\"\n                      rows=\"8\"\n                      placeholder=\"Write your article (in markdown)\"\n                      name=\"body\">\n                      {article.body}\n                    </textarea>\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"Enter tags\"\n                      name=\"tags\"\n                      value={article.tagList.join(', ')}\n                    />\n                    <div class=\"tag-list\"></div>\n                  </fieldset>\n                  <button class=\"btn btn-lg pull-xs-right btn-primary\" type=\"submit\">\n                    Publish Article\n                  </button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/editor') root = async (state, slug) => {\n    if (!auth.authorized()) return;\n    let article;\n    if (slug) {\n      const result = await articles.get(slug);\n      article = result.article;\n    }\n    article = article || { title: '', description: '', body: '', tagList: [] };\n    return { article };\n  };\n\n  @on('submit-article') submitArticle = async (state, e) => {\n    try {\n      e.preventDefault();\n      const article = serializeObject<any>(e.target);\n      article.tagList = article.tags.split(',');\n      const result = article.slug ? await articles.update(article) : await articles.create(article);\n      document.location.hash = `#/article/${result.article.slug}`;\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new EditorComponent().mount('my-app');\n","import app from 'apprun';\nimport { IComment, IProfile } from '../models';\ndeclare var marked;\n\nfunction Comment({ comment }: { comment: IComment }) {\n  return (\n    <div class=\"card\">\n      <div class=\"card-block\">\n        <p class=\"card-text\">\n          <p>{`_html:${marked(comment.body, { sanitize: true })}`}</p>\n        </p>\n      </div>\n      <div class=\"card-footer\">\n        <a class=\"comment-author\">\n          <img src={comment.author.image} class=\"comment-author-img\" />\n        </a>\n        &nbsp;\n        <a class=\"comment-author\" href={`#/profile/${comment.author.username}`}>\n          {comment.author.username}\n        </a>\n        <span class=\"date-posted\">{new Date(comment.createdAt).toLocaleString()}</span>\n        {app['user'] && app['user'].username === comment.author.username && (\n          <span class=\"mod-options\">\n            <i class=\"ion-trash-a\" onclick={e => app.run('/delete-comment', comment)}></i>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function({ comments }: { comments: Array<IComment> }) {\n  const user = app['user'] as IProfile;\n  return (\n    <div class=\"row\">\n      <div class=\"col-xs-12 col-md-8 offset-md-2\">\n        {!user ? (\n          <p>\n            <a href={`#/login/${document.location.hash}`}>Sign in</a> or&nbsp;\n            <a href=\"#/register\">sign up</a> to add comments on this article.\n          </p>\n        ) : (\n          <form class=\"card comment-form\" onsubmit={e => app.run('/new-comment', e)}>\n            <div class=\"card-block\">\n              <textarea\n                class=\"form-control\"\n                placeholder=\"Write a comment...\"\n                rows=\"3\"\n                name=\"comment\"></textarea>\n            </div>\n            <div class=\"card-footer\">\n              {user.image ? (\n                <img src={user.image} class=\"comment-author-img\" />\n              ) : (\n                <span>@{user.username}</span>\n              )}\n              <button class=\"btn btn-sm btn-primary\" type=\"submit\">\n                Post Comment\n              </button>\n            </div>\n          </form>\n        )}\n        {comments.map(comment => (\n          <Comment comment={comment} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import app from 'apprun';\nimport { IArticle } from '../models';\n\nexport default function ArticleMeta({ article, component }: { article: IArticle; component }) {\n  const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\n  const followClass = article.author.following ? 'btn-secondary' : 'btn-outline-secondary';\n  return (\n    <div class=\"article-meta\">\n      <a href={article.author.image}>\n        <img src={article.author.image} />\n      </a>\n      <div class=\"info\">\n        <a href={`#/profile/${article.author.username}`} class=\"author\">\n          {article.author.username}\n        </a>\n        <span class=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\n      </div>\n\n      {app['user'] && app['user'].username === article.author.username ? (\n        <span>\n          <button\n            class=\"btn btn-sm btn-outline-secondary\"\n            onclick={e => component.run('edit-article', article)}>\n            <i class=\"ion-edit\"></i>&nbsp; Edit Article\n          </button>\n          &nbsp;&nbsp;\n          <button\n            class=\"btn btn-sm btn-outline-danger\"\n            onclick={e => component.run('delete-article', article)}>\n            <i class=\"ion-trash-o\"></i>&nbsp; Delete Article\n          </button>\n        </span>\n      ) : (\n        <span>\n          <button\n            class={`btn btn-sm ${followClass}`}\n            onclick={e => app.run('/toggle-follow', article.author, component)}>\n            {article.author.following ? (\n              <span>\n                <i class=\"ion-minus-round\"></i> Unfollow {article.author.username}\n              </span>\n            ) : (\n              <span>\n                <i class=\"ion-plus-round\"></i> Follow {article.author.username}\n              </span>\n            )}\n          </button>{' '}\n          &nbsp;&nbsp;\n          <button\n            class={`btn btn-sm ${favClass}`}\n            onclick={e => app.run('/toggle-fav-article', article, component)}>\n            <i class=\"ion-heart\"></i>\n            &nbsp; Favorite Post <span class=\"counter\">({article.favoritesCount})</span>\n          </button>\n        </span>\n      )}\n    </div>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { articles, comments } from '../api';\nimport { IArticle } from '../models';\nimport Comments from './comment-list';\nimport ArticleMeta from './article-meta';\nimport Modal from './modal';\ndeclare var marked;\n\nclass ArticleComponent extends Component {\n  state = {\n    article: null,\n    comments: []\n  };\n\n  view = state => {\n    const article = state.article as IArticle;\n    if (!article) return;\n    return (\n      <div class=\"article-page\">\n        {state.deleting && (\n          <Modal\n            title=\"Delete Article\"\n            body=\"Are you sure you want to delete this article?\"\n            ok=\"Delete\"\n            cancel=\"No\"\n            onOK={e => this.run('ok-delete-article', e)}\n            onCancel={e => this.run('cancel-delete-article', e)}\n          />\n        )}\n\n        <div class=\"banner\">\n          <div class=\"container\">\n            <h1>{article.title}</h1>\n            <ArticleMeta article={article} component={this} />\n          </div>\n        </div>\n\n        <div class=\"container page\">\n          <div class=\"row article-content\">\n            <div class=\"col-md-12\">\n              <p>{`_html:${marked(article.body, { sanitize: true })}`}</p>\n              <div class=\"tag-list\">\n                <br />\n                {article.tagList.map(tag => (\n                  <li class=\"tag-default tag-pill tag-outline\">\n                    <a href={`#/tag/${tag}`}>{tag} </a>\n                  </li>\n                ))}\n              </div>\n            </div>\n          </div>\n          <hr />\n          <div class=\"article-actions\">\n            <ArticleMeta article={article} component={this} />\n          </div>\n          <Comments comments={state.comments} />\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/article') root = async (state, slug) => {\n    let article = state.article as IArticle;\n    let _comments = state.comments;\n    if (!article || article.slug !== slug) {\n      const result = await articles.get(slug);\n      article = result.article;\n      const commentsResponse = await comments.forArticle(article.slug);\n      _comments = commentsResponse.comments;\n    }\n    return { ...state, article, comments: _comments };\n  };\n\n  @on('/new-comment') newComment = async (state, e) => {\n    try {\n      e.preventDefault();\n      const comment = e.target['comment'].value;\n      if (!comment) return;\n      await comments.create(state.article.slug, { body: comment });\n      const commentsResponse = await comments.forArticle(state.article.slug);\n      return { ...state, comments: commentsResponse.comments };\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n\n  @on('/delete-comment') deleteComment = async (state, comment) => {\n    await comments.delete(this.state.article.slug, comment.id);\n    const commentsResponse = await comments.forArticle(state.article.slug);\n    return { ...state, comments: commentsResponse.comments };\n  };\n\n  @on('update-article') updateArticle = (state, article) => ({\n    ...state,\n    article\n  });\n\n  @on('update-follow') updateFollow = (state, author) => {\n    state.article.author = author;\n    return state;\n  };\n\n  @on('edit-article') editArticle = (state, article) => {\n    document.location.hash = `#/editor/${article.slug}`;\n  };\n\n  @on('delete-article') deleteArticle = (state, article) => ({\n    ...state,\n    deleting: true\n  });\n\n  @on('ok-delete-article') okDelete = (state, e) => {\n    articles.delete(state.article.slug);\n    document.location.hash = '#/';\n    return { ...state, deleting: false };\n  };\n\n  @on('cancel-delete-article') cancelDelete = (state, article) => ({\n    ...state,\n    deleting: false\n  });\n}\n\nexport default new ArticleComponent().mount('my-app');\n","import app from 'apprun';\n\nimport './components/header';\nimport './components/home';\nimport './components/signin';\nimport './components/register';\nimport './components/profile';\nimport './components/settings';\nimport './components/editor';\nimport './components/article';\n\napp.on('#', (route, ...p) => {\n  app.run(`#/${route || ''}`, ...p);\n});\n\napp.run('/get-user');\n"],"names":["HeaderComponent","Component","[object Object]","this","state","user","app","class","href","username","__decorate","on","start","access_token","window","localStorage","getItem","setToken","token","setItem","removeItem","fetchAsync","method","url","body","headers","Content-Type","response","defaultBasePath","JSON","stringify","status","Error","result","json","ok","get","post","del","put","toQueryString","obj","parts","i","hasOwnProperty","push","encodeURIComponent","join","serializeObject","form","nodeName","elements","length","field","name","type","tempvalue","j","options","selected","value","charAt","substring","checked","tags","auth","run","articles","request","slug","article","comments","comment","commentId","profile","Article","props","favClass","favorited","author","image","src","Date","updatedAt","toLocaleString","onclick","e","component","favoritesCount","title","description","tagList","map","tag","max","link","pages","Array","fill","page","idx","current","document","location","reload","following","Tag","HomeComponent","Articles","Pages","Math","floor","parseInt","limit","offset","feed","min","articlesCount","errors","updateState","a","Object","keys","key","mount","SigninComponent","Promise","Errors","onsubmit","placeholder","messages","returnTo","hash","preventDefault","session","target","replace","history","pushState","RegisterComponent","ProfileComponent","bio","decodeURIComponent","newState","profileResult","articleResult","cancel","onOK","onCancel","role","SettingsComponent","showModal","Modal","rows","email","password","showModel","EditorComponent","split","Comment","marked","sanitize","createdAt","ArticleMeta","followClass","ArticleComponent","deleting","Comments","_comments","commentsResponse","id","route","p"],"mappings":"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"}