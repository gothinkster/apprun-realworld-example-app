{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/app.ts","webpack:///../src/createComponent.tsx","webpack:///../src/vdom-my.ts","webpack:///../src/web-component.ts","webpack:///../src/decorator.ts","webpack:///../src/directive.ts","webpack:///../src/component.ts","webpack:///../src/router.ts","webpack:///../src/apprun.ts","webpack:///../src/vdom.ts","webpack:///./node_modules/marked/lib/marked.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./src/components/header.tsx","webpack:///./src/fetch.ts","webpack:///./src/api.ts","webpack:///./src/components/article-list.tsx","webpack:///./src/components/page-list.tsx","webpack:///./src/components/home.tsx","webpack:///./src/components/error-list.tsx","webpack:///./src/components/signin.tsx","webpack:///./src/components/register.tsx","webpack:///./src/components/profile.tsx","webpack:///./src/components/modal.tsx","webpack:///./src/components/settings.tsx","webpack:///./src/components/editor.tsx","webpack:///./src/components/comment-list.tsx","webpack:///./src/components/article-meta.tsx","webpack:///./src/components/article.tsx","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","App","[object Object]","this","_events","fn","options","push","subscribers","filter","sub","args","console","assert","length","once","forEach","delay","apply","on","_t","clearTimeout","setTimeout","app","root","self","global","_idx","ATTR_PROPS","collect","children","ch","Array","isArray","keyCache","updateElement","element","nodes","parent","createComponent","node","idx","map","child","vdom","tag","getPrototypeOf","__isAppRunComponent","props","id","Date","now","__componentCache","component","mount","state","mounted","new_state","view","Promise","then","run","_view","rendered","updateChildren","update","el","key1","nodeName","key2","toUpperCase","updateProps","parentNode","replaceChild","len","Math","min","childNodes","HTMLElement","insertBefore","textContent","nodeType","createText","old","appendChild","removeChild","lastChild","document","createDocumentFragment","indexOf","div","createElement","insertAdjacentHTML","substring","createTextNode","isSvg","SVGElement","JSON","stringify","createElementNS","oldProps","newProps","keys","style","cssText","startsWith","cname","replace","match","dataset","getAttribute","setAttribute","removeAttribute","customElement","componentClass","super","_component","observedAttributes","isConnected","opts","render","shadow","_shadowRoot","attachShadow","from","attributes","item","parentElement","unmount","customElements","define","Reflect","meta","WeakMap","metadataKey","metadataValue","target","has","set","events","toString","defineMetadata","getStateValue","setStateValue","setState","event","e","handler","type","checked","Number","multiple","selected","componentCache","components","REFRESH","Component","_history_idx","_history","history","h","directive","html","getElementById","tracking_attr","unload","tracking_id","valueOf","MutationObserver","observer","changes","removedNodes","oldValue","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","catch","err","error","_state","renderState","enable_history","callback","global_event","prev","_history_prev","next","_history_next","add_actions","_global_events","action","newState","actions","getMetadataKeys","getMetadata","all","act","split","trim","add_action","is_global_event","_app","_actions","off","route","url","rest","_","Error","Fragment","webComponent","start","model","NOOP","addEventListener","window","onpopstate","location","hash","block","newline","code","fences","hr","heading","blockquote","list","def","nptable","noop","table","lheading","_paragraph","text","Lexer","tokens","links","marked","defaults","rules","normal","pedantic","gfm","_label","_title","edit","getRegex","bullet","source","_tag","_comment","paragraph","merge","lex","src","token","top","loose","cap","bull","b","listStart","listItems","space","isordered","istask","ischecked","exec","lastToken","trimRight","codeBlockStyle","rtrim","lang","depth","header","splitCells","align","cells","test","ordered","RegExp","smartLists","slice","join","charAt","undefined","task","sanitize","pre","sanitizer","escape","toLowerCase","href","title","charCodeAt","inline","autolink","link","reflink","nolink","strong","em","br","del","InlineLexer","renderer","Renderer","breaks","TextRenderer","Parser","slugger","Slugger","seen","encode","escapeTest","escapeReplace","replacements","escapeTestNoEncode","escapeReplaceNoEncode","unescape","String","fromCharCode","parseInt","regex","opt","val","cleanUrl","base","prot","decodeURIComponent","originIndependentUrl","baseUrls","resolveUrl","encodeURI","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","output","prevCapZero","out","inLink","inRawBlock","lastParenIndex","findClosingBracket","linkLen","outputLink","escapes","codespan","mangle","smartypants","image","random","infostring","escaped","highlight","langPrefix","quote","level","raw","headerIds","headerPrefix","slug","xhtml","body","listitem","checkbox","tablerow","content","tablecell","flags","baseUrl","parse","inlineText","reverse","tok","pop","peek","parseText","row","cell","j","errMsg","silent","log","originalSlug","obj","arguments","tableRow","count","offset","str","curr","splice","invert","suffLen","currChar","substr","checkSanitizeDeprecation","warn","pending","done","message","setOptions","getDefaults","parser","lexer","inlineLexer","g","Function","__decorate","decorators","desc","getOwnPropertyDescriptor","decorate","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","result","user","class","username","setUser","access_token","localStorage","getItem","setToken","setItem","removeItem","fetchAsync","method","headers","response","defaultBasePath","status","json","ok","post","put","toQueryString","parts","encodeURIComponent","serializeObject","form","elements","field","tempvalue","tags","auth","current","signIn","register","save","authorized","search","request","feed","delete","favorite","unfavorite","article","comment","commentId","forArticle","follow","unfollow","Article","favClass","favorited","author","updatedAt","toLocaleString","onclick","favoritesCount","description","tagList","reload","following","profile","articles","max","pages","fill","page","PAGE_SIZE","Tag","floor","updateState","limit","articlesCount","errors","updateArticle","a","onsubmit","placeholder","login","messages","returnTo","logout","preventDefault","session","pushState","submitRegistration","bio","profileResult","articleResult","updateFollow","cancel","onOK","onCancel","role","showModal","rows","email","password","settings","submitSettings","showModel","submitArticle","Comment","createdAt","comments","ArticleMeta","followClass","deleting","_comments","newComment","commentsResponse","deleteComment","editArticle","deleteArticle","okDelete","cancelDelete"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,sHCjFxCC,EAUXC,cACEC,KAAKC,QAAU,GAGjBF,GAAG1B,EAAc6B,EAAuBC,EAAwB,IAC9DH,KAAKC,QAAQ5B,GAAQ2B,KAAKC,QAAQ5B,IAAS,GAC3C2B,KAAKC,QAAQ5B,GAAM+B,KAAK,CAAEF,KAAIC,YAGhCJ,IAAI1B,EAAc6B,GAChB,MAAMG,EAAcL,KAAKC,QAAQ5B,IAAS,GAE1C2B,KAAKC,QAAQ5B,GAAQgC,EAAYC,OAAQC,GAAQA,EAAIL,KAAOA,GAG9DH,KAAK1B,GACH,OAAO2B,KAAKC,QAAQ5B,GAGtB0B,IAAI1B,KAAiBmC,GACnB,IAAIH,EAAcL,KAAKC,QAAQ5B,IAAS,GAqBxC,OAnBAoC,QAAQC,OAAOL,GAAeA,EAAYM,OAAS,EAAG,4BAA8BtC,GAKpF2B,KAAKC,QAAQ5B,GAAQgC,EAAYC,OAAQC,IAC/BA,EAAIJ,QAAQS,MAGtBP,EAAYQ,QAASN,IACnB,MAAML,GAAEA,EAAEC,QAAEA,GAAYI,EAMxB,OALIJ,EAAQW,MACVd,KAAKc,MAAMzC,EAAM6B,EAAIM,EAAML,GAE3BD,EAAGa,MAAMf,KAAMQ,IAETD,EAAIJ,QAAQS,OAGfP,EAAYM,OAGrBZ,KAAK1B,EAAc6B,EAAIC,EAAwB,IAC7CH,KAAKgB,GAAG3C,EAAM6B,iCAASC,IAASS,MAAKA,KAG/Bb,MAAM1B,EAAM6B,EAAIM,EAAML,GACxBA,EAAQc,IAAIC,aAAaf,EAAQc,IACrCd,EAAQc,GAAKE,WAAW,KACtBD,aAAaf,EAAQc,IACrBf,EAAGa,MAAMf,KAAMQ,IACdL,EAAQW,QAKf,IAAIM,EACJ,MAAMC,EAAwB,iBAATC,MAAqBA,KAAKA,OAASA,MAAQA,MAC3C,iBAAXC,GAAuBA,EAAOA,SAAWA,GAAUA,EACzDF,EAAU,KAAKA,EAAsB,gBACvCD,EAAMC,EAAU,KAEhBD,EAAM,IAAItB,EACVuB,EAAU,IAAID,EACdC,EAAsB,gBATD,YAWvB,MAAeD,EC9Cf,IAAII,EAAO,EC7BX,MAAMC,EAAa,SAEnB,SAASC,EAAQC,GACf,MAAMC,EAAK,GACLxB,EAAQjC,IACRA,SAAuC,KAANA,QAAYA,GAC/CyD,EAAGxB,KAAmB,mBAANjC,GAAiC,iBAANA,EAAkBA,EAAI,GAAGA,MAUxE,OAPAwD,GAAYA,EAASd,QAAQ1C,IACvB0D,MAAMC,QAAQ3D,GAChBA,EAAE0C,QAAQ/C,GAAKsC,EAAKtC,IAEpBsC,EAAKjC,KAGFyD,EAaT,MAAMG,EAAW,GAEJC,EAEb,SAAuBC,EAAkBC,EAAwBC,EAAS,IAG3D,MAATD,IAEJA,EDRF,SAAwBE,EAAgBC,EAAMF,EAAQG,EAAM,GAE1D,GADY,IAARA,IAAWd,EAAO,GACF,iBAATa,EAAmB,OAAOA,EACrC,GAAIR,MAAMC,QAAQO,GAAO,OAAOA,EAAKE,IAAIC,GAASJ,EAAgBI,EAAOL,EAAQX,IACjF,IAAIiB,EAAOJ,EAKX,OAJIA,GAA4B,mBAAbA,EAAKK,KAAsBlE,OAAOmE,eAAeN,EAAKK,KAAKE,IAC5EH,EAtCJ,SAAgBJ,EAAMF,EAAQG,GAC5B,MAAMI,IAAEA,EAAGG,MAAEA,EAAKlB,SAAEA,GAAaU,EACjC,IAAIhD,EAAM,IAAIiD,IACVQ,EAAKD,GAASA,EAAU,GACvBC,EACAzD,EAAMyD,EADFA,EAAK,IAAIR,IAAMS,KAAKC,QAExBb,EAAOc,IAAkBd,EAAOc,EAAmB,IACxD,IAAIC,EAAYf,EAAOc,EAAiB5D,GACnC6D,EAIHJ,EAAKI,EAAiB,GAHtBA,EAAYf,EAAOc,EAAiB5D,GAAO,IAAIqD,iCAASG,IAAOlB,cAAYwB,MAAML,IAChE,EAAIA,EAIvB,IAAIM,EAAQF,EAAUE,MACtB,GAAIF,EAAUG,QAAS,CACrB,MAAMC,EAAYJ,EAAUG,QAAQR,EAAOlB,YAChC2B,IAA2BF,EAAQF,EAAUE,MAAQE,GAElE,IAAIb,EAAO,GASX,OARIS,EAAUK,OACRH,aAAiBI,QACnBJ,EAAMK,KAAK,IAAMP,EAAUQ,IAAI,OAE/BjB,EAAOS,EAAUS,MAAMP,EAAOP,GAC9BK,EAAUU,UAAYzC,WAAW,IAAM+B,EAAUU,SAASR,EAAOP,MAG9DzB,2CAAayB,GAAOC,GAAIA,IAAKL,GA5BtC,CAsCkBJ,EAAMF,EAAQX,MAC1BiB,GAAQZ,MAAMC,QAAQW,EAAKd,YAC7Bc,EAAKd,SAAWc,EAAKd,SAASY,IAAIC,GAASJ,EAAgBI,EAAOL,EAAQX,KACrEiB,ECDCL,CAAgBF,EAAOC,GAE1BF,IACDJ,MAAMC,QAAQI,GAChB2B,EAAe5B,EAASC,GAExB2B,EAAe5B,EAAS,CAACC,OAW7B,SAAS4B,EAAO7B,EAAkBI,GAChC5B,QAAQC,SAASuB,GARnB,SAAc8B,EAAa1B,GAEzB,MAAM2B,EAAOD,EAAGE,SACVC,EAAO,GAAG7B,EAAKK,KAAO,KAC5B,OAAOsB,EAAKG,gBAAkBD,EAAKC,cAJrC,CAUYlC,EAASI,IAInBwB,EAAe5B,EAASI,EAAKV,UAC7ByC,EAAYnC,EAASI,EAAKQ,QAJxBZ,EAAQoC,WAAWC,aAAalF,EAAOiD,GAAOJ,GAOlD,SAAS4B,EAAe5B,EAASN,GAC/B,MAAM4C,EAAMC,KAAKC,IAAIxC,EAAQyC,WAAW/D,OAAQgB,EAAShB,QACzD,IAAK,IAAI7C,EAAI,EAAGA,EAAIyG,EAAKzG,IAAK,CAC5B,MAAM0E,EAAQb,EAAS7D,GACjBiG,EAAK9B,EAAQyC,WAAW5G,GAC9B,GAAI0E,aAAiBmC,YACnB1C,EAAQ2C,aAAapC,EAAOuB,QAEzB,GAAqB,iBAAVvB,EACVuB,EAAGc,cAAgBrC,IACD,IAAhBuB,EAAGe,SACLf,EAAGc,YAAcrC,EAEjBP,EAAQqC,aAAaS,EAAWvC,GAAQuB,QAGvC,CACL,MAAM1E,EAAMmD,EAAMK,OAASL,EAAMK,MAAW,IAC5C,GAAIxD,EACF,GAAI0E,EAAG1E,MAAQA,EACbyE,EAAO7B,EAAQyC,WAAW5G,GAAI0E,OACzB,CACL,MAAMwC,EAAMjD,EAAS1C,GACjB2F,GACF/C,EAAQ2C,aAAaI,EAAKjB,GAC1B9B,EAAQgD,YAAYlB,GACpBD,EAAO7B,EAAQyC,WAAW5G,GAAI0E,IAE9BP,EAAQ2C,aAAaxF,EAAOoD,GAAQuB,QAIxCD,EAAO7B,EAAQyC,WAAW5G,GAAI0E,IAKpC,IAAIjD,EAAI0C,EAAQyC,WAAW/D,OAC3B,KAAOpB,EAAIgF,GACTtC,EAAQiD,YAAYjD,EAAQkD,WAC5B5F,IAGF,GAAIoC,EAAShB,OAAS4D,EAAK,CACzB,MAAMnG,EAAIgH,SAASC,yBACnB,IAAK,IAAIvH,EAAIyG,EAAKzG,EAAI6D,EAAShB,OAAQ7C,IACrCM,EAAE6G,YAAY7F,EAAOuC,EAAS7D,KAEhCmE,EAAQgD,YAAY7G,IAIxB,SAAS2G,EAAW1C,GAClB,GAA+B,IAA3BA,EAAKiD,QAAQ,UAAiB,CAChC,MAAMC,EAAMH,SAASI,cAAc,OAEnC,OADAD,EAAIE,mBAAmB,aAAcpD,EAAKqD,UAAU,IAC7CH,EAEP,OAAOH,SAASO,eAAetD,GAInC,SAASjD,EAAOiD,EAAiDuD,MAG/D,GAFAnF,QAAQC,OAAO2B,SAEVA,aAAgBsC,aAAiBtC,aAAgBwD,WAAa,OAAOxD,EAC1E,GAAoB,iBAATA,EAAmB,OAAO0C,EAAW1C,GAChD,IAAKA,EAAKK,KAA4B,mBAAbL,EAAKK,IAAqB,OAAOqC,EAAWe,KAAKC,UAAU1D,IAEpF,MAAMJ,GADN2D,EAAQA,GAAsB,QAAbvD,EAAKK,KAElB0C,SAASY,gBAAgB,6BAA8B3D,EAAKK,KAC5D0C,SAASI,cAAcnD,EAAKK,KAMhC,OAJA0B,EAAYnC,EAASI,EAAKQ,OAEtBR,EAAKV,UAAUU,EAAKV,SAASd,QAAQ2B,GAASP,EAAQgD,YAAY7F,EAAOoD,EAAOoD,KAE7E3D,EAYT,SAASmC,EAAYnC,EAAkBY,GACrCpC,QAAQC,SAASuB,GAGjBY,EAbF,SAAoBoD,EAAcC,GAChCA,EAAgB,MAAIA,EAAgB,OAAKA,EAAoB,iBACtDA,EAAoB,UAC3B,MAAMrD,EAAQ,GAGd,OAFIoD,GAAUzH,OAAO2H,KAAKF,GAAUpF,QAAQjB,GAAKiD,EAAMjD,GAAK,MACxDsG,GAAU1H,OAAO2H,KAAKD,GAAUrF,QAAQjB,GAAKiD,EAAMjD,GAAKsG,EAAStG,IAC9DiD,EANT,CAYiBZ,EAAQR,IAAe,GACXoB,GAAS,IACpCZ,EAAQR,GAAcoB,EACtB,IAAK,MAAMxE,KAAQwE,EAAO,CACxB,MAAM9D,EAAQ8D,EAAMxE,GAGpB,GAAa,UAATA,EAAkB,CAChB4D,EAAQmE,MAAMC,UAASpE,EAAQmE,MAAMC,QAAU,IACnD,IAAK,MAAMxG,KAAKd,EACVkD,EAAQmE,MAAMvG,KAAOd,EAAMc,KAAIoC,EAAQmE,MAAMvG,GAAKd,EAAMc,SAEzD,GAAIxB,EAAKiI,WAAW,SAAU,CACnC,MACMC,EADQlI,EAAKqH,UAAU,GACTc,QAAQ,SAAWC,GAAUA,EAAM,GAAGtC,eACtDlC,EAAQyE,QAAQH,KAAWxH,IACzBA,GAAmB,KAAVA,EAAckD,EAAQyE,QAAQH,GAASxH,SACxCkD,EAAQyE,QAAQH,QAEZ,OAATlI,GAA0B,UAATA,GAAoBA,EAAKiI,WAAW,SAAWjI,EAAKiH,QAAQ,KAAO,GAC7FrD,aAAmB4D,WACf5D,EAAQ0E,aAAatI,KAAUU,IAC7BA,EAAOkD,EAAQ2E,aAAavI,EAAMU,GACjCkD,EAAQ4E,gBAAgBxI,IAEtB4D,EAAQ5D,KAAUU,IACzBkD,EAAQ5D,GAAQU,GAEP,QAATV,GAAkBU,IAAOgD,EAAShD,GAASkD,ICvL5C,MAAM6E,EAAgB,CAACC,EAAgB5G,EAAgC,oBAAqBwE,YAKjG5E,cACEiH,QAEF9D,gBAAkB,OAAOlD,KAAKiH,WAC9B7D,YAAc,OAAOpD,KAAKiH,WAAW7D,MAErC8D,gCACE,OAAO1I,iBAAK2B,GAA8B,mBAG5CJ,oBACE,GAAIC,KAAKmH,cAAgBnH,KAAKiH,WAAY,CACxC,MAAMG,iBAASC,QAAOA,EAAOC,QAAOA,GAAWnH,GAC/CH,KAAKuH,YAAcH,EAAKE,OACtBtH,KAAKwH,aAAa,CAAEvI,KAAM,SAAYe,KACxC,MAAM6C,EAAQ,GACdhB,MAAM4F,KAAKzH,KAAK0H,YAAY7G,QAAQ8G,GAAQ9E,EAAM8E,EAAKtJ,MAAQsJ,EAAK5I,OACpE,MAAM4C,EAAW3B,KAAK2B,SAAWE,MAAM4F,KAAKzH,KAAK2B,UAAY,GAC7DA,EAASd,QAAQkD,GAAMA,EAAG6D,cAAc1C,YAAYnB,IACpD/D,KAAKiH,WAAa,IAAIF,iCAAoBlE,IAAOlB,cAAYwB,MAAMnD,KAAKuH,YAAaH,GACrFpH,KAAKiH,WAAW5D,SAAWrD,KAAKiH,WAAW5D,QAAQR,EAAOlB,GAC1D3B,KAAKgB,GAAKhB,KAAKiH,WAAWjG,GAAG1B,KAAKU,KAAKiH,YACvCjH,KAAK0D,IAAM1D,KAAKiH,WAAWvD,IAAIpE,KAAKU,KAAKiH,aAI7ClH,uBACEC,KAAKiH,WAAWY,UAChB7H,KAAKiH,WAAa,KAGpBlH,4BAA4BS,GAC1BR,KAAKiH,YAAcjH,KAAKiH,WAAWvD,IAAI,sBAAuBlD,MAIlE,MAAe,CAACnC,EAAc0I,EAAgB5G,KACjB,oBAAnB2H,gBAAmCA,eAAeC,OAAO1J,EAAMyI,EAAcC,EAAgB5G,KC9CvG,MAAa6H,EAAU,CAErBC,KAAM,IAAIC,QAEVnI,eAAeoI,EAAaC,EAAeC,GACpCrI,KAAKiI,KAAKK,IAAID,IAASrI,KAAKiI,KAAKM,IAAIF,EAAQ,IAClDrI,KAAKiI,KAAKtJ,IAAI0J,GAAQF,GAAeC,GAGvCrI,gBAAgBsI,GAEd,OADAA,EAAS7J,OAAOmE,eAAe0F,GACxBrI,KAAKiI,KAAKtJ,IAAI0J,GAAU7J,OAAO2H,KAAKnG,KAAKiI,KAAKtJ,IAAI0J,IAAW,IAGtEtI,YAAYoI,EAAaE,GAEvB,OADAA,EAAS7J,OAAOmE,eAAe0F,GACxBrI,KAAKiI,KAAKtJ,IAAI0J,GAAUrI,KAAKiI,KAAKtJ,IAAI0J,GAAQF,GAAe,OAaxE,SAAgBnH,EAAMwH,EAAYrI,EAAe,IAC/C,OAAO,SAAUkI,EAAahJ,GAC5B,MAAMhB,EAAOmK,EAASA,EAAOC,WAAapJ,EAC1C2I,EAAQU,eAAe,iBAAiBrK,IACtC,CAAEA,OAAMgB,MAAKc,WAAWkI,IClC9B,MAAMM,EAAgB,CAACzF,EAAW7E,KACxBA,EAAO6E,EAAiB,MAAE7E,GAAQ6E,EAAiB,QAAM,GAG7D0F,EAAgB,CAAC1F,EAAW7E,EAAMU,KACtC,GAAIV,EAAM,CACR,MAAM+E,mBAAaF,EAAiB,OACpCE,EAAM/E,GAAQU,EACdmE,EAAU2F,SAASzF,QAEnBF,EAAU2F,SAAS9J,IAIvB,MAAe,CAACM,EAAawD,EAAWH,EAAKQ,KAC3C,GAAI7D,EAAIiH,WAAW,OAAQ,CACzB,MAAMwC,EAAQjG,EAAMxD,GAEpB,GADAA,EAAMA,EAAIqG,UAAU,GACC,kBAAVoD,EACTjG,EAAMxD,GAAO0J,GAAK7F,EAAUQ,IAAIrE,EAAK0J,QAChC,GAAqB,iBAAVD,EAChBjG,EAAMxD,GAAO0J,GAAK7F,EAAUQ,IAAIoF,EAAOC,QAClC,GAAqB,mBAAVD,EAChBjG,EAAMxD,GAAO0J,GAAK7F,EAAU2F,SAASC,EAAM5F,EAAUE,MAAO2F,SACvD,GAAIlH,MAAMC,QAAQgH,GAAQ,CAC/B,MAAOE,KAAYpJ,GAAKkJ,EACD,iBAAZE,EACTnG,EAAMxD,GAAO0J,GAAK7F,EAAUQ,IAAIsF,KAAYpJ,EAAGmJ,GACnB,mBAAZC,IAChBnG,EAAMxD,GAAO0J,GAAK7F,EAAU2F,SAASG,EAAQ9F,EAAUE,SAAUxD,EAAGmJ,WAInE,GAAY,UAAR1J,EAAiB,CAC1B,MAAM4J,EAAOpG,EAAY,MAAK,OACxBxE,EAA6B,iBAAfwE,EAAMxD,GAAoBwD,EAAMxD,GAAOwD,EAAY,KACvE,GAAY,UAARH,EACF,OAAQuG,GACN,IAAK,WACHpG,EAAe,QAAI8F,EAAczF,EAAW7E,GAC5CwE,EAAe,QAAIkG,GAAKH,EAAc1F,EAAW7E,GAAQ0K,EAAEV,OAAOhK,KAAM0K,EAAEV,OAAOa,SACjF,MACF,IAAK,QACHrG,EAAe,QAAI8F,EAAczF,EAAW7E,KAAUwE,EAAa,MACnEA,EAAe,QAAIkG,GAAKH,EAAc1F,EAAW7E,GAAQ0K,EAAEV,OAAOhK,KAAM0K,EAAEV,OAAOtJ,OACjF,MACF,IAAK,SACL,IAAK,QACH8D,EAAa,MAAI8F,EAAczF,EAAW7E,GAC1CwE,EAAe,QAAIkG,GAAKH,EAAc1F,EAAW7E,GAAQ0K,EAAEV,OAAOhK,KAAM8K,OAAOJ,EAAEV,OAAOtJ,QACxF,MACF,QACE8D,EAAa,MAAI8F,EAAczF,EAAW7E,GAC1CwE,EAAe,QAAIkG,GAAKH,EAAc1F,EAAW7E,GAAQ0K,EAAEV,OAAOhK,KAAM0K,EAAEV,OAAOtJ,WAEpE,WAAR2D,GACTG,EAAa,MAAI8F,EAAczF,EAAW7E,GAC1CwE,EAAgB,SAAIkG,IACbA,EAAEV,OAAOe,UACZR,EAAc1F,EAAW7E,GAAQ0K,EAAEV,OAAOhK,KAAM0K,EAAEV,OAAOtJ,SAG5C,WAAR2D,IACTG,EAAgB,SAAI8F,EAAczF,EAAW7E,GAC7CwE,EAAe,QAAIkG,GAAKH,EAAc1F,EAAW7E,GAAQ0K,EAAEV,OAAOhK,KAAM0K,EAAEV,OAAOgB,gBAGnFjI,EAAIsC,IAAI,IAAK,CAAErE,MAAKqD,MAAKG,QAAOK,eC/DpC,MAAMoG,EAAiB,GACvBlI,EAAIJ,GAAG,iBAAkBzC,GAAKA,EAAEgL,WAAaD,GAE7C,MAAME,EAAUpG,GAASA,EAEzB,MAAaqG,EA2HX1J,YACYqD,EACAG,EACAO,EACA3D,GAHAH,WAAAoD,EACApD,UAAAuD,EACAvD,YAAA8D,EACA9D,aAAAG,EA7HJH,UAAO,IAAIF,EACXE,cAAW,GACXA,oBAAiB,GAEjBA,cAAW,GACXA,mBAAgB,EAgGhBA,mBAAgB,KACtBA,KAAK0J,eACD1J,KAAK0J,cAAgB,EACvB1J,KAAK6I,SAAS7I,KAAK2J,SAAS3J,KAAK0J,cAAe,CAAErC,QAAOA,EAAOuC,SAAQA,IAGxE5J,KAAK0J,aAAe,GAIhB1J,mBAAgB,KACtBA,KAAK0J,eACD1J,KAAK0J,aAAe1J,KAAK2J,SAAShJ,OACpCX,KAAK6I,SAAS7I,KAAK2J,SAAS3J,KAAK0J,cAAe,CAAErC,QAAOA,EAAOuC,SAAQA,IAGxE5J,KAAK0J,aAAe1J,KAAK2J,SAAShJ,OAAS,GAW/CX,WAAQ,CAACiC,EAAU,KACjB9B,EAAkE,CAAEkH,QAAOA,KACpErH,KAAKmD,MAAMlB,iCAAc9B,IAASkH,QAAOA,KApHlDtH,OAAOkC,EAAsBI,GAC3BjB,EAAIiG,OAAOpF,EAASI,EAAMrC,MAGpBD,MAAMqD,EAAOxD,EAAI,MACvB,IAAKI,KAAKuD,KAAM,OAChB,MAAMsG,EAAIzI,EAAIoE,cACdpE,EAAIoE,cAAgB,CAAC9C,EAAKG,KAAUlB,KAClCkB,GAASrE,OAAO2H,KAAKtD,GAAOhC,QAAQxB,IAC9BA,EAAIiH,WAAW,OACjBwD,EAAUzK,EAAKwD,EAAOH,EAAK1C,aACpB6C,EAAMxD,MAGVwK,EAAEnH,EAAKG,KAAUlB,IAE1B,MAAMoI,EAAOnK,EAAII,KAAKuD,KAAKH,EAAOxD,GAAKI,KAAKuD,KAAKH,GAEjD,OADAhC,EAAIoE,cAAgBqE,EACbE,EAGDhK,YAAYqD,GAClB,IAAKpD,KAAKuD,KAAM,OAChB,MAAMwG,EAAO/J,KAAK2D,MAAMP,GAOxB,GANAhC,EAAW,OAAKA,EAAIsC,IAAI,QAAS,CAC/BR,UAAWlD,KACXoD,QACAX,KAAMsH,GAAQ,+BAGQ,iBAAb3E,SAAuB,OAElC,MAAMrB,EAA8B,iBAAjB/D,KAAKiC,QACtBmD,SAAS4E,eAAehK,KAAKiC,SAAWjC,KAAKiC,QAE/C,GAAI8B,EAAI,CACN,MAAMkG,EAAgB,KACtB,GAAKjK,KAAKkK,QAEH,GAAInG,EAAe,aAAM/D,OAC9BA,KAAKmK,iBAAkBpH,MAAOqH,UAAU3B,WACxC1E,EAAG6C,aAAaqD,EAAejK,KAAKmK,aACJ,oBAArBE,kBAAkC,CAC3C,MAAMC,EAAW,IAAID,iBAAiBE,IACpC,MAAMC,aAAEA,EAAYC,SAAEA,GAAaF,EAAQ,IACvCE,IAAazK,KAAKmK,aAAetI,MAAM4F,KAAK+C,GAAclF,QAAQvB,IAAO,KAC3E/D,KAAKkK,OAAOlK,KAAKoD,OACjBkH,EAASI,gBAGT3G,EAAGM,YAAYiG,EAASK,QAAQ5G,EAAGM,WAAY,CACjDuG,WAAUA,EAAOC,SAAQA,EACzBnD,YAAWA,EAAOoD,mBAAkBA,EAAOC,gBAAiB,CAACd,WAdjElG,EAAG8C,iBAAmB9C,EAAG8C,gBAAgBoD,GAkB3ClG,EAAe,WAAI/D,KAErBA,KAAKqH,OAAOtD,EAAIgG,GACZ/J,KAAK4D,UAAW5D,KAAK4D,SAAS5D,KAAKoD,OAGlCrD,SAASqD,EAAUjD,EACtB,CAAEkH,QAAOA,EAAOuC,SAAQA,IAC1B,GAAIxG,aAAiBI,QAGnBJ,EAAMK,KAAK5D,IACTG,KAAK6I,SAAShJ,EAAGM,KAChB6K,MAAMC,IAEP,MADAxK,QAAQyK,MAAMD,GACRA,IAERjL,KAAKmL,OAAS/H,MACT,CAEL,GADApD,KAAKmL,OAAS/H,EACD,MAATA,EAAe,OACnBpD,KAAKoD,MAAQA,OACTjD,EAAQkH,QAAkBrH,KAAKoL,YAAYhI,QAC3CjD,EAAQyJ,SAAqB5J,KAAKqL,iBACpCrL,KAAK2J,SAAW,IAAI3J,KAAK2J,SAAUvG,GACnCpD,KAAK0J,aAAe1J,KAAK2J,SAAShJ,OAAS,GAEb,mBAArBR,EAAQmL,UAAyBnL,EAAQmL,SAAStL,KAAKoD,QAoC/DrD,MAAMkC,EAAU,KAAM9B,GAmB3B,GAjBAM,QAAQC,QAAQV,KAAKiC,QAAS,8BAC9BjC,KAAKG,QAAUA,iCAAeH,KAAKG,SAAYA,GAC/CH,KAAKiC,QAAUA,EACfjC,KAAKuL,aAAepL,EAAQoL,aAC5BvL,KAAKqL,iBAAmBlL,EAAQyJ,QAE5B5J,KAAKqL,iBACPrL,KAAKgB,GAAGb,EAAQyJ,QAAQ4B,MAAQ,eAAgBxL,KAAKyL,eACrDzL,KAAKgB,GAAGb,EAAQyJ,QAAQ8B,MAAQ,eAAgB1L,KAAK2L,gBAEvD3L,KAAK4L,uBACD5L,KAAKoD,QAAqBpD,KAAKoD,MAAyB,MAAjBpD,KAAY,MAAYA,KAAY,MAAI,IAC/EG,EAAQkH,OACVrH,KAAK6I,SAAS7I,KAAKoD,MAAO,CAAEiE,QAAOA,EAAOuC,SAAQA,IAElD5J,KAAK6I,SAAS7I,KAAKoD,MAAO,CAAEiE,QAAOA,EAAQuC,SAAQA,IAEjDxI,EAAW,MAAG,CAChB,MAAM0B,EAAwB,iBAAZb,EAAuBA,EAAUA,EAAQa,GAC3DwG,EAAexG,GAAMwG,EAAexG,IAAO,GAC3CwG,EAAexG,GAAI1C,KAAKJ,MAE1B,OAAOA,KAGTD,gBAAgB1B,GACd,OAAOA,IACL2B,KAAKuL,cACLvL,KAAK6L,eAAevG,QAAQjH,IAAS,GACrCA,EAAKiI,WAAW,MAAQjI,EAAKiI,WAAW,MAAQjI,EAAKiI,WAAW,MAGpEvG,WAAW1B,EAAcyN,EAAQ3L,EAAyB,IACnD2L,GAA4B,mBAAXA,IAClB3L,EAAQoB,QAAQvB,KAAM6L,eAAezL,KAAK/B,GAC9C2B,KAAKgB,GAAG3C,EAAa,IAAIuB,KACvB,MAAMmM,EAAWD,EAAO9L,KAAKoD,SAAUxD,GAEvCwB,EAAW,OAAKA,EAAIsC,IAAI,QAAS,CAC/BR,UAAWlD,KACX8I,MAASzK,EACT0K,EAAGnJ,EACHwD,MAAOpD,KAAKoD,MACZ2I,WACA5L,YAGFH,KAAK6I,SAASkD,EAAU5L,IACvBA,IAGLJ,cACE,MAAMiM,EAAUhM,KAAK8D,QAAU,GAC/BkE,EAAQiE,gBAAgBjM,MAAMa,QAAQxB,IACpC,GAAIA,EAAIiH,WAAW,kBAAmB,CACpC,MAAM2B,EAAOD,EAAQkE,YAAY7M,EAAKW,MACtCgM,EAAQ/D,EAAK5J,MAAQ,CAAC2B,KAAKiI,EAAK5I,KAAKC,KAAKU,MAAOiI,EAAK9H,YAI1D,MAAMgM,EAAM,GACRtK,MAAMC,QAAQkK,GAChBA,EAAQnL,QAAQuL,IACd,MAAO/N,EAAMyN,EAAQ1E,GAAQgF,EACf/N,EAAKoK,WACb4D,MAAM,KAAKxL,QAAQtB,GAAK4M,EAAI5M,EAAE+M,QAAU,CAACR,EAAQ1E,MAGzD5I,OAAO2H,KAAK6F,GAASnL,QAAQxC,IAC3B,MAAMyN,EAASE,EAAQ3N,IACD,mBAAXyN,GAAyBjK,MAAMC,QAAQgK,KAChDzN,EAAKgO,MAAM,KAAKxL,QAAQtB,GAAK4M,EAAI5M,EAAE+M,QAAUR,KAK9CK,EAAI,OAAMA,EAAI,KAAO3C,GAC1BhL,OAAO2H,KAAKgG,GAAKtL,QAAQxC,IACvB,MAAMyN,EAASK,EAAI9N,GACG,mBAAXyN,EACT9L,KAAKuM,WAAWlO,EAAMyN,GACbjK,MAAMC,QAAQgK,IACvB9L,KAAKuM,WAAWlO,EAAMyN,EAAO,GAAIA,EAAO,MAMvC/L,IAAI+I,KAAatI,GACtB,MAAMnC,EAAOyK,EAAML,WACnB,OAAOzI,KAAKwM,gBAAgBnO,GAC1B+C,EAAIsC,IAAIrF,KAASmC,GACjBR,KAAKyM,KAAK/I,IAAIrF,KAASmC,GAGpBT,GAAG+I,EAAU5I,EAAuBC,GACzC,MAAM9B,EAAOyK,EAAML,WAEnB,OADAzI,KAAK0M,SAAStM,KAAK,CAAE/B,OAAM6B,OACpBF,KAAKwM,gBAAgBnO,GAC1B+C,EAAIJ,GAAG3C,EAAM6B,EAAIC,GACjBH,KAAKyM,KAAKzL,GAAG3C,EAAM6B,EAAIC,GAGpBJ,UACLC,KAAK0M,SAAS7L,QAAQiL,IACpB,MAAMzN,KAAEA,EAAI6B,GAAEA,GAAO4L,EACrB9L,KAAKwM,gBAAgBnO,GACnB+C,EAAIuL,IAAItO,EAAM6B,GACdF,KAAKyM,KAAKE,IAAItO,EAAM6B,MApPnBuJ,OAAsB,MCLlBmD,EAAgBC,IAE3B,GADKA,IAAKA,EAAM,KACZA,EAAIvG,WAAW,KAAM,CACvB,MAAOjI,KAASyO,GAAQD,EAAIR,MAAM,KAClCjL,EAAIsC,IAAIrF,KAASyO,IAAS1L,EAAIsC,IANM,MAMgBrF,KAASyO,GAC7D1L,EAAIsC,IAR4B,KAQVrF,KAASyO,QAC1B,GAAID,EAAIvG,WAAW,KAAM,CAC9B,MAAOyG,EAAG1O,KAASyO,GAAQD,EAAIR,MAAM,KACrCjL,EAAIsC,IAAI,IAAMrF,KAASyO,IAAS1L,EAAIsC,IAVA,MAUsB,IAAMrF,KAASyO,GACzE1L,EAAIsC,IAZ4B,KAYV,IAAMrF,KAASyO,QAErC1L,EAAIsC,IAAImJ,IAAQzL,EAAIsC,IAbgB,MAaMmJ,GAC1CzL,EAAIsC,IAf4B,KAeVmJ,ICE1BzL,EAAIoE,cNEJ,SAA8B9C,EAA6BG,KAAelB,GACxE,MAAMC,EAAKF,EAAQC,GACnB,GAAmB,iBAARe,EAAkB,MAAO,CAAEA,MAAKG,QAAOlB,SAAUC,GACvD,GAAIC,MAAMC,QAAQY,GAAM,OAAOA,EAC/B,YAAIA,GAAqBf,EAAU,OAAOC,EAC1C,GAAIpD,OAAOmE,eAAeD,GAAKE,EAAqB,MAAO,CAAEF,MAAKG,QAAOlB,SAAUC,GACnF,GAAmB,mBAARc,EAAoB,OAAOA,EAAIG,EAAOjB,GACjD,MAAM,IAAIoL,MAAM,uBAAuBtK,MMR9CtB,EAAIiG,gBCrBmBpF,EAAS8H,EAAM5H,GACpCH,EAAcC,EAAS8H,EAAM5H,IDqB/Bf,EAAI6L,kBN2KqBpK,KAAUlB,GACjC,OAAOD,EAAQC,IM3KjBP,EAAI8L,aAAeA,EAEnB9L,EAAI+L,MAAQ,CAAWlL,EAAgCmL,EAAY7J,EAAgBO,EACjF3D,KACE,MAAMiH,iCAAWjH,IAASkH,QAAOA,EAAOkE,cAAaA,IAC/CrI,EAAY,IAAIuG,EAAgB2D,EAAO7J,EAAMO,GAGnD,OAFI3D,GAAWA,EAAQyD,WAAUV,EAAUU,SAAWzD,EAAQyD,UAC9DV,EAAUC,MAAMlB,EAASmF,GAClBlE,GAGX,MAAMmK,EAAON,MACb3L,EAAIJ,GAAG,IAAKqM,GACZjM,EAAIJ,GAAG,QAAS+L,GAAKM,GACrBjM,EAAIJ,GDlCgC,KCkCfqM,GACrBjM,EAAIJ,GAAG,IAAKqM,GACZjM,EAAW,MAAIwL,EACfxL,EAAIJ,GAAG,QAAS6L,GAAOzL,EAAW,OAAKA,EAAW,MAAEyL,IAE5B,iBAAbzH,UACTA,SAASkI,iBAAiB,mBAAoB,KACxClM,EAAW,QAAMwL,IACnBW,OAAOC,WAAa,IAAMZ,EAAMa,SAASC,MACzCd,EAAMa,SAASC,SAYC,iBAAXH,SACTA,OAAkB,UAAI9D,EACtB8D,OAAc,MAAInM,W,kCE7DpB,aAMC,SAAUC,GACX,aAMA,IAAIsM,EAAQ,CACVC,QAAS,OACTC,KAAM,oBACNC,OAAQ,kFACRC,GAAI,yDACJC,QAAS,iDACTC,WAAY,0CACZC,KAAM,oEACNnE,KAAM,oZAUNoE,IAAK,mFACLC,QAASC,EACTC,MAAOD,EACPE,SAAU,sCAGVC,WAAY,4EACZC,KAAM,WAkGR,SAASC,EAAMvO,GACbH,KAAK2O,OAAS,GACd3O,KAAK2O,OAAOC,MAAQpQ,OAAOY,OAAO,MAClCY,KAAKG,QAAUA,GAAW0O,EAAOC,SACjC9O,KAAK+O,MAAQpB,EAAMqB,OAEfhP,KAAKG,QAAQ8O,SACfjP,KAAK+O,MAAQpB,EAAMsB,SACVjP,KAAKG,QAAQ+O,MACtBlP,KAAK+O,MAAQpB,EAAMuB,KAxGvBvB,EAAMwB,OAAS,iCACfxB,EAAMyB,OAAS,+DACfzB,EAAMQ,IAAMkB,EAAK1B,EAAMQ,KACpB3H,QAAQ,QAASmH,EAAMwB,QACvB3I,QAAQ,QAASmH,EAAMyB,QACvBE,WAEH3B,EAAM4B,OAAS,sBACf5B,EAAMhG,KAAO,+CACbgG,EAAMhG,KAAO0H,EAAK1B,EAAMhG,KAAM,MAC3BnB,QAAQ,QAASmH,EAAM4B,QACvBD,WAEH3B,EAAMO,KAAOmB,EAAK1B,EAAMO,MACrB1H,QAAQ,QAASmH,EAAM4B,QACvB/I,QAAQ,KAAM,mEACdA,QAAQ,MAAO,UAAYmH,EAAMQ,IAAIqB,OAAS,KAC9CF,WAEH3B,EAAM8B,KAAO,gWAMb9B,EAAM+B,SAAW,yBACjB/B,EAAM5D,KAAOsF,EAAK1B,EAAM5D,KAAM,KAC3BvD,QAAQ,UAAWmH,EAAM+B,UACzBlJ,QAAQ,MAAOmH,EAAM8B,MACrBjJ,QAAQ,YAAa,4EACrB8I,WAEH3B,EAAMgC,UAAYN,EAAK1B,EAAMa,YAC1BhI,QAAQ,KAAMmH,EAAMI,IACpBvH,QAAQ,UAAW,kBACnBA,QAAQ,YAAa,IACrBA,QAAQ,aAAc,WACtBA,QAAQ,SAAU,oCAClBA,QAAQ,OAAQ,0BAChBA,QAAQ,OAAQ,sDAChBA,QAAQ,MAAOmH,EAAM8B,MACrBH,WAEH3B,EAAMM,WAAaoB,EAAK1B,EAAMM,YAC3BzH,QAAQ,YAAamH,EAAMgC,WAC3BL,WAMH3B,EAAMqB,OAASY,EAAM,GAAIjC,GAMzBA,EAAMuB,IAAMU,EAAM,GAAIjC,EAAMqB,OAAQ,CAClCZ,QAAS,gFACTE,MAAO,0EAOTX,EAAMsB,SAAWW,EAAM,GAAIjC,EAAMqB,OAAQ,CACvCjF,KAAMsF,EACJ,8IAGC7I,QAAQ,UAAWmH,EAAM+B,UACzBlJ,QAAQ,OAAQ,qKAIhB8I,WACHnB,IAAK,oEACLH,QAAS,6CACTF,OAAQO,EACRsB,UAAWN,EAAK1B,EAAMqB,OAAOR,YAC1BhI,QAAQ,KAAMmH,EAAMI,IACpBvH,QAAQ,UAAW,mBACnBA,QAAQ,WAAYmH,EAAMY,UAC1B/H,QAAQ,aAAc,WACtBA,QAAQ,UAAW,IACnBA,QAAQ,QAAS,IACjBA,QAAQ,QAAS,IACjB8I,aAwBLZ,EAAMK,MAAQpB,EAMde,EAAMmB,IAAM,SAASC,EAAK3P,GAExB,OADY,IAAIuO,EAAMvO,GACT0P,IAAIC,IAOnBpB,EAAMhP,UAAUmQ,IAAM,SAASC,GAO7B,OANAA,EAAMA,EACHtJ,QAAQ,WAAY,MACpBA,QAAQ,MAAO,QACfA,QAAQ,UAAW,KACnBA,QAAQ,UAAW,MAEfxG,KAAK+P,MAAMD,GAAK,IAOzBpB,EAAMhP,UAAUqQ,MAAQ,SAASD,EAAKE,GAEpC,IAAItE,EACAuE,EACAC,EACAC,EACAC,EACAzI,EACA0I,EACAC,EACAtR,EACAuR,EACAzS,EACA4E,EACA3E,EACAyS,EACAC,EACAC,EAEJ,IAlBAZ,EAAMA,EAAItJ,QAAQ,SAAU,IAkBrBsJ,GAYL,IAVII,EAAMlQ,KAAK+O,MAAMnB,QAAQ+C,KAAKb,MAChCA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QACvBuP,EAAI,GAAGvP,OAAS,GAClBX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,WAMRiH,EAAMlQ,KAAK+O,MAAMlB,KAAK8C,KAAKb,GAA/B,CACE,IAAIc,EAAY5Q,KAAK2O,OAAO3O,KAAK2O,OAAOhO,OAAS,GACjDmP,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAEvBiQ,GAAgC,cAAnBA,EAAU3H,KACzB2H,EAAUnC,MAAQ,KAAOyB,EAAI,GAAGW,aAEhCX,EAAMA,EAAI,GAAG1J,QAAQ,UAAW,IAChCxG,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,OACN6H,eAAgB,WAChBrC,KAAOzO,KAAKG,QAAQ8O,SAEhBiB,EADAa,EAAMb,EAAK,cAQrB,GAAIA,EAAMlQ,KAAK+O,MAAMjB,OAAO6C,KAAKb,GAC/BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,OACN+H,KAAMd,EAAI,GAAKA,EAAI,GAAG5D,OAAS4D,EAAI,GACnCzB,KAAMyB,EAAI,IAAM,UAMpB,GAAIA,EAAMlQ,KAAK+O,MAAMf,QAAQ2C,KAAKb,GAChCA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,UACNgI,MAAOf,EAAI,GAAGvP,OACd8N,KAAMyB,EAAI,UAMd,IAAIA,EAAMlQ,KAAK+O,MAAMX,QAAQuC,KAAKb,MAChCnI,EAAO,CACLsB,KAAM,QACNiI,OAAQC,EAAWjB,EAAI,GAAG1J,QAAQ,eAAgB,KAClD4K,MAAOlB,EAAI,GAAG1J,QAAQ,aAAc,IAAI6F,MAAM,UAC9CgF,MAAOnB,EAAI,GAAKA,EAAI,GAAG1J,QAAQ,MAAO,IAAI6F,MAAM,MAAQ,KAGjD6E,OAAOvQ,SAAWgH,EAAKyJ,MAAMzQ,OARxC,CAWI,IAFAmP,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAEtB7C,EAAI,EAAGA,EAAI6J,EAAKyJ,MAAMzQ,OAAQ7C,IAC7B,YAAYwT,KAAK3J,EAAKyJ,MAAMtT,IAC9B6J,EAAKyJ,MAAMtT,GAAK,QACP,aAAawT,KAAK3J,EAAKyJ,MAAMtT,IACtC6J,EAAKyJ,MAAMtT,GAAK,SACP,YAAYwT,KAAK3J,EAAKyJ,MAAMtT,IACrC6J,EAAKyJ,MAAMtT,GAAK,OAEhB6J,EAAKyJ,MAAMtT,GAAK,KAIpB,IAAKA,EAAI,EAAGA,EAAI6J,EAAK0J,MAAM1Q,OAAQ7C,IACjC6J,EAAK0J,MAAMvT,GAAKqT,EAAWxJ,EAAK0J,MAAMvT,GAAI6J,EAAKuJ,OAAOvQ,QAGxDX,KAAK2O,OAAOvO,KAAKuH,QAOrB,GAAIuI,EAAMlQ,KAAK+O,MAAMhB,GAAG4C,KAAKb,GAC3BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,YAMV,GAAIiH,EAAMlQ,KAAK+O,MAAMd,WAAW0C,KAAKb,GACnCA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAE3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,qBAGRiH,EAAMA,EAAI,GAAG1J,QAAQ,WAAY,IAKjCxG,KAAK+P,MAAMG,EAAKF,GAEhBhQ,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,wBAOV,GAAIiH,EAAMlQ,KAAK+O,MAAMb,KAAKyC,KAAKb,GAA/B,CAsBE,IArBAA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAI3B0P,EAAY,CACVpH,KAAM,aACNsI,QAJFf,GADAL,EAAOD,EAAI,IACMvP,OAAS,EAKxBwM,MAAOqD,GAAaL,EAAO,GAC3BF,OAAO,GAGTjQ,KAAK2O,OAAOvO,KAAKiQ,GAKjBC,EAAY,GACZ5E,GAAO,EACP3N,GAJAmS,EAAMA,EAAI,GAAGzJ,MAAMzG,KAAK+O,MAAMpH,OAItBhH,OACR7C,EAAI,EAEGA,EAAIC,EAAGD,IAKZyS,GAJA5I,EAAOuI,EAAIpS,IAIE6C,SACbgH,EAAOA,EAAKnB,QAAQ,qBAAsB,KAIhClB,QAAQ,SAChBiL,GAAS5I,EAAKhH,OACdgH,EAAQ3H,KAAKG,QAAQ8O,SAEjBtH,EAAKnB,QAAQ,YAAa,IAD1BmB,EAAKnB,QAAQ,IAAIgL,OAAO,QAAUjB,EAAQ,IAAK,MAAO,KAMxDzS,IAAMC,EAAI,IACZqS,EAAIzC,EAAM4B,OAAOoB,KAAKT,EAAIpS,EAAI,IAAI,IAC9BqS,EAAKxP,OAAS,EAAiB,IAAbyP,EAAEzP,OACnByP,EAAEzP,OAAS,GAAMX,KAAKG,QAAQsR,YAAcrB,IAAMD,KACrDL,EAAMI,EAAIwB,MAAM5T,EAAI,GAAG6T,KAAK,MAAQ7B,EACpChS,EAAIC,EAAI,IAOZkS,EAAQvE,GAAQ,eAAe4F,KAAK3J,GAChC7J,IAAMC,EAAI,IACZ2N,EAAwC,OAAjC/D,EAAKiK,OAAOjK,EAAKhH,OAAS,GAC5BsP,IAAOA,EAAQvE,IAGlBuE,IACFI,EAAUJ,OAAQ,GAKpBS,OAAYmB,GADZpB,EAAS,cAAca,KAAK3J,MAG1B+I,EAAwB,MAAZ/I,EAAK,GACjBA,EAAOA,EAAKnB,QAAQ,eAAgB,KAGtCxH,EAAI,CACFiK,KAAM,kBACN6I,KAAMrB,EACNvH,QAASwH,EACTT,MAAOA,GAGTK,EAAUlQ,KAAKpB,GACfgB,KAAK2O,OAAOvO,KAAKpB,GAGjBgB,KAAK+P,MAAMpI,GAAM,GAEjB3H,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,kBAIV,GAAIoH,EAAUJ,MAGZ,IAFAlS,EAAIuS,EAAU3P,OACd7C,EAAI,EACGA,EAAIC,EAAGD,IACZwS,EAAUxS,GAAGmS,OAAQ,EAIzBjQ,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,kBAOV,GAAIiH,EAAMlQ,KAAK+O,MAAMhF,KAAK4G,KAAKb,GAC7BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAMjJ,KAAKG,QAAQ4R,SACf,YACA,OACJC,KAAMhS,KAAKG,QAAQ8R,YACF,QAAX/B,EAAI,IAA2B,WAAXA,EAAI,IAA8B,UAAXA,EAAI,IACrDzB,KAAMzO,KAAKG,QAAQ4R,SAAY/R,KAAKG,QAAQ8R,UAAYjS,KAAKG,QAAQ8R,UAAU/B,EAAI,IAAMgC,EAAOhC,EAAI,IAAOA,EAAI,UAMnH,GAAIF,IAAQE,EAAMlQ,KAAK+O,MAAMZ,IAAIwC,KAAKb,IACpCA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QACvBuP,EAAI,KAAIA,EAAI,GAAKA,EAAI,GAAGxK,UAAU,EAAGwK,EAAI,GAAGvP,OAAS,IACzD+B,EAAMwN,EAAI,GAAGiC,cAAc3L,QAAQ,OAAQ,KACtCxG,KAAK2O,OAAOC,MAAMlM,KACrB1C,KAAK2O,OAAOC,MAAMlM,GAAO,CACvB0P,KAAMlC,EAAI,GACVmC,MAAOnC,EAAI,UAOjB,IAAIA,EAAMlQ,KAAK+O,MAAMT,MAAMqC,KAAKb,MAC9BnI,EAAO,CACLsB,KAAM,QACNiI,OAAQC,EAAWjB,EAAI,GAAG1J,QAAQ,eAAgB,KAClD4K,MAAOlB,EAAI,GAAG1J,QAAQ,aAAc,IAAI6F,MAAM,UAC9CgF,MAAOnB,EAAI,GAAKA,EAAI,GAAG1J,QAAQ,MAAO,IAAI6F,MAAM,MAAQ,KAGjD6E,OAAOvQ,SAAWgH,EAAKyJ,MAAMzQ,OARxC,CAWI,IAFAmP,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAEtB7C,EAAI,EAAGA,EAAI6J,EAAKyJ,MAAMzQ,OAAQ7C,IAC7B,YAAYwT,KAAK3J,EAAKyJ,MAAMtT,IAC9B6J,EAAKyJ,MAAMtT,GAAK,QACP,aAAawT,KAAK3J,EAAKyJ,MAAMtT,IACtC6J,EAAKyJ,MAAMtT,GAAK,SACP,YAAYwT,KAAK3J,EAAKyJ,MAAMtT,IACrC6J,EAAKyJ,MAAMtT,GAAK,OAEhB6J,EAAKyJ,MAAMtT,GAAK,KAIpB,IAAKA,EAAI,EAAGA,EAAI6J,EAAK0J,MAAM1Q,OAAQ7C,IACjC6J,EAAK0J,MAAMvT,GAAKqT,EACdxJ,EAAK0J,MAAMvT,GAAG0I,QAAQ,mBAAoB,IAC1CmB,EAAKuJ,OAAOvQ,QAGhBX,KAAK2O,OAAOvO,KAAKuH,QAOrB,GAAIuI,EAAMlQ,KAAK+O,MAAMR,SAASoC,KAAKb,GACjCA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,UACNgI,MAA4B,MAArBf,EAAI,GAAG0B,OAAO,GAAa,EAAI,EACtCnD,KAAMyB,EAAI,UAMd,GAAIF,IAAQE,EAAMlQ,KAAK+O,MAAMY,UAAUgB,KAAKb,IAC1CA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,YACNwF,KAA2C,OAArCyB,EAAI,GAAG0B,OAAO1B,EAAI,GAAGvP,OAAS,GAChCuP,EAAI,GAAGwB,MAAM,GAAI,GACjBxB,EAAI,UAMZ,GAAIA,EAAMlQ,KAAK+O,MAAMN,KAAKkC,KAAKb,GAE7BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAK2O,OAAOvO,KAAK,CACf6I,KAAM,OACNwF,KAAMyB,EAAI,UAKd,GAAIJ,EACF,MAAM,IAAI9C,MAAM,0BAA4B8C,EAAIwC,WAAW,IAI/D,OAAOtS,KAAK2O,QAOd,IAAI4D,EAAS,CACXL,OAAQ,8CACRM,SAAU,sCACV3F,IAAKwB,EACL3L,IAAK,2JAML+P,KAAM,gDACNC,QAAS,wDACTC,OAAQ,gEACRC,OAAQ,gHACRC,GAAI,oOACJhF,KAAM,sCACNiF,GAAI,wBACJC,IAAK1E,EACLI,KAAM,8EA2FR,SAASuE,EAAYpE,EAAOzO,GAO1B,GANAH,KAAKG,QAAUA,GAAW0O,EAAOC,SACjC9O,KAAK4O,MAAQA,EACb5O,KAAK+O,MAAQwD,EAAOvD,OACpBhP,KAAKiT,SAAWjT,KAAKG,QAAQ8S,UAAY,IAAIC,EAC7ClT,KAAKiT,SAAS9S,QAAUH,KAAKG,SAExBH,KAAK4O,MACR,MAAM,IAAI5B,MAAM,6CAGdhN,KAAKG,QAAQ8O,SACfjP,KAAK+O,MAAQwD,EAAOtD,SACXjP,KAAKG,QAAQ+O,MAClBlP,KAAKG,QAAQgT,OACfnT,KAAK+O,MAAQwD,EAAOY,OAEpBnT,KAAK+O,MAAQwD,EAAOrD,KA8Q1B,SAASgE,EAAS/S,GAChBH,KAAKG,QAAUA,GAAW0O,EAAOC,SA8JnC,SAASsE,KAyBT,SAASC,EAAOlT,GACdH,KAAK2O,OAAS,GACd3O,KAAK+P,MAAQ,KACb/P,KAAKG,QAAUA,GAAW0O,EAAOC,SACjC9O,KAAKG,QAAQ8S,SAAWjT,KAAKG,QAAQ8S,UAAY,IAAIC,EACrDlT,KAAKiT,SAAWjT,KAAKG,QAAQ8S,SAC7BjT,KAAKiT,SAAS9S,QAAUH,KAAKG,QAC7BH,KAAKsT,QAAU,IAAIC,EAuLrB,SAASA,IACPvT,KAAKwT,KAAO,GA8Bd,SAAStB,EAAOnI,EAAM0J,GACpB,GAAIA,GACF,GAAIvB,EAAOwB,WAAWpC,KAAKvH,GACzB,OAAOA,EAAKvD,QAAQ0L,EAAOyB,eAAe,SAAS/R,GAAM,OAAOsQ,EAAO0B,aAAahS,WAGtF,GAAIsQ,EAAO2B,mBAAmBvC,KAAKvH,GACjC,OAAOA,EAAKvD,QAAQ0L,EAAO4B,uBAAuB,SAASlS,GAAM,OAAOsQ,EAAO0B,aAAahS,MAIhG,OAAOmI,EAgBT,SAASgK,EAAShK,GAEhB,OAAOA,EAAKvD,QAAQ,8CAA8C,SAASuG,EAAGxN,GAE5E,MAAU,WADVA,EAAIA,EAAE4S,eACoB,IACN,MAAhB5S,EAAEqS,OAAO,GACY,MAAhBrS,EAAEqS,OAAO,GACZoC,OAAOC,aAAaC,SAAS3U,EAAEmG,UAAU,GAAI,KAC7CsO,OAAOC,cAAc1U,EAAEmG,UAAU,IAEhC,MAIX,SAAS2J,EAAK8E,EAAOC,GAGnB,OAFAD,EAAQA,EAAM3E,QAAU2E,EACxBC,EAAMA,GAAO,GACN,CACL5N,QAAS,SAASnI,EAAMgW,GAItB,OAFAA,GADAA,EAAMA,EAAI7E,QAAU6E,GACV7N,QAAQ,eAAgB,MAClC2N,EAAQA,EAAM3N,QAAQnI,EAAMgW,GACrBrU,MAETsP,SAAU,WACR,OAAO,IAAIkC,OAAO2C,EAAOC,KAK/B,SAASE,EAASvC,EAAUwC,EAAMnC,GAChC,GAAIL,EAAU,CACZ,IACE,IAAIyC,EAAOC,mBAAmBV,EAAS3B,IACpC5L,QAAQ,UAAW,IACnB2L,cACH,MAAOpJ,GACP,OAAO,KAET,GAAoC,IAAhCyL,EAAKlP,QAAQ,gBAAsD,IAA9BkP,EAAKlP,QAAQ,cAAgD,IAA1BkP,EAAKlP,QAAQ,SACvF,OAAO,KAGPiP,IAASG,EAAqBpD,KAAKc,KACrCA,EAUJ,SAAoBmC,EAAMnC,GACnBuC,EAAS,IAAMJ,KAId,mBAAmBjD,KAAKiD,GAC1BI,EAAS,IAAMJ,GAAQA,EAAO,IAE9BI,EAAS,IAAMJ,GAAQxD,EAAMwD,EAAM,KAAK,IAK5C,OAFAA,EAAOI,EAAS,IAAMJ,GAEG,OAArBnC,EAAKV,MAAM,EAAG,GACT6C,EAAK/N,QAAQ,WAAY,KAAO4L,EACX,MAAnBA,EAAKR,OAAO,GACd2C,EAAK/N,QAAQ,qBAAsB,MAAQ4L,EAE3CmC,EAAOnC,EA5BPwC,CAAWL,EAAMnC,IAE1B,IACEA,EAAOyC,UAAUzC,GAAM5L,QAAQ,OAAQ,KACvC,MAAOuC,GACP,OAAO,KAET,OAAOqJ,EAx1BTG,EAAOuC,aAAe,qCACtBvC,EAAOM,GAAKxD,EAAKkD,EAAOM,IAAIrM,QAAQ,eAAgB+L,EAAOuC,cAAcxF,WAEzEiD,EAAOwC,SAAW,8CAElBxC,EAAOyC,QAAU,+BACjBzC,EAAO0C,OAAS,+IAChB1C,EAAOC,SAAWnD,EAAKkD,EAAOC,UAC3BhM,QAAQ,SAAU+L,EAAOyC,SACzBxO,QAAQ,QAAS+L,EAAO0C,QACxB3F,WAEHiD,EAAO2C,WAAa,8EAEpB3C,EAAO7P,IAAM2M,EAAKkD,EAAO7P,KACtB8D,QAAQ,UAAWmH,EAAM+B,UACzBlJ,QAAQ,YAAa+L,EAAO2C,YAC5B5F,WAEHiD,EAAOpD,OAAS,4CAChBoD,EAAO4C,MAAQ,2CACf5C,EAAOnD,OAAS,8DAEhBmD,EAAOE,KAAOpD,EAAKkD,EAAOE,MACvBjM,QAAQ,QAAS+L,EAAOpD,QACxB3I,QAAQ,OAAQ+L,EAAO4C,OACvB3O,QAAQ,QAAS+L,EAAOnD,QACxBE,WAEHiD,EAAOG,QAAUrD,EAAKkD,EAAOG,SAC1BlM,QAAQ,QAAS+L,EAAOpD,QACxBG,WAMHiD,EAAOvD,OAASY,EAAM,GAAI2C,GAM1BA,EAAOtD,SAAWW,EAAM,GAAI2C,EAAOvD,OAAQ,CACzC4D,OAAQ,iEACRC,GAAI,2DACJJ,KAAMpD,EAAK,2BACR7I,QAAQ,QAAS+L,EAAOpD,QACxBG,WACHoD,QAASrD,EAAK,iCACX7I,QAAQ,QAAS+L,EAAOpD,QACxBG,aAOLiD,EAAOrD,IAAMU,EAAM,GAAI2C,EAAOvD,OAAQ,CACpCkD,OAAQ7C,EAAKkD,EAAOL,QAAQ1L,QAAQ,KAAM,QAAQ8I,WAClD8F,gBAAiB,4EACjBvI,IAAK,mEACLwI,WAAY,yEACZtC,IAAK,0BACLtE,KAAM,sNAGR8D,EAAOrD,IAAIrC,IAAMwC,EAAKkD,EAAOrD,IAAIrC,IAAK,KACnCrG,QAAQ,QAAS+L,EAAOrD,IAAIkG,iBAC5B9F,WAKHiD,EAAOY,OAASvD,EAAM,GAAI2C,EAAOrD,IAAK,CACpC4D,GAAIzD,EAAKkD,EAAOO,IAAItM,QAAQ,OAAQ,KAAK8I,WACzCb,KAAMY,EAAKkD,EAAOrD,IAAIT,MACnBjI,QAAQ,OAAQ,iBAChBA,QAAQ,UAAW,KACnB8I,aAiCL0D,EAAYjE,MAAQwD,EAMpBS,EAAYsC,OAAS,SAASxF,EAAKlB,EAAOzO,GAExC,OADa,IAAI6S,EAAYpE,EAAOzO,GACtBmV,OAAOxF,IAOvBkD,EAAYtT,UAAU4V,OAAS,SAASxF,GAStC,IARA,IACI2C,EACAhE,EACA2D,EACAC,EACAnC,EACAqF,EANAC,EAAM,GAQH1F,GAEL,GAAII,EAAMlQ,KAAK+O,MAAMmD,OAAOvB,KAAKb,GAC/BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOtD,EAAOhC,EAAI,SAKpB,GAAIA,EAAMlQ,KAAK+O,MAAMrM,IAAIiO,KAAKb,IACvB9P,KAAKyV,QAAU,QAAQnE,KAAKpB,EAAI,IACnClQ,KAAKyV,QAAS,EACLzV,KAAKyV,QAAU,UAAUnE,KAAKpB,EAAI,MAC3ClQ,KAAKyV,QAAS,IAEXzV,KAAK0V,YAAc,iCAAiCpE,KAAKpB,EAAI,IAChElQ,KAAK0V,YAAa,EACT1V,KAAK0V,YAAc,mCAAmCpE,KAAKpB,EAAI,MACxElQ,KAAK0V,YAAa,GAGpB5F,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKG,QAAQ4R,SAChB/R,KAAKG,QAAQ8R,UACXjS,KAAKG,QAAQ8R,UAAU/B,EAAI,IAC3BgC,EAAOhC,EAAI,IACbA,EAAI,QAKV,GAAIA,EAAMlQ,KAAK+O,MAAM0D,KAAK9B,KAAKb,GAA/B,CACE,IAAI6F,EAAiBC,EAAmB1F,EAAI,GAAI,MAChD,GAAIyF,GAAkB,EAAG,CACvB,IAAIE,EAAU,EAAI3F,EAAI,GAAGvP,OAASgV,EAClCzF,EAAI,GAAKA,EAAI,GAAGxK,UAAU,EAAGiQ,GAC7BzF,EAAI,GAAKA,EAAI,GAAGxK,UAAU,EAAGmQ,GAASvJ,OACtC4D,EAAI,GAAK,GAEXJ,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3BX,KAAKyV,QAAS,EACdrD,EAAOlC,EAAI,GACPlQ,KAAKG,QAAQ8O,UACfwD,EAAO,gCAAgC9B,KAAKyB,KAG1CA,EAAOK,EAAK,GACZJ,EAAQI,EAAK,IAEbJ,EAAQ,GAGVA,EAAQnC,EAAI,GAAKA,EAAI,GAAGwB,MAAM,GAAI,GAAK,GAEzCU,EAAOA,EAAK9F,OAAO9F,QAAQ,gBAAiB,MAC5CgP,GAAOxV,KAAK8V,WAAW5F,EAAK,CAC1BkC,KAAMY,EAAY+C,QAAQ3D,GAC1BC,MAAOW,EAAY+C,QAAQ1D,KAE7BrS,KAAKyV,QAAS,OAKhB,IAAKvF,EAAMlQ,KAAK+O,MAAM2D,QAAQ/B,KAAKb,MAC3BI,EAAMlQ,KAAK+O,MAAM4D,OAAOhC,KAAKb,IADrC,CAKE,GAHAA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B8R,GAAQvC,EAAI,IAAMA,EAAI,IAAI1J,QAAQ,OAAQ,OAC1CiM,EAAOzS,KAAK4O,MAAM6D,EAAKN,kBACTM,EAAKL,KAAM,CACvBoD,GAAOtF,EAAI,GAAG0B,OAAO,GACrB9B,EAAMI,EAAI,GAAGxK,UAAU,GAAKoK,EAC5B,SAEF9P,KAAKyV,QAAS,EACdD,GAAOxV,KAAK8V,WAAW5F,EAAKuC,GAC5BzS,KAAKyV,QAAS,OAKhB,GAAIvF,EAAMlQ,KAAK+O,MAAM6D,OAAOjC,KAAKb,GAC/BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKiT,SAASL,OAAO5S,KAAKsV,OAAOpF,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,UAK5E,GAAIA,EAAMlQ,KAAK+O,MAAM8D,GAAGlC,KAAKb,GAC3BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKiT,SAASJ,GAAG7S,KAAKsV,OAAOpF,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAMA,EAAI,UAK5F,GAAIA,EAAMlQ,KAAK+O,MAAMlB,KAAK8C,KAAKb,GAC7BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKiT,SAAS+C,SAAS9D,EAAOhC,EAAI,GAAG5D,QAAQ,SAKtD,GAAI4D,EAAMlQ,KAAK+O,MAAM+D,GAAGnC,KAAKb,GAC3BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKiT,SAASH,UAKvB,GAAI5C,EAAMlQ,KAAK+O,MAAMgE,IAAIpC,KAAKb,GAC5BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKiT,SAASF,IAAI/S,KAAKsV,OAAOpF,EAAI,UAK3C,GAAIA,EAAMlQ,KAAK+O,MAAMyD,SAAS7B,KAAKb,GACjCA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAGzByR,EAFa,MAAXlC,EAAI,GAEC,WADPzB,EAAOyD,EAAOlS,KAAKiW,OAAO/F,EAAI,MAG9BzB,EAAOyD,EAAOhC,EAAI,IAGpBsF,GAAOxV,KAAKiT,SAASR,KAAKL,EAAM,KAAM3D,QAKxC,GAAKzO,KAAKyV,UAAWvF,EAAMlQ,KAAK+O,MAAMlC,IAAI8D,KAAKb,KAuB/C,GAAII,EAAMlQ,KAAK+O,MAAMN,KAAKkC,KAAKb,GAC7BA,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QACvBX,KAAK0V,WACPF,GAAOxV,KAAKiT,SAASxE,KAAKzO,KAAKG,QAAQ4R,SAAY/R,KAAKG,QAAQ8R,UAAYjS,KAAKG,QAAQ8R,UAAU/B,EAAI,IAAMgC,EAAOhC,EAAI,IAAOA,EAAI,IAEnIsF,GAAOxV,KAAKiT,SAASxE,KAAKyD,EAAOlS,KAAKkW,YAAYhG,EAAI,WAK1D,GAAIJ,EACF,MAAM,IAAI9C,MAAM,0BAA4B8C,EAAIwC,WAAW,QAlC7D,CACE,GAAe,MAAXpC,EAAI,GAENkC,EAAO,WADP3D,EAAOyD,EAAOhC,EAAI,SAEb,CAEL,GACEqF,EAAcrF,EAAI,GAClBA,EAAI,GAAKlQ,KAAK+O,MAAMsG,WAAW1E,KAAKT,EAAI,IAAI,SACrCqF,IAAgBrF,EAAI,IAC7BzB,EAAOyD,EAAOhC,EAAI,IAEhBkC,EADa,SAAXlC,EAAI,GACC,UAAYzB,EAEZA,EAGXqB,EAAMA,EAAIpK,UAAUwK,EAAI,GAAGvP,QAC3B6U,GAAOxV,KAAKiT,SAASR,KAAKL,EAAM,KAAM3D,GAoB1C,OAAO+G,GAGTxC,EAAY+C,QAAU,SAAStH,GAC7B,OAAOA,EAAOA,EAAKjI,QAAQwM,EAAYjE,MAAMgG,SAAU,MAAQtG,GAOjEuE,EAAYtT,UAAUoW,WAAa,SAAS5F,EAAKuC,GAC/C,IAAIL,EAAOK,EAAKL,KACZC,EAAQI,EAAKJ,MAAQH,EAAOO,EAAKJ,OAAS,KAE9C,MAA4B,MAArBnC,EAAI,GAAG0B,OAAO,GACjB5R,KAAKiT,SAASR,KAAKL,EAAMC,EAAOrS,KAAKsV,OAAOpF,EAAI,KAChDlQ,KAAKiT,SAASkD,MAAM/D,EAAMC,EAAOH,EAAOhC,EAAI,MAOlD8C,EAAYtT,UAAUwW,YAAc,SAASzH,GAC3C,OAAKzO,KAAKG,QAAQ+V,YACXzH,EAEJjI,QAAQ,OAAQ,KAEhBA,QAAQ,MAAO,KAEfA,QAAQ,0BAA2B,OAEnCA,QAAQ,KAAM,KAEdA,QAAQ,+BAAgC,OAExCA,QAAQ,KAAM,KAEdA,QAAQ,SAAU,KAfiBiI,GAsBxCuE,EAAYtT,UAAUuW,OAAS,SAASxH,GACtC,IAAKzO,KAAKG,QAAQ8V,OAAQ,OAAOxH,EAMjC,IALA,IAGI7M,EAHA4T,EAAM,GACNzX,EAAI0Q,EAAK9N,OACT7C,EAAI,EAGDA,EAAIC,EAAGD,IACZ8D,EAAK6M,EAAK6D,WAAWxU,GACjB0G,KAAK4R,SAAW,KAClBxU,EAAK,IAAMA,EAAG6G,SAAS,KAEzB+M,GAAO,KAAO5T,EAAK,IAGrB,OAAO4T,GAWTtC,EAASxT,UAAUmO,KAAO,SAASA,EAAMwI,EAAYC,GACnD,IAAItF,GAAQqF,GAAc,IAAI5P,MAAM,OAAO,GAC3C,GAAIzG,KAAKG,QAAQoW,UAAW,CAC1B,IAAIf,EAAMxV,KAAKG,QAAQoW,UAAU1I,EAAMmD,GAC5B,MAAPwE,GAAeA,IAAQ3H,IACzByI,GAAU,EACVzI,EAAO2H,GAIX,OAAKxE,EAME,qBACHhR,KAAKG,QAAQqW,WACbtE,EAAOlB,GAAM,GACb,MACCsF,EAAUzI,EAAOqE,EAAOrE,GAAM,IAC/B,kBAVK,eACFyI,EAAUzI,EAAOqE,EAAOrE,GAAM,IAC/B,iBAWRqF,EAASxT,UAAUuO,WAAa,SAASwI,GACvC,MAAO,iBAAmBA,EAAQ,mBAGpCvD,EAASxT,UAAUqK,KAAO,SAASA,GACjC,OAAOA,GAGTmJ,EAASxT,UAAUsO,QAAU,SAASS,EAAMiI,EAAOC,EAAKrD,GACtD,OAAItT,KAAKG,QAAQyW,UACR,KACHF,EACA,QACA1W,KAAKG,QAAQ0W,aACbvD,EAAQwD,KAAKH,GACb,KACAlI,EACA,MACAiI,EACA,MAGC,KAAOA,EAAQ,IAAMjI,EAAO,MAAQiI,EAAQ,OAGrDxD,EAASxT,UAAUqO,GAAK,WACtB,OAAO/N,KAAKG,QAAQ4W,MAAQ,UAAY,UAG1C7D,EAASxT,UAAUwO,KAAO,SAAS8I,EAAMzF,EAASpE,GAChD,IAAIlE,EAAOsI,EAAU,KAAO,KAE5B,MAAO,IAAMtI,GADGsI,GAAqB,IAAVpE,EAAgB,WAAaA,EAAQ,IAAO,IACxC,MAAQ6J,EAAO,KAAO/N,EAAO,OAG9DiK,EAASxT,UAAUuX,SAAW,SAASxI,GACrC,MAAO,OAASA,EAAO,WAGzByE,EAASxT,UAAUwX,SAAW,SAAShO,GACrC,MAAO,WACFA,EAAU,cAAgB,IAC3B,+BACClJ,KAAKG,QAAQ4W,MAAQ,KAAO,IAC7B,MAGN7D,EAASxT,UAAUiQ,UAAY,SAASlB,GACtC,MAAO,MAAQA,EAAO,UAGxByE,EAASxT,UAAU4O,MAAQ,SAAS4C,EAAQ8F,GAG1C,OAFIA,IAAMA,EAAO,UAAYA,EAAO,YAE7B,qBAEH9F,EACA,aACA8F,EACA,cAGN9D,EAASxT,UAAUyX,SAAW,SAASC,GACrC,MAAO,SAAWA,EAAU,WAG9BlE,EAASxT,UAAU2X,UAAY,SAASD,EAASE,GAC/C,IAAIrO,EAAOqO,EAAMpG,OAAS,KAAO,KAIjC,OAHUoG,EAAMlG,MACZ,IAAMnI,EAAO,WAAaqO,EAAMlG,MAAQ,KACxC,IAAMnI,EAAO,KACJmO,EAAU,KAAOnO,EAAO,OAIvCiK,EAASxT,UAAUkT,OAAS,SAASnE,GACnC,MAAO,WAAaA,EAAO,aAG7ByE,EAASxT,UAAUmT,GAAK,SAASpE,GAC/B,MAAO,OAASA,EAAO,SAGzByE,EAASxT,UAAUsW,SAAW,SAASvH,GACrC,MAAO,SAAWA,EAAO,WAG3ByE,EAASxT,UAAUoT,GAAK,WACtB,OAAO9S,KAAKG,QAAQ4W,MAAQ,QAAU,QAGxC7D,EAASxT,UAAUqT,IAAM,SAAStE,GAChC,MAAO,QAAUA,EAAO,UAG1ByE,EAASxT,UAAU+S,KAAO,SAASL,EAAMC,EAAO5D,GAE9C,GAAa,QADb2D,EAAOkC,EAAStU,KAAKG,QAAQ4R,SAAU/R,KAAKG,QAAQoX,QAASnF,IAE3D,OAAO3D,EAET,IAAI+G,EAAM,YAActD,EAAOE,GAAQ,IAKvC,OAJIC,IACFmD,GAAO,WAAanD,EAAQ,KAE9BmD,GAAO,IAAM/G,EAAO,QAItByE,EAASxT,UAAUyW,MAAQ,SAAS/D,EAAMC,EAAO5D,GAE/C,GAAa,QADb2D,EAAOkC,EAAStU,KAAKG,QAAQ4R,SAAU/R,KAAKG,QAAQoX,QAASnF,IAE3D,OAAO3D,EAGT,IAAI+G,EAAM,aAAepD,EAAO,UAAY3D,EAAO,IAKnD,OAJI4D,IACFmD,GAAO,WAAanD,EAAQ,KAE9BmD,GAAOxV,KAAKG,QAAQ4W,MAAQ,KAAO,KAIrC7D,EAASxT,UAAU+O,KAAO,SAASA,GACjC,OAAOA,GAYT2E,EAAa1T,UAAUkT,OACvBQ,EAAa1T,UAAUmT,GACvBO,EAAa1T,UAAUsW,SACvB5C,EAAa1T,UAAUqT,IACvBK,EAAa1T,UAAU+O,KAAO,SAASA,GACrC,OAAOA,GAGT2E,EAAa1T,UAAU+S,KACvBW,EAAa1T,UAAUyW,MAAQ,SAAS/D,EAAMC,EAAO5D,GACnD,MAAO,GAAKA,GAGd2E,EAAa1T,UAAUoT,GAAK,WAC1B,MAAO,IAqBTO,EAAOmE,MAAQ,SAAS1H,EAAK3P,GAE3B,OADa,IAAIkT,EAAOlT,GACVqX,MAAM1H,IAOtBuD,EAAO3T,UAAU8X,MAAQ,SAAS1H,GAChC9P,KAAKuS,OAAS,IAAIS,EAAYlD,EAAIlB,MAAO5O,KAAKG,SAE9CH,KAAKyX,WAAa,IAAIzE,EACpBlD,EAAIlB,MACJgB,EAAM,GAAI5P,KAAKG,QAAS,CAAE8S,SAAU,IAAIG,KAE1CpT,KAAK2O,OAASmB,EAAI4H,UAGlB,IADA,IAAIlC,EAAM,GACHxV,KAAK0L,QACV8J,GAAOxV,KAAK2X,MAGd,OAAOnC,GAOTnC,EAAO3T,UAAUgM,KAAO,WAEtB,OADA1L,KAAK+P,MAAQ/P,KAAK2O,OAAOiJ,MAClB5X,KAAK+P,OAOdsD,EAAO3T,UAAUmY,KAAO,WACtB,OAAO7X,KAAK2O,OAAO3O,KAAK2O,OAAOhO,OAAS,IAAM,GAOhD0S,EAAO3T,UAAUoY,UAAY,WAG3B,IAFA,IAAId,EAAOhX,KAAK+P,MAAMtB,KAEM,SAArBzO,KAAK6X,OAAO5O,MACjB+N,GAAQ,KAAOhX,KAAK0L,OAAO+C,KAG7B,OAAOzO,KAAKuS,OAAO+C,OAAO0B,IAO5B3D,EAAO3T,UAAUiY,IAAM,WACrB,OAAQ3X,KAAK+P,MAAM9G,MACjB,IAAK,QACH,MAAO,GAET,IAAK,KACH,OAAOjJ,KAAKiT,SAASlF,KAEvB,IAAK,UACH,OAAO/N,KAAKiT,SAASjF,QACnBhO,KAAKuS,OAAO+C,OAAOtV,KAAK+P,MAAMtB,MAC9BzO,KAAK+P,MAAMkB,MACX8C,EAAS/T,KAAKyX,WAAWnC,OAAOtV,KAAK+P,MAAMtB,OAC3CzO,KAAKsT,SAET,IAAK,OACH,OAAOtT,KAAKiT,SAASpF,KAAK7N,KAAK+P,MAAMtB,KACnCzO,KAAK+P,MAAMiB,KACXhR,KAAK+P,MAAMuG,SAEf,IAAK,QACH,IAEIxY,EACAia,EACAC,EACAC,EALA/G,EAAS,GACT8F,EAAO,GAQX,IADAgB,EAAO,GACFla,EAAI,EAAGA,EAAIkC,KAAK+P,MAAMmB,OAAOvQ,OAAQ7C,IACxCka,GAAQhY,KAAKiT,SAASoE,UACpBrX,KAAKuS,OAAO+C,OAAOtV,KAAK+P,MAAMmB,OAAOpT,IACrC,CAAEoT,QAAQ,EAAME,MAAOpR,KAAK+P,MAAMqB,MAAMtT,KAK5C,IAFAoT,GAAUlR,KAAKiT,SAASkE,SAASa,GAE5Bla,EAAI,EAAGA,EAAIkC,KAAK+P,MAAMsB,MAAM1Q,OAAQ7C,IAAK,CAI5C,IAHAia,EAAM/X,KAAK+P,MAAMsB,MAAMvT,GAEvBka,EAAO,GACFC,EAAI,EAAGA,EAAIF,EAAIpX,OAAQsX,IAC1BD,GAAQhY,KAAKiT,SAASoE,UACpBrX,KAAKuS,OAAO+C,OAAOyC,EAAIE,IACvB,CAAE/G,QAAQ,EAAOE,MAAOpR,KAAK+P,MAAMqB,MAAM6G,KAI7CjB,GAAQhX,KAAKiT,SAASkE,SAASa,GAEjC,OAAOhY,KAAKiT,SAAS3E,MAAM4C,EAAQ8F,GAErC,IAAK,mBAGH,IAFAA,EAAO,GAEqB,mBAArBhX,KAAK0L,OAAOzC,MACjB+N,GAAQhX,KAAK2X,MAGf,OAAO3X,KAAKiT,SAAShF,WAAW+I,GAElC,IAAK,aACHA,EAAO,GAIP,IAHA,IAAIzF,EAAUvR,KAAK+P,MAAMwB,QACrBpE,EAAQnN,KAAK+P,MAAM5C,MAEK,aAArBnN,KAAK0L,OAAOzC,MACjB+N,GAAQhX,KAAK2X,MAGf,OAAO3X,KAAKiT,SAAS/E,KAAK8I,EAAMzF,EAASpE,GAE3C,IAAK,kBACH6J,EAAO,GACP,IAAI/G,EAAQjQ,KAAK+P,MAAME,MACnB/G,EAAUlJ,KAAK+P,MAAM7G,QACrB4I,EAAO9R,KAAK+P,MAAM+B,KAMtB,IAJI9R,KAAK+P,MAAM+B,OACbkF,GAAQhX,KAAKiT,SAASiE,SAAShO,IAGL,kBAArBlJ,KAAK0L,OAAOzC,MACjB+N,GAAS/G,GAA6B,SAApBjQ,KAAK+P,MAAM9G,KAEzBjJ,KAAK2X,MADL3X,KAAK8X,YAGX,OAAO9X,KAAKiT,SAASgE,SAASD,EAAMlF,EAAM5I,GAE5C,IAAK,OAEH,OAAOlJ,KAAKiT,SAASlJ,KAAK/J,KAAK+P,MAAMtB,MAEvC,IAAK,YACH,OAAOzO,KAAKiT,SAAStD,UAAU3P,KAAKuS,OAAO+C,OAAOtV,KAAK+P,MAAMtB,OAE/D,IAAK,OACH,OAAOzO,KAAKiT,SAAStD,UAAU3P,KAAK8X,aAEtC,QACE,IAAII,EAAS,eAAiBlY,KAAK+P,MAAM9G,KAAO,wBAChD,IAAIjJ,KAAKG,QAAQgY,OAGf,MAAM,IAAInL,MAAMkL,GAFhBzX,QAAQ2X,IAAIF,KAoBpB3E,EAAQ7T,UAAUoX,KAAO,SAAS/X,GAChC,IAAI+X,EAAO/X,EACRoT,cACA7F,OACA9F,QAAQ,gEAAiE,IACzEA,QAAQ,MAAO,KAElB,GAAIxG,KAAKwT,KAAK7T,eAAemX,GAAO,CAClC,IAAIuB,EAAevB,EACnB,GACE9W,KAAKwT,KAAK6E,KACVvB,EAAOuB,EAAe,IAAMrY,KAAKwT,KAAK6E,SAC/BrY,KAAKwT,KAAK7T,eAAemX,IAIpC,OAFA9W,KAAKwT,KAAKsD,GAAQ,EAEXA,GAqBT5E,EAAOwB,WAAa,UACpBxB,EAAOyB,cAAgB,WACvBzB,EAAO0B,aAAe,CACpB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,SAGP1B,EAAO2B,mBAAqB,qBAC5B3B,EAAO4B,sBAAwB,sBA6E/B,IAAIa,EAAW,GACXD,EAAuB,gCAE3B,SAASrG,KAGT,SAASuB,EAAM0I,GAKb,IAJA,IACIjQ,EACAhJ,EAFAvB,EAAI,EAIDA,EAAIya,UAAU5X,OAAQ7C,IAE3B,IAAKuB,KADLgJ,EAASkQ,UAAUza,GAEbU,OAAOkB,UAAUC,eAAe1B,KAAKoK,EAAQhJ,KAC/CiZ,EAAIjZ,GAAOgJ,EAAOhJ,IAKxB,OAAOiZ,EAGT,SAASnH,EAAWqH,EAAUC,GAG5B,IAaIpH,EAbMmH,EAAShS,QAAQ,OAAO,SAASC,EAAOiS,EAAQC,GAGpD,IAFA,IAAIrC,GAAU,EACVsC,EAAOF,IACFE,GAAQ,GAAmB,OAAdD,EAAIC,IAAgBtC,GAAWA,EACrD,OAAIA,EAGK,IAGA,QAGCjK,MAAM,OAClBvO,EAAI,EAER,GAAIuT,EAAM1Q,OAAS8X,EACjBpH,EAAMwH,OAAOJ,QAEb,KAAOpH,EAAM1Q,OAAS8X,GAAOpH,EAAMjR,KAAK,IAG1C,KAAOtC,EAAIuT,EAAM1Q,OAAQ7C,IAEvBuT,EAAMvT,GAAKuT,EAAMvT,GAAGwO,OAAO9F,QAAQ,QAAS,KAE9C,OAAO6K,EAMT,SAASN,EAAM4H,EAAKxa,EAAG2a,GACrB,GAAmB,IAAfH,EAAIhY,OACN,MAAO,GAOT,IAHA,IAAIoY,EAAU,EAGPA,EAAUJ,EAAIhY,QAAQ,CAC3B,IAAIqY,EAAWL,EAAI/G,OAAO+G,EAAIhY,OAASoY,EAAU,GACjD,GAAIC,IAAa7a,GAAM2a,EAEhB,IAAIE,IAAa7a,IAAK2a,EAG3B,MAFAC,SAFAA,IAQJ,OAAOJ,EAAIM,OAAO,EAAGN,EAAIhY,OAASoY,GAGpC,SAASnD,EAAmB+C,EAAKvI,GAC/B,IAA2B,IAAvBuI,EAAIrT,QAAQ8K,EAAE,IAChB,OAAQ,EAGV,IADA,IAAIsG,EAAQ,EACH5Y,EAAI,EAAGA,EAAI6a,EAAIhY,OAAQ7C,IAC9B,GAAe,OAAX6a,EAAI7a,GACNA,SACK,GAAI6a,EAAI7a,KAAOsS,EAAE,GACtBsG,SACK,GAAIiC,EAAI7a,KAAOsS,EAAE,MACtBsG,EACY,EACV,OAAO5Y,EAIb,OAAQ,EAGV,SAASob,EAAyB9E,GAC5BA,GAAOA,EAAIrC,WAAaqC,EAAI+D,QAC9B1X,QAAQ0Y,KAAK,2MAQjB,SAAStK,EAAOiB,EAAKsE,EAAK9I,GAExB,GAAI,MAAOwE,EACT,MAAM,IAAI9C,MAAM,kDAElB,GAAmB,iBAAR8C,EACT,MAAM,IAAI9C,MAAM,wCACZxO,OAAOkB,UAAU+I,SAASxK,KAAK6R,GAAO,qBAG5C,GAAIxE,GAA2B,mBAAR8I,EAAvB,CACO9I,IACHA,EAAW8I,EACXA,EAAM,MAIR8E,EADA9E,EAAMxE,EAAM,GAAIf,EAAOC,SAAUsF,GAAO,KAGxC,IACIzF,EACAyK,EAFA7C,EAAYnC,EAAImC,UAGhBzY,EAAI,EAER,IACE6Q,EAASD,EAAMmB,IAAIC,EAAKsE,GACxB,MAAOrL,GACP,OAAOuC,EAASvC,GAGlBqQ,EAAUzK,EAAOhO,OAEjB,IAAI0Y,EAAO,SAASpO,GAClB,GAAIA,EAEF,OADAmJ,EAAImC,UAAYA,EACTjL,EAASL,GAGlB,IAAIuK,EAEJ,IACEA,EAAMnC,EAAOmE,MAAM7I,EAAQyF,GAC3B,MAAOrL,GACPkC,EAAMlC,EAKR,OAFAqL,EAAImC,UAAYA,EAETtL,EACHK,EAASL,GACTK,EAAS,KAAMkK,IAGrB,IAAKe,GAAaA,EAAU5V,OAAS,EACnC,OAAO0Y,IAKT,UAFOjF,EAAImC,WAEN6C,EAAS,OAAOC,IAErB,KAAOvb,EAAI6Q,EAAOhO,OAAQ7C,KACxB,SAAUiS,GACW,SAAfA,EAAM9G,OACCmQ,GAAWC,IAEf9C,EAAUxG,EAAMtB,KAAMsB,EAAMiB,MAAM,SAAS/F,EAAK4C,GACrD,OAAI5C,EAAYoO,EAAKpO,GACT,MAAR4C,GAAgBA,IAASkC,EAAMtB,OACxB2K,GAAWC,KAEtBtJ,EAAMtB,KAAOZ,EACbkC,EAAMuG,SAAU,SACd8C,GAAWC,SAXjB,CAaG1K,EAAO7Q,SAKd,IAGE,OAFIsW,IAAKA,EAAMxE,EAAM,GAAIf,EAAOC,SAAUsF,IAC1C8E,EAAyB9E,GAClBf,EAAOmE,MAAM9I,EAAMmB,IAAIC,EAAKsE,GAAMA,GACzC,MAAOrL,GAEP,GADAA,EAAEuQ,SAAW,+DACRlF,GAAOvF,EAAOC,UAAUqJ,OAC3B,MAAO,iCACHjG,EAAOnJ,EAAEuQ,QAAU,IAAI,GACvB,SAEN,MAAMvQ,GAtMVsF,EAAKsC,KAAOtC,EA8MZQ,EAAO1O,QACP0O,EAAO0K,WAAa,SAASnF,GAE3B,OADAxE,EAAMf,EAAOC,SAAUsF,GAChBvF,GAGTA,EAAO2K,YAAc,WACnB,MAAO,CACLjC,QAAS,KACTpE,QAAQ,EACRjE,KAAK,EACL0H,WAAW,EACXC,aAAc,GACdN,UAAW,KACXC,WAAY,YACZP,QAAQ,EACRhH,UAAU,EACVgE,SAAU,IAAIC,EACdnB,UAAU,EACVE,UAAW,KACXkG,QAAQ,EACR1G,YAAY,EACZyE,aAAa,EACba,OAAO,IAIXlI,EAAOC,SAAWD,EAAO2K,cAMzB3K,EAAOwE,OAASA,EAChBxE,EAAO4K,OAASpG,EAAOmE,MAEvB3I,EAAOqE,SAAWA,EAClBrE,EAAOuE,aAAeA,EAEtBvE,EAAOH,MAAQA,EACfG,EAAO6K,MAAQhL,EAAMmB,IAErBhB,EAAOmE,YAAcA,EACrBnE,EAAO8K,YAAc3G,EAAYsC,OAEjCzG,EAAO0E,QAAUA,EAEjB1E,EAAO2I,MAAQ3I,EAGbhR,EAAOD,QAAUiR,EA3pDlB,CAiqDE7O,MAA2B,oBAAXuN,QAAyBA,U,+BCvqD5C,IAAIqM,EAGJA,EAAI,WACH,OAAO5Z,KADJ,GAIJ,IAEC4Z,EAAIA,GAAK,IAAIC,SAAS,cAAb,GACR,MAAO9Q,GAEc,iBAAXwE,SAAqBqM,EAAIrM,QAOrC1P,EAAOD,QAAUgc,G;;;;;;;;;;;;;;gFCiCV,SAASE,EAAWC,EAAY1R,EAAQhJ,EAAK2a,GAChD,IAA2H5b,EAAvHD,EAAIoa,UAAU5X,OAAQ/B,EAAIT,EAAI,EAAIkK,EAAkB,OAAT2R,EAAgBA,EAAOxb,OAAOyb,yBAAyB5R,EAAQhJ,GAAO2a,EACrH,GAAuB,iBAAZhS,SAAoD,mBAArBA,QAAQkS,SAAyBtb,EAAIoJ,QAAQkS,SAASH,EAAY1R,EAAQhJ,EAAK2a,QACpH,IAAK,IAAIlc,EAAIic,EAAWpZ,OAAS,EAAG7C,GAAK,EAAGA,KAASM,EAAI2b,EAAWjc,MAAIc,GAAKT,EAAI,EAAIC,EAAEQ,GAAKT,EAAI,EAAIC,EAAEiK,EAAQhJ,EAAKT,GAAKR,EAAEiK,EAAQhJ,KAAST,GAChJ,OAAOT,EAAI,GAAKS,GAAKJ,OAAOC,eAAe4J,EAAQhJ,EAAKT,GAAIA,EAWzD,SAASub,EAAUC,EAASC,EAAYC,EAAGC,GAC9C,OAAO,IAAKD,IAAMA,EAAI9W,WAAU,SAAUgX,EAASC,GAC/C,SAASC,EAAU3b,GAAS,IAAM4b,EAAKJ,EAAU7O,KAAK3M,IAAW,MAAOgK,GAAK0R,EAAO1R,IACpF,SAAS6R,EAAS7b,GAAS,IAAM4b,EAAKJ,EAAiB,MAAExb,IAAW,MAAOgK,GAAK0R,EAAO1R,IACvF,SAAS4R,EAAKE,GAAUA,EAAOxB,KAAOmB,EAAQK,EAAO9b,OAAS,IAAIub,GAAE,SAAUE,GAAWA,EAAQK,EAAO9b,UAAW0E,KAAKiX,EAAWE,GACnID,GAAMJ,EAAYA,EAAUxZ,MAAMqZ,EAASC,GAAc,KAAK3O,WCtEtE,MAAM,UAAwB,IAA9B,c,oBACE,KAAAtI,MAAQ,GACR,KAAAG,KAAOH,IACL,MAAM0X,EAAO1X,EAAM0X,KACnB,OACE,wBAAIC,MAAM,gCACR,wBAAIA,MAAM,YACR,uBAAGA,MAAM,kBAAkB3I,KAAK,MAAI,SAIrC0I,GACC,wBAAIC,MAAM,YACR,uBAAGA,MAAM,WAAW3I,KAAK,YACvB,uBAAG2I,MAAM,gB,cAIdD,GACC,wBAAIC,MAAM,YACR,uBAAGA,MAAM,WAAW3I,KAAK,cACvB,uBAAG2I,MAAM,e,eAIbD,GACA,wBAAIC,MAAM,YACR,uBAAGA,MAAM,WAAW3I,KAAK,WAAS,aAKpC0I,GACA,wBAAIC,MAAM,YACR,uBAAGA,MAAM,WAAW3I,KAAK,cAAY,YAKxC0I,GACC,wBAAIC,MAAM,YACR,uBAAGA,MAAM,WAAW3I,KAAM,aAAa0I,EAAKE,YACzCF,EAAKE,WAIXF,GACC,wBAAIC,MAAM,YACR,uBAAGA,MAAM,WAAW3I,KAAK,YAAU,eAS5B,KAAA6I,QAAU,CAAC7X,EAAO0X,IAAU,OAAD,wBAAM1X,GAAK,CAAE0X,UAAxC,GAAhB,YAAG,c,+BAGS,IAAI,GAAkB3N,MAAM,UC5D3C,IAAI+N,EACD3N,QAAUA,OAAO4N,cAAgB5N,OAAO4N,aAAaC,QAAQ,QAAW,GAKpE,SAASC,EAAStL,GACvBmL,EAAenL,EACVxC,OAAO4N,eACRpL,EAAOxC,OAAO4N,aAAaG,QAAQ,MAAOvL,GACzCxC,OAAO4N,aAAaI,WAAW,QAG/B,SAAeC,EACpBC,EACA5O,EACAmK,G,yCAEA,MAAM0E,EAAU,CAAE,eAAgB,mCAC9BR,IAAcQ,EAAuB,cAAI,SAASR,KACtD,MAAMS,QAAiBpO,OAAc,MAAE,GAAGqO,kBAAkB/O,IAAO,CACjE4O,SACAC,UACA1E,KAAMA,GAAQlR,KAAKC,UAAUiR,KAE/B,GAAwB,MAApB2E,EAASE,OAEX,MADAR,EAAS,MACH,IAAIrO,MAAM,OAElB,MAAM6N,QAAec,EAASG,OAC9B,IAAKH,EAASI,GAAI,MAAMlB,EACxB,OAAOA,KAGF,SAASlc,EAAOkO,GACrB,OAAO2O,EAAW,MAAO3O,GAGpB,SAASmP,EAAQnP,EAAamK,GACnC,OAAOwE,EAAW,OAAQ3O,EAAKmK,GAG1B,SAASjE,EAAIlG,GAClB,OAAO2O,EAAW,SAAU3O,GAGvB,SAASoP,EAAIpP,EAAamK,GAC/B,OAAOwE,EAAW,MAAO3O,EAAKmK,GAEzB,SAASkF,EAAc5D,GAC5B,MAAM6D,EAAQ,GACd,IAAK,IAAIre,KAAKwa,EACRA,EAAI3Y,eAAe7B,IACrBqe,EAAM/b,KAAKgc,mBAAmBte,GAAK,IAAMse,mBAAmB9D,EAAIxa,KAGpE,OAAOqe,EAAMxK,KAAK,KAGb,SAAS0K,EAAmBC,GACjC,IAAIhE,EAAM,GACV,GAAmB,iBAARgE,GAAqC,QAAjBA,EAAKrY,SAClC,IAAK,IAAInG,EAAI,EAAGA,EAAIwe,EAAKC,SAAS5b,OAAQ7C,IAAK,CAC7C,MAAM0e,EAAQF,EAAKC,SAASze,GAC5B,GACE0e,EAAMne,MACQ,QAAdme,EAAMvT,MACQ,SAAduT,EAAMvT,MACQ,UAAduT,EAAMvT,MACQ,UAAduT,EAAMvT,KAEN,GAAkB,mBAAduT,EAAMvT,KAA2B,CACnCqP,EAAIkE,EAAMne,MAAQ,GAClB,IAAIoe,EAAY,GAChB,IAAK,IAAIxE,EAAI,EAAGA,EAAIqE,EAAKC,SAASze,GAAGqC,QAAQQ,OAAQsX,IAC/CuE,EAAMrc,QAAQ8X,GAAG5O,WAAUoT,GAAaD,EAAMrc,QAAQ8X,GAAGlZ,MAAQ,KAExB,MAA3C0d,EAAU7K,OAAO6K,EAAU9b,OAAS,KACtC2X,EAAIkE,EAAMne,MAAQoe,EAAU/W,UAAU,EAAG+W,EAAU9b,OAAS,SACtC,YAAd6b,EAAMvT,MAAoC,SAAduT,EAAMvT,MAAoBuT,EAAMtT,WACtEoP,EAAIkE,EAAMne,MAAQme,EAAMzd,OAKhC,OAAOuZ,ECpFT/K,OAAwB,gBAAI,yCA8CrB,MAAMmP,EAAO,CAClBvQ,IAAK,IAAMxN,EAAW,UAGXge,EAAO,CAClBC,QAAS,IDjDF1B,ECiDsBvc,EAAmB,SAAW,KAC3Dke,OAAS/B,GACPkB,EAAoB,eAAgB,CAAElB,SACxCgC,SAAWhC,GACTkB,EAAoB,SAAU,CAAElB,SAClCiC,KAAMjC,GAAQmB,EAAI,QAAS,CAAEnB,SAC7BkC,WAAY,MAAgB,IAAU,MAAW,IAAItZ,IAAI,aAAc,GAG5D,EAAW,CACtBuZ,OAASC,GAA8Bve,EAAW,aAAaud,EAAcgB,MAC7EC,KAAOD,GACLve,EAAW,kBAAkBud,EAAcgB,MAC7Cve,IAAMmY,GAAiBnY,EAAuB,aAAamY,KAC3DsG,OAAStG,GAAiB/D,EAAI,aAAa+D,KAC3CuG,SAAWvG,GAAiBkF,EAAK,aAAalF,cAC9CwG,WAAaxG,GAAiB/D,EAAI,aAAa+D,cAC/ChT,OAASyZ,GAAsBtB,EAAI,aAAasB,EAAQzG,OAAQ,CAAEyG,YAClEne,OAASme,GAAyBvB,EAAwB,YAAa,CAAEuB,aAG9D,EAAW,CACtBne,OAAQ,CAAC0X,EAAc0G,IACrBxB,EAAK,aAAalF,aAAiB,CAAE0G,YACvCJ,OAAQ,CAACtG,EAAc2G,IAAsB1K,EAAI,aAAa+D,cAAiB2G,KAC/EC,WAAa5G,GAAiBnY,EAAuB,aAAamY,eAGvD,EAAU,CACrBnY,IAAMqc,GAAqBrc,EAAsB,aAAaqc,KAC9D2C,OAAS3C,GAAqBgB,EAAuB,aAAahB,YAClE4C,SAAW5C,GAAqBjI,EAAI,aAAaiI,aClFnD,SAAS6C,EAAQhb,GACf,MAAM0a,EAAU1a,EAAM0a,QAChBO,EAAWP,EAAQQ,UAAY,cAAgB,sBACrD,OACE,yBAAKhD,MAAM,mBACT,yBAAKA,MAAM,gBACT,uBAAG3I,KAAMmL,EAAQS,OAAO7H,OACtB,yBAAKrG,IAAKyN,EAAQS,OAAO7H,SAE3B,yBAAK4E,MAAM,QACT,uBAAG3I,KAAM,aAAamL,EAAQS,OAAOhD,WAAYD,MAAM,UACpDwC,EAAQS,OAAOhD,UAElB,0BAAMD,MAAM,QAAQ,IAAIhY,KAAKwa,EAAQU,WAAWC,mBAElD,4BACEnD,MAAO,4BAA4B+C,IACnCK,QAASpV,GAAK,IAAIrF,IAAI,qBAAsB6Z,EAAS1a,EAAMK,YAC3D,uBAAG6X,MAAM,c,IAAkBwC,EAAQa,iBAGvC,uBAAGhM,KAAM,aAAamL,EAAQzG,OAAQiE,MAAM,gBAC1C,4BAAKwC,EAAQlL,OACb,2BAAIkL,EAAQc,aACZ,8CACA,wBAAItD,MAAM,YACPwC,EAAQe,QAAQ/b,IAAIG,GACnB,wBAAIqY,MAAM,oCACR,uBAAG3I,KAAM,SAAS1P,KAAQA,E,UDyDxC,IAAI1B,GAAG,YAAa,IAAY,oCAC9B,IACE,MAAM4b,QAAgBD,EAAKC,UACvBA,GAAS,IAAIlZ,IAAI,YAAakZ,EAAQ9B,MAC1C,SACAO,EAAS,MACTjW,SAASqI,SAAS8Q,QAAO,QAI7B,IAAIvd,GAAG,YAAa8Z,IAClB,IAAU,KAAIA,EACdO,EAASP,EAAOA,EAAK/K,MAAQ,QAG/B,IAAI/O,GAAG,iBAAkB,CAAOgd,EAAkB9a,IAAc,oCAC9D,IAAKyZ,EAAKK,aAAc,OACxB,MAAMnC,EAASmD,EAAOQ,gBACZ,EAAQZ,SAASI,EAAOhD,gBACxB,EAAQ2C,OAAOK,EAAOhD,UAChC9X,EAAUQ,IAAI,gBAAiBmX,EAAO4D,aAGxC,IAAIzd,GAAG,sBAAuB,CAAOuc,EAAmBra,IAAc,oCACpE,IAAKyZ,EAAKK,aAAc,OACxB,MAAMnC,EAAS0C,EAAQQ,gBACb,EAAST,WAAWC,EAAQzG,YAC5B,EAASuG,SAASE,EAAQzG,MACpC5T,EAAUQ,IAAI,iBAAkBmX,EAAO0C,aC5E1B,gBAAS,SAAEmB,EAAQ,UAAExb,IAClC,OAAOwb,EAAS/d,OACd+d,EAASnc,IAAIgb,GAAW,kBAACM,EAAO,CAACN,QAASA,EAASra,UAAWA,KAE9D,yBAAK6X,MAAM,mBAAiB,iCC1CjB,YAAS,IAAE4D,EAAG,SAAEtV,EAAQ,KAAEoJ,IACvC,MAAMmM,EAAQ,IAAI/c,MAAM8c,GAAKE,KAAK,GAClC,OACE,6BACE,wBAAI9D,MAAM,cACP6D,EAAMrc,IAAI,CAACuc,EAAMxc,IAChB,wBAAIyY,MAAO,aAAazY,EAAM,IAAM+G,EAAW,SAAW,MACxD,uBAAG+I,KAAM,GAAGK,KAAQnQ,EAAM,IAAKyY,MAAM,aAClCzY,EAAM,QCJrB,MAAMyc,EAAY,GACZC,EAAM,EAAGtc,SACb,uBAAG0P,KAAM,SAAS1P,MAASqY,MAAM,wBAC9BrY,GAYL,MAAM,UAAsB,IAA5B,c,oBACE,KAAAU,MAAgB,CACd6F,KAAM,GACNyV,SAAU,GACVhC,KAAM,GACNiC,IAAK,EACLG,KAAM,GAGR,KAAAvb,KAAOH,IACL,MAAMV,EAAqB,QAAfU,EAAM6F,MAAkB7F,EAAMV,IAAM,IAAIU,EAAMV,MAAQ,GAClE,OACE,yBAAKqY,MAAM,aACT,yBAAKA,MAAM,UACT,yBAAKA,MAAM,aACT,wBAAIA,MAAM,aAAW,WACrB,iEAGJ,yBAAKA,MAAM,kBACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,YACT,yBAAKA,MAAM,eACT,wBAAIA,MAAM,gCACR,wBAAIA,MAAM,YACR,uBACEA,MAAO,YAAY,IAAU,KAAI,GAAK,cACrB,SAAf3X,EAAM6F,KAAkB,SAAW,KAErCmJ,KAAK,UAAQ,cAIjB,wBAAI2I,MAAM,YACR,uBAAGA,MAAO,YAA2B,KAAf3X,EAAM6F,KAAc,SAAW,KAAMmJ,KAAK,MAAI,gBAIrEhP,EAAMV,IACL,wBAAIqY,MAAM,YACR,uBACEA,MAAO,YAA2B,QAAf3X,EAAM6F,KAAiB,SAAW,KACrDmJ,KAAM,SAAShP,EAAMV,O,IACnBU,EAAMV,MAGV,KAKR,kBAAC,EAAQ,CAACgc,SAAUtb,EAAMsb,SAAUxb,UAAWlD,OAC/C,kBAAC,EAAK,CACJ2e,IAAKna,KAAKya,MAAM7b,EAAMub,IAAMI,GAC5B1V,SAAUjG,EAAM0b,KAChBrM,KAAM,KAAKrP,EAAM6F,OAAOvG,OAG5B,yBAAKqY,MAAM,YACT,yBAAKA,MAAM,WACT,2CACA,yBAAKA,MAAM,YACR3X,EAAMsZ,KAAKna,IAAIG,GACd,kBAACsc,EAAG,CAACtc,IAAKA,YAW5B,KAAAwc,YAAc,CAAO9b,EAAO6F,EAA2B6V,EAAMpc,IAAiB,kCAC5E,IACE,IAAI4b,EAAUlb,EAAMsZ,KAAK/b,OAAS,CAAE+b,KAAMtZ,EAAMsZ,YAAeA,EAAKvQ,MACpE2S,EAAO5K,SAAS4K,IAAS,EACzBpc,EAAMA,GAAOU,EAAMV,IACnB,MAAMyc,EAAQJ,EACRrG,GAAUoG,EAAO,GAAKC,EAC5B,IAAI5B,EACJ,OAAQlU,GACN,IAAK,OACH,IAAK0T,EAAKK,aAAc,OAAO,OAAP,wBAAY5Z,GAAK,CAAEsb,SAAU,GAAIC,IAAK,IAC9DxB,QAAa,EAASA,KAAK,CAAEgC,QAAOzG,WACpC,MACF,IAAK,MACHyE,QAAa,EAASF,OAAO,CAAEva,MAAKyc,QAAOzG,WAC3C,MACF,QACEyE,QAAa,EAASF,OAAO,CAAEkC,QAAOzG,WAI1C,OADAoG,EAAOta,KAAKC,IAAIqa,EAAMta,KAAKya,MAAM9B,EAAKiC,cAAgBL,GAAa,GAC5D,OAAP,wBACK3b,GAAK,CACRsZ,KAAM4B,EAAQ5B,KACdzT,OACA6V,OACApc,MACAgc,SAAUvB,EAAKuB,SACfC,IAAKxB,EAAKiC,gBAEZ,OAAO,OAAEC,IACT,OAAO,OAAP,wBAAYjc,GAAK,CAAEic,SAAQX,SAAU,GAAIC,IAAK,QAIxC,KAAAtd,KAAO,CAAO+B,EAAO0b,IAAS,+CAAM9e,KAAKkf,YAAY9b,EAAO,GAAI0b,MAE5D,KAAA3B,KAAO,CAAO/Z,EAAO0b,IAAS,+CAAM9e,KAAKkf,YAAY9b,EAAO,OAAQ0b,MAErE,KAAApc,IAAM,CAAOU,EAAOV,EAAKoc,IAAS,+CAAM9e,KAAKkf,YAAY9b,EAAO,MAAO0b,EAAMpc,MAEpE,KAAA4c,cAAgB,CAAClc,EAAOma,KAC5Cna,EAAMsb,SAAWtb,EAAMsb,SAASnc,IAAIgd,GAC3BA,EAAEzI,OAASyG,EAAQzG,KAAOyG,EAAUgC,GAEtCnc,IAVC,GAAT,YAAG,O,2BAEU,GAAb,YAAG,W,2BAES,GAAZ,YAAG,U,0BAEkB,GAArB,YAAG,mB,qCAQS,IAAI,GAAgBD,MAAM,UAA1B,IC9IA,YAAS,OAAEkc,IACxB,OACE,wBAAItE,MAAM,kBACPvc,OAAO2H,KAAKkZ,GAAQ9c,IAAIlD,GACvB,4BAAK,GAAGA,KAAOggB,EAAOhgB,SCD9B,MAAM,UAAwB,IAA9B,c,oBACE,KAAA+D,MAAQ,GAER,KAAAG,KAAOH,IACL,GAAKA,KAASA,aAAiBI,SAC/B,OACE,yBAAKuX,MAAM,aACT,yBAAKA,MAAM,kBACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,kCACT,wBAAIA,MAAM,kBAAgB,WAC1B,uBAAGA,MAAM,kBACP,uBAAG3I,KAAK,cAAY,qBAGrBhP,EAAMic,QAAU,kBAAC,EAAM,CAACA,OAAQjc,EAAMic,SAEvC,0BAAMG,SAAUzW,GAAK/I,KAAK0D,IAAI,UAAWqF,IACvC,8BAAUgS,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,OACLwW,YAAY,QACZphB,KAAK,WAGT,8BAAU0c,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,WACLwW,YAAY,WACZphB,KAAK,cAGT,4BAAQ0c,MAAM,wCAAsC,iBASnD,KAAA2E,MAAQtc,GAAU,OAAD,wBAAMA,GAAK,CAAEuc,SAAU,GAAIC,SAAUxa,SAASqI,SAASC,OAEvE,KAAAmS,OAASzc,IACvB,IAAIM,IAAI,YAAa,MACrB0B,SAASqI,SAASC,KAAO,MAGZ,KAAAmP,OAAS,CAAOzZ,EAAO2F,IAAM,kCAC1C,IACEA,EAAE+W,iBACF,MAAMC,QAAgBpD,EAAKE,OAAOR,EAAgBtT,EAAEV,SACpD,IAAI3E,IAAI,YAAaqc,EAAQjF,MAC7B,MAAM8E,GAAoBxc,EAAMwc,UAAY,IAAIpZ,QAAQ,eAAgB,IACnEoZ,GAEH,IAAIlc,IAAI,QAASkc,GACjBhW,QAAQoW,UAAU,KAAM,KAAMJ,IAHjBxa,SAASqI,SAASC,KAAO,SAKxC,OAAO,OAAE2R,IACT,OAAO,OAAP,wBAAYjc,GAAK,CAAEic,gBAnBR,GAAd,YAAG,Y,4BAEY,GAAf,YAAG,a,6BAKW,GAAd,YAAG,Y,8BAiBS,IAAI,GAAkBlc,MAAM,UCpE3C,MAAM,UAA0B,IAAhC,c,oBACE,KAAAC,MAAQ,GAER,KAAAG,KAAOH,IACL,GAAKA,KAASA,aAAiBI,SAC/B,OACE,yBAAKuX,MAAM,aACT,yBAAKA,MAAM,kBACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,kCACT,wBAAIA,MAAM,kBAAgB,WAC1B,uBAAGA,MAAM,kBACP,uBAAG3I,KAAK,WAAS,qBAGlBhP,EAAMic,QAAU,kBAAC,EAAM,CAACA,OAAQjc,EAAMic,SAEvC,0BAAMG,SAAUzW,GAAK/I,KAAK0D,IAAI,WAAYqF,IACxC,8BAAUgS,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,OACLwW,YAAY,YACZphB,KAAK,cAGT,8BAAU0c,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,OACLwW,YAAY,QACZphB,KAAK,WAGT,8BAAU0c,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,WACLwW,YAAY,WACZphB,KAAK,cAGT,4BAAQ0c,MAAM,wCAAsC,iBAShD,KAAA+B,SAAW,CAAC1Z,EAAOuc,IAAc,OAAD,wBAAMvc,GAAK,CAAEuc,aAE/C,KAAAM,mBAAqB,CAAO7c,EAAO2F,IAAM,kCACvD,IACEA,EAAE+W,iBACF,MAAMC,QAAgBpD,EAAKG,SAAST,EAAgBtT,EAAEV,SACtD,IAAI3E,IAAI,QAASqc,EAAQjF,MACzB,IAAIpX,IAAI,QAAS,MACjB,OAAO,OAAE2b,IACT,OAAO,OAAP,wBAAYjc,GAAK,CAAEic,gBATL,GAAjB,YAAG,e,+BAEY,GAAf,YAAG,a,0CAYS,IAAI,GAAoBlc,MAAM,UC/D7C,MAAM,EAAY,GAElB,MAAM,UAAyB,IAA/B,c,oBACE,KAAAC,MAAQ,CACN/E,KAAM,GACN4K,KAAM,WACNyV,SAAU,GACVI,KAAM,GAGR,KAAAvb,KAAOH,IACL,MAAMqb,EAAUrb,EAAMqb,QACtB,GAAKA,EACL,OACE,yBAAK1D,MAAM,gBACT,yBAAKA,MAAM,aACT,yBAAKA,MAAM,aACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,mCACT,yBAAKjL,IAAK2O,EAAQtI,MAAO4E,MAAM,aAC/B,4BAAK0D,EAAQzD,UACb,2BAAIyD,EAAQyB,KACZ,4BACEnF,MAAM,8CACNoD,QAASpV,GAAK,IAAIrF,IAAI,iBAAkB+a,EAASze,OAChDye,EAAQD,UACP,8BACE,uBAAGzD,MAAM,oB,aAAiC0D,EAAQzD,UAGpD,8BACE,uBAAGD,MAAM,mB,WAA8B0D,EAAQzD,eAS7D,yBAAKD,MAAM,aACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,mCACT,yBAAKA,MAAM,mBACT,wBAAIA,MAAM,gCACR,wBAAIA,MAAM,YACR,uBACEA,MAAO,YAA2B,aAAf3X,EAAM6F,KAAsB,SAAW,KAC1DmJ,KAAM,aAAaqM,EAAQzD,uBAAqB,gBAIpD,wBAAID,MAAM,YACR,uBACEA,MAAO,YAA2B,cAAf3X,EAAM6F,KAAuB,SAAW,KAC3DmJ,KAAM,aAAaqM,EAAQzD,wBAAsB,yBAMzD,kBAAC,EAAQ,CAAC0D,SAAUtb,EAAMsb,SAAUxb,UAAWlD,OAC/C,kBAAC,EAAK,CACJ2e,IAAKna,KAAKya,MAAM7b,EAAMub,IAAM,GAC5BtV,SAAUjG,EAAM0b,KAChBrM,KAAM,aAAarP,EAAMqb,QAAQzD,YAAY5X,EAAM6F,cASjE,KAAAiW,YAAc,CAAO9b,EAAO/E,EAAM4K,EAAM6V,IAAS,kCAC/CzgB,EAAOoW,mBAAmBpW,GAAQ+E,EAAM/E,MACxC4K,EAAOA,GAAQ7F,EAAM6F,KACrB6V,EAAO5K,SAAS4K,IAAS1b,EAAM0b,KAC/B,IAAI/S,EAAW3I,EACf,GAAI/E,IAAS+E,EAAM/E,KAAM,CACvB,MAAM8hB,QAAsB,EAAQxhB,IAAIN,GACxC0N,EAAW,OAAH,wBAAQA,GAAQ,CAAE0S,QAAS0B,EAAc1B,UAEnD,GAAIpgB,IAAS+E,EAAM/E,MAAQ4K,IAAS7F,EAAM6F,MAAQ6V,IAAS1b,EAAM0b,KAAM,CACrE,MAAMK,EAAQ,EACRzG,GAAUoG,EAAO,GAAKK,EACtBiB,EACK,cAATnX,QACU,EAASgU,OAAO,CAAEc,UAAW1f,EAAMqa,SAAQyG,gBAC3C,EAASlC,OAAO,CAAEe,OAAQ3f,EAAMqa,SAAQyG,UACpDpT,EAAW,OAAH,wBACHA,GAAQ,CACX1N,OACA4K,OACA6V,OACAJ,SAAU0B,EAAc1B,SACxBC,IAAKyB,EAAchB,gBAGvB,OAAOrT,KAGQ,KAAA1K,KAAO,CAAC+B,EAAO/E,EAAM4K,EAAM6V,IAAS9e,KAAKkf,YAAY9b,EAAO/E,EAAM4K,EAAM6V,GAEnE,KAAAQ,cAAgB,CAAClc,EAAOma,KAC5Cna,EAAMsb,SAAWtb,EAAMsb,SAASnc,IAAIgd,GAC3BA,EAAEzI,OAASyG,EAAQzG,KAAOyG,EAAUgC,GAEtCnc,GAGY,KAAAid,aAAe,CAACjd,EAAOqb,IAAa,OAAD,wBAAMrb,GAAK,CAAEqb,aATpD,GAAhB,YAAG,c,2BAEkB,GAArB,YAAG,mB,oCAOiB,GAApB,YAAG,kB,oCAGS,IAAI,GAAmBtb,MAAM,UAA7B,ICtHA,YAAS,MAAEkP,EAAK,KAAE2E,EAAI,GAAE+E,EAAE,OAAEuE,EAAM,KAAEC,EAAI,SAAEC,IACvD,OACE,yBAAKzF,MAAM,cACT,yBAAKA,MAAM,eAAe0F,KAAK,YAC7B,yBAAK1F,MAAM,iBACT,yBAAKA,MAAM,gBACT,wBAAIA,MAAM,eACP1I,EACD,4BACEpJ,KAAK,SACL8R,MAAM,QAAO,eACA,QAAO,aACT,QACXoD,QAASpV,GAAKyX,EAASzX,IACvB,wCAAkB,QAAM,QAI9B,yBAAKgS,MAAM,cACT,2BAAI/D,IAEN,yBAAK+D,MAAM,gBACRuF,GACC,4BACErX,KAAK,SACL8R,MAAM,oBAAmB,eACZ,QACboD,QAASpV,GAAKyX,EAASzX,IACtBuX,G,KAIL,4BAAQrX,KAAK,SAAS8R,MAAM,kBAAkBoD,QAASpV,GAAKwX,EAAKxX,IAC9DgT,MAKT,yBAAKhB,MAAM,sBAAsBoD,QAASpV,GAAKyX,EAASzX,OCnC9D,MAAM,UAA0B,IAAhC,c,oBACE,KAAA3F,MAAQ,GAER,KAAAG,KAAOH,IACL,MAAM0X,EAAO1X,EAAM0X,KACnB,GAAKA,EACL,OACE,yBAAKC,MAAM,iBACR3X,EAAMsd,UACL,kBAAC,EAAK,CACJrO,MAAM,eACN2E,KAAK,+CACL+E,GAAG,KACHuE,OAAO,SACPC,KAAMxX,GAAK/I,KAAK0D,IAAI,KAAMqF,GAC1ByX,SAAUzX,GAAK/I,KAAK0D,IAAI,SAAUqF,KAElC,GAGJ,yBAAKgS,MAAM,kBACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,kCACR3X,EAAMic,QAAU,kBAAC,EAAM,CAACA,OAAQjc,EAAMic,SACvC,wBAAItE,MAAM,kBAAgB,iBAC1B,0BAAMyE,SAAUzW,GAAK/I,KAAK0D,IAAI,kBAAmBqF,IAC/C,kCACE,8BAAUgS,MAAM,cACd,2BACEA,MAAM,eACN9R,KAAK,OACLwW,YAAY,yBACZphB,KAAK,QACLU,MAAO+b,EAAK3E,SAGhB,8BAAU4E,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,OACLwW,YAAY,YACZphB,KAAK,WACLU,MAAO+b,EAAKE,YAGhB,8BAAUD,MAAM,cACd,8BACEA,MAAM,+BACN4F,KAAK,IACLlB,YAAY,sBACZphB,KAAK,OACJyc,EAAKoF,MAGV,8BAAUnF,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,OACLwW,YAAY,QACZphB,KAAK,QACLU,MAAO+b,EAAK8F,SAGhB,8BAAU7F,MAAM,cACd,2BACEA,MAAM,+BACN9R,KAAK,WACLwW,YAAY,WACZphB,KAAK,WACLU,MAAO+b,EAAK+F,YAGhB,4BAAQ9F,MAAM,wCAAsC,0BAUlD,KAAA+F,SAAW1d,IAC3B,GAAKuZ,EAAKK,aACV,MAAO,CAAElC,KAAM,IAAU,OAGJ,KAAAiG,eAAiB,CAAO3d,EAAO2F,IAAM,kCAC1D,IACEA,EAAE+W,iBACF,MAAMhF,EAAOuB,EAAqBtT,EAAEV,QAC9BwS,QAAe8B,EAAKI,KAAKjC,GAE/B,OADA,IAAIpX,IAAI,QAASmX,EAAOC,MACjB,CAAE4F,WAAW,GACpB,OAAO,OAAErB,IACT,OAAO,OAAP,wBAAYjc,GAAK,CAAEic,eAIL,KAAAtD,GAAK3Y,IACd,CAAE4d,WAAW,KAlBJ,GAAjB,YAAG,e,+BAKmB,GAAtB,YAAG,oB,qCAYc,GAAjB,YAAG,e,0BAKS,IAAI,GAAoB7d,MAAM,UCzG7C,MAAM,UAAwB,IAA9B,c,oBACE,KAAAC,MAAQ,GAER,KAAAG,KAAOH,IACL,IAAK,IAAU,OAAMA,EAAMma,QAAS,OACpC,MAAMA,EAAUna,EAAMma,QACtB,OACE,yBAAKxC,MAAM,eACT,yBAAKA,MAAM,kBACT,yBAAKA,MAAM,OACT,yBAAKA,MAAM,mCACR3X,EAAMic,QAAU,kBAAC,EAAM,CAACA,OAAQjc,EAAMic,SACvC,0BAAMG,SAAUzW,GAAK/I,KAAK0D,IAAI,iBAAkBqF,IAC7CwU,EAAQzG,MAAQ,2BAAO7N,KAAK,SAAS5K,KAAK,OAAOU,MAAOwe,EAAQzG,OACjE,kCACE,8BAAUiE,MAAM,cACd,2BACE9R,KAAK,OACL8R,MAAM,+BACN0E,YAAY,gBACZphB,KAAK,QACLU,MAAOwe,EAAQlL,SAGnB,8BAAU0I,MAAM,cACd,2BACE9R,KAAK,OACL8R,MAAM,eACN0E,YAAY,6BACZphB,KAAK,cACLU,MAAOwe,EAAQc,eAGnB,8BAAUtD,MAAM,cACd,8BACEA,MAAM,eACN4F,KAAK,IACLlB,YAAY,mCACZphB,KAAK,QACJkf,EAAQvG,OAGb,8BAAU+D,MAAM,cACd,2BACE9R,KAAK,OACL8R,MAAM,eACN0E,YAAY,aACZphB,KAAK,OACLU,MAAOwe,EAAQe,QAAQ3M,KAAK,QAE9B,yBAAKoJ,MAAM,cAEb,4BAAQA,MAAM,uCAAuC9R,KAAK,UAAQ,0BAYlE,KAAA5H,KAAO,CAAO+B,EAAO0T,IAAS,kCAC5C,IAAK6F,EAAKK,aAAc,OACxB,IAAIO,EACJ,GAAIzG,EAAM,CAERyG,SADqB,EAAS5e,IAAImY,IACjByG,QAGnB,MAAO,CAAEA,QADTA,EAAUA,GAAW,CAAElL,MAAO,GAAIgM,YAAa,GAAIrH,KAAM,GAAIsH,QAAS,QAIlD,KAAA2C,cAAgB,CAAO7d,EAAO2F,IAAM,kCACxD,IACEA,EAAE+W,iBACF,MAAMvC,EAAUlB,EAAqBtT,EAAEV,QACvCkV,EAAQe,QAAUf,EAAQb,KAAKrQ,MAAM,KACrC,MAAMwO,EAAS0C,EAAQzG,WAAa,EAAShT,OAAOyZ,SAAiB,EAASne,OAAOme,GACrFnY,SAASqI,SAASC,KAAO,aAAamN,EAAO0C,QAAQzG,OACrD,OAAO,OAAEuI,IACT,OAAO,OAAP,wBAAYjc,GAAK,CAAEic,gBAnBP,GAAf,YAAG,a,2BAWkB,GAArB,YAAG,mB,qCAaS,IAAI,GAAkBlc,MAAM,UAA5B,I,OCxFf,SAAS+d,GAAQ,QAAE1D,IACjB,OACE,yBAAKzC,MAAM,QACT,yBAAKA,MAAM,cACT,uBAAGA,MAAM,aACP,2BAAI,SAASlM,EAAO2O,EAAQxG,KAAM,CAAEjF,UAAU,SAGlD,yBAAKgJ,MAAM,eACT,uBAAGA,MAAM,kBACP,yBAAKjL,IAAK0N,EAAQQ,OAAO7H,MAAO4E,MAAM,wB,IAGxC,uBAAGA,MAAM,iBAAiB3I,KAAM,aAAaoL,EAAQQ,OAAOhD,YACzDwC,EAAQQ,OAAOhD,UAElB,0BAAMD,MAAM,eAAe,IAAIhY,KAAKya,EAAQ2D,WAAWjD,kBACtD,IAAU,MAAK,IAAU,KAAElD,WAAawC,EAAQQ,OAAOhD,UACtD,0BAAMD,MAAM,eACV,uBAAGA,MAAM,cAAcoD,QAASpV,GAAK,IAAIrF,IAAI,kBAAmB8Z,QAQ7D,gBAAS,SAAE4D,IACxB,MAAMtG,EAAO,IAAU,KACvB,OACE,yBAAKC,MAAM,OACT,yBAAKA,MAAM,kCACPD,EAMA,0BAAMC,MAAM,oBAAoByE,SAAUzW,GAAK,IAAIrF,IAAI,eAAgBqF,IACrE,yBAAKgS,MAAM,cACT,8BACEA,MAAM,eACN0E,YAAY,qBACZkB,KAAK,IACLtiB,KAAK,aAET,yBAAK0c,MAAM,eACRD,EAAK3E,MACJ,yBAAKrG,IAAKgL,EAAK3E,MAAO4E,MAAM,uBAE5B,8B,IAAQD,EAAKE,UAEf,4BAAQD,MAAM,yBAAyB9R,KAAK,UAAQ,kBAnBxD,2BACE,uBAAGmJ,KAAM,WAAWhN,SAASqI,SAASC,QAAM,W,OAC5C,uBAAG0E,KAAK,cAAY,W,qCAuBvBgP,EAAS7e,IAAIib,GACZ,kBAAC0D,EAAO,CAAC1D,QAASA,QC5Db,SAAS6D,GAAY,QAAE9D,EAAO,UAAEra,IAC7C,MAAM4a,EAAWP,EAAQQ,UAAY,cAAgB,sBAC/CuD,EAAc/D,EAAQS,OAAOQ,UAAY,gBAAkB,wBACjE,OACE,yBAAKzD,MAAM,gBACT,uBAAG3I,KAAMmL,EAAQS,OAAO7H,OACtB,yBAAKrG,IAAKyN,EAAQS,OAAO7H,SAE3B,yBAAK4E,MAAM,QACT,uBAAG3I,KAAM,aAAamL,EAAQS,OAAOhD,WAAYD,MAAM,UACpDwC,EAAQS,OAAOhD,UAElB,0BAAMD,MAAM,QAAQ,IAAIhY,KAAKwa,EAAQU,WAAWC,mBAGjD,IAAU,MAAK,IAAU,KAAElD,WAAauC,EAAQS,OAAOhD,SACtD,8BACE,4BACED,MAAM,mCACNoD,QAASpV,GAAK7F,EAAUQ,IAAI,eAAgB6Z,IAC5C,uBAAGxC,MAAM,a,uBAGX,4BACEA,MAAM,gCACNoD,QAASpV,GAAK7F,EAAUQ,IAAI,iBAAkB6Z,IAC9C,uBAAGxC,MAAM,gB,qBAIb,8BACE,4BACEA,MAAO,cAAcuG,IACrBnD,QAASpV,GAAK,IAAIrF,IAAI,iBAAkB6Z,EAAQS,OAAQ9a,IACvDqa,EAAQS,OAAOQ,UACd,8BACE,uBAAGzD,MAAM,oB,aAAiCwC,EAAQS,OAAOhD,UAG3D,8BACE,uBAAGD,MAAM,mB,WAA8BwC,EAAQS,OAAOhD,WAGlD,I,KAEV,4BACED,MAAO,cAAc+C,IACrBK,QAASpV,GAAK,IAAIrF,IAAI,sBAAuB6Z,EAASra,IACtD,uBAAG6X,MAAM,c,mBACY,0BAAMA,MAAM,W,IAAYwC,EAAQa,e,QC5CjE,MAAM,UAAyB,IAA/B,c,oBACE,KAAAhb,MAAQ,CACNma,QAAS,KACT6D,SAAU,IAGZ,KAAA7d,KAAOH,IACL,MAAMma,EAAUna,EAAMma,QACtB,GAAKA,EACL,OACE,yBAAKxC,MAAM,gBACR3X,EAAMme,UACL,kBAAC,EAAK,CACJlP,MAAM,iBACN2E,KAAK,gDACL+E,GAAG,SACHuE,OAAO,KACPC,KAAMxX,GAAK/I,KAAK0D,IAAI,oBAAqBqF,GACzCyX,SAAUzX,GAAK/I,KAAK0D,IAAI,wBAAyBqF,KAIrD,yBAAKgS,MAAM,UACT,yBAAKA,MAAM,aACT,4BAAKwC,EAAQlL,OACb,kBAACgP,EAAW,CAAC9D,QAASA,EAASra,UAAWlD,SAI9C,yBAAK+a,MAAM,kBACT,yBAAKA,MAAM,uBACT,yBAAKA,MAAM,aACT,2BAAI,SAASlM,EAAO0O,EAAQvG,KAAM,CAAEjF,UAAU,OAC9C,yBAAKgJ,MAAM,YACT,6BACCwC,EAAQe,QAAQ/b,IAAIG,GACnB,wBAAIqY,MAAM,oCACR,uBAAG3I,KAAM,SAAS1P,KAAQA,E,UAMpC,6BACA,yBAAKqY,MAAM,mBACT,kBAACsG,EAAW,CAAC9D,QAASA,EAASra,UAAWlD,QAE5C,kBAAC,EAAQ,CAACohB,SAAUhe,EAAMge,cAMjB,KAAA/f,KAAO,CAAO+B,EAAO0T,IAAS,kCAC7C,IAAIyG,EAAUna,EAAMma,QAChBiE,EAAYpe,EAAMge,SACtB,IAAK7D,GAAWA,EAAQzG,OAASA,EAAM,CAErCyG,SADqB,EAAS5e,IAAImY,IACjByG,QAEjBiE,SAD+B,EAAS9D,WAAWH,EAAQzG,OAC9BsK,SAE/B,OAAO,OAAP,wBAAYhe,GAAK,CAAEma,UAAS6D,SAAUI,OAGpB,KAAAC,WAAa,CAAOre,EAAO2F,IAAM,kCACnD,IACEA,EAAE+W,iBACF,MAAMtC,EAAUzU,EAAEV,OAAgB,QAAEtJ,MACpC,IAAKye,EAAS,aACR,EAASpe,OAAOgE,EAAMma,QAAQzG,KAAM,CAAEE,KAAMwG,IAClD,MAAMkE,QAAyB,EAAShE,WAAWta,EAAMma,QAAQzG,MACjE,OAAO,OAAP,wBAAY1T,GAAK,CAAEge,SAAUM,EAAiBN,WAC9C,OAAO,OAAE/B,IACT,OAAO,OAAP,wBAAYjc,GAAK,CAAEic,eAIA,KAAAsC,cAAgB,CAAOve,EAAOoa,IAAY,wCACzD,EAASJ,OAAOpd,KAAKoD,MAAMma,QAAQzG,KAAM0G,EAAQ1a,IACvD,MAAM4e,QAAyB,EAAShE,WAAWta,EAAMma,QAAQzG,MACjE,OAAO,OAAP,wBAAY1T,GAAK,CAAEge,SAAUM,EAAiBN,cAG1B,KAAA9B,cAAgB,CAAClc,EAAOma,IAAa,OAAD,wBACrDna,GAAK,CACRma,YAGmB,KAAA8C,aAAe,CAACjd,EAAO4a,KAC1C5a,EAAMma,QAAQS,OAASA,EAChB5a,GAGW,KAAAwe,YAAc,CAACxe,EAAOma,KACxCnY,SAASqI,SAASC,KAAO,YAAY6P,EAAQzG,QAGzB,KAAA+K,cAAgB,CAACze,EAAOma,IAAa,OAAD,wBACrDna,GAAK,CACRme,UAAU,IAGa,KAAAO,SAAW,CAAC1e,EAAO2F,KAC1C,EAASqU,OAAOha,EAAMma,QAAQzG,MAC9B1R,SAASqI,SAASC,KAAO,KAClB,OAAP,wBAAYtK,GAAK,CAAEme,UAAU,KAGF,KAAAQ,aAAe,CAAC3e,EAAOma,IAAa,OAAD,wBAC3Dna,GAAK,CACRme,UAAU,KA1DK,GAAhB,YAAG,c,2BAYgB,GAAnB,YAAG,iB,iCAamB,GAAtB,YAAG,oB,oCAMkB,GAArB,YAAG,mB,oCAKiB,GAApB,YAAG,kB,mCAKgB,GAAnB,YAAG,iB,kCAIkB,GAArB,YAAG,mB,oCAKqB,GAAxB,YAAG,sB,+BAMyB,GAA5B,YAAG,0B,oCAMS,IAAI,GAAmBpe,MAAM,UChH5C,IAAInC,GAAG,IAAK,CAAC4L,KAAUhN,KACrB,IAAI8D,IAAI,KAAKkJ,GAAS,QAAShN,KAGjC,IAAI8D,IAAI","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import { EventOptions} from './types'\nexport class App {\n\n  private _events: Object;\n\n  public start;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n    \n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    let subscribers = this._events[name] || [];\n\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    this._events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n    component['__eid'] = id;\n  } else {\n    id = component['__eid'];\n  }\n  let state = component.state;\n  if (component.mounted) {\n    const new_state = component.mounted(props, children);\n    if (typeof new_state !== 'undefined') state = component.state = new_state;\n  }\n  let vdom = '';\n  if (component.view) {\n    if (state instanceof Promise) {\n      state.then(() => component.run('.'));\n    } else {\n      vdom = component._view(state, props);\n      component.rendered && setTimeout(() => component.rendered(state, props));\n    }\n  }\n  return <section {...props} id={id}>{vdom}</section>;\n}\n\nlet _idx = 0;\nexport default function createComponent(node, parent, idx = 0) {\n  if (idx === 0) _idx = 0;\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, _idx));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent)\n    vdom = render(node, parent, _idx++);\n  if (vdom && Array.isArray(vdom.children))\n    vdom.children = vdom.children.map(child => createComponent(child, parent, _idx));\n  return vdom;\n}\n","import createComponent from './createComponent';\nimport { VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = {};\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VNode | VNode[], parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null) return;\n\n  nodes = createComponent(nodes, parent);\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes);\n  } else {\n    updateChildren(element, [nodes]);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode) {\n  console.assert(!!element);\n  //console.log('update', element, node);\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node), element);\n    return;\n  }\n  updateChildren(element, node.children);\n  updateProps(element, node.props);\n}\n\nfunction updateChildren(element, children) {\n  const len = Math.min(element.childNodes.length, children.length);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    const el = element.childNodes[i];\n    if (child instanceof HTMLElement) {\n      element.insertBefore(child, el);\n    }\n    else if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.textContent = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child);\n        } else {\n          const old = keyCache[key];\n          if (old) {\n            element.insertBefore(old, el);\n            element.appendChild(el);\n            update(element.childNodes[i], child);\n          } else {\n            element.insertBefore(create(child), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (children.length > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i]));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg = false): Element {\n  console.assert(node !== null && node !== undefined);\n  // console.log('create', node, typeof node);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props);\n\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}) {\n  console.assert(!!element);\n  // console.log('updateProps', element, props);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      for (const s in value) {\n        if (element.style[s] !== value[s]) element.style[s] = value[s];\n      }\n    } else if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'id' || name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n      element instanceof SVGElement) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n        element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?, shadow?, history?, global_event?: boolean;\n  observedAttributes?: string[]\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    return { ...options }['observedAttributes'];\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = { render: true, shadow: false, ...options };\n      this._shadowRoot = opts.shadow ?\n        this.attachShadow({ mode: 'open' }) : this;\n      const props = {}\n      Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n      const children = this.children ? Array.from(this.children) : [];\n      children.forEach(el => el.parentElement.removeChild(el));\n      this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n      this._component.mounted && this._component.mounted(props, children);\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n    }\n  }\n\n  disconnectedCallback() {\n    this._component.unmount();\n    this._component = null;\n  }\n\n  attributeChangedCallback(...args) {\n    this._component && this._component.run('attributeChanged', ...args);\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = { ...component['state'] };\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private _view(state, p = null) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = p ? this.view(state, p) : this.view(state);\r\n    app.createElement = h;\r\n    return html;\r\n  }\r\n\r\n  private renderState(state: T) {\r\n    if (!this.view) return;\r\n    const html = this._view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          const observer = new MutationObserver(changes => {\r\n            const { removedNodes, oldValue } = changes[0];\r\n            if (oldValue === this.tracking_id || Array.from(removedNodes).indexOf(el) >= 0) {\r\n              this.unload(this.state);\r\n              observer.disconnect();\r\n            }\r\n          });\r\n          if (el.parentNode) observer.observe(el.parentNode, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    this.render(el, html);\r\n    if (this.rendered) (this.rendered(this.state));\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null,\r\n    options: { render?: boolean, history?, global_event?: boolean } = { render: true }): Component<T> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: { render?: boolean, history?, global_event?: boolean}) {\r\n\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n    this.add_actions();\r\n    if (this.state === undefined) this.state = this['model'] != null ? this['model'] : {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n    if (app['debug']) {\r\n      const id = typeof element === 'string' ? element : element.id;\r\n      componentCache[id] = componentCache[id] || [];\r\n      componentCache[id].push(this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this. _global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: { history?, rendered?: (state: T) => void}): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n}\n\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E=any>(element?: HTMLElement | string, model?: T,  view?: View<T>, update?: Update<T, E>,\n  options?: { history?, rendered?: (state: T) => void }) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, EventOptions, ActionOptions }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n;(function(root) {\n'use strict';\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  nptable: noop,\n  table: noop,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\nblock.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\nblock.item = edit(block.item, 'gm')\n  .replace(/bull/g, block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} +')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n  table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n});\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n  fences: noop, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = Object.create(null);\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.pedantic) {\n    this.rules = block.pedantic;\n  } else if (this.options.gfm) {\n    this.rules = block.gfm;\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  src = src.replace(/^ +$/gm, '');\n  var next,\n      loose,\n      cap,\n      bull,\n      b,\n      item,\n      listStart,\n      listItems,\n      t,\n      space,\n      i,\n      tag,\n      l,\n      isordered,\n      istask,\n      ischecked;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      var lastToken = this.tokens[this.tokens.length - 1];\n      src = src.substring(cap[0].length);\n      // An indented code block cannot interrupt a paragraph.\n      if (lastToken && lastToken.type === 'paragraph') {\n        lastToken.text += '\\n' + cap[0].trimRight();\n      } else {\n        cap = cap[0].replace(/^ {4}/gm, '');\n        this.tokens.push({\n          type: 'code',\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic\n            ? rtrim(cap, '\\n')\n            : cap\n        });\n      }\n      continue;\n    }\n\n    // fences\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text: cap[3] || ''\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (cap = this.rules.nptable.exec(src)) {\n      item = {\n        type: 'table',\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        src = src.substring(cap[0].length);\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = splitCells(item.cells[i], item.header.length);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n      isordered = bull.length > 1;\n\n      listStart = {\n        type: 'list_start',\n        ordered: isordered,\n        start: isordered ? +bull : '',\n        loose: false\n      };\n\n      this.tokens.push(listStart);\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      listItems = [];\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull.length > 1 ? b.length === 1\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          listStart.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        t = {\n          type: 'list_item_start',\n          task: istask,\n          checked: ischecked,\n          loose: loose\n        };\n\n        listItems.push(t);\n        this.tokens.push(t);\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      if (listStart.loose) {\n        l = listItems.length;\n        i = 0;\n        for (; i < l; i++) {\n          listItems[i].loose = true;\n        }\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      if (!this.tokens.links[tag]) {\n        this.tokens.links[tag] = {\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n      continue;\n    }\n\n    // table (gfm)\n    if (cap = this.rules.table.exec(src)) {\n      item = {\n        type: 'table',\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        src = src.substring(cap[0].length);\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = splitCells(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noop,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n  em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noop,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n};\n\n// list of punctuation marks from common mark spec\n// without ` and ] to workaround Rule 17 (inline code blocks/links)\ninline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\ninline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', block._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer();\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  } else if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = '',\n      link,\n      text,\n      href,\n      title,\n      cap,\n      prevCapZero;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(cap[1]);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.inRawBlock = true;\n      } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.inRawBlock = false;\n      }\n\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? this.options.sanitizer\n          ? this.options.sanitizer(cap[0])\n          : escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      var lastParenIndex = findClosingBracket(cap[2], '()');\n      if (lastParenIndex > -1) {\n        var linkLen = 4 + cap[1].length + lastParenIndex;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      href = cap[2];\n      if (this.options.pedantic) {\n        link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      out += this.outputLink(cap, {\n        href: InlineLexer.escapes(href),\n        title: InlineLexer.escapes(title)\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2].trim(), true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = escape(this.mangle(cap[1]));\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      if (cap[2] === '@') {\n        text = escape(cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      src = src.substring(cap[0].length);\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (this.inRawBlock) {\n        out += this.renderer.text(this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]);\n      } else {\n        out += this.renderer.text(escape(this.smartypants(cap[0])));\n      }\n      continue;\n    }\n\n    if (src) {\n      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\nInlineLexer.escapes = function(text) {\n  return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = link.href,\n      title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  if (!this.options.mangle) return text;\n  var out = '',\n      l = text.length,\n      i = 0,\n      ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || marked.defaults;\n}\n\nRenderer.prototype.code = function(code, infostring, escaped) {\n  var lang = (infostring || '').match(/\\S*/)[0];\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw, slugger) {\n  if (this.options.headerIds) {\n    return '<h'\n      + level\n      + ' id=\"'\n      + this.options.headerPrefix\n      + slugger.slug(raw)\n      + '\">'\n      + text\n      + '</h'\n      + level\n      + '>\\n';\n  }\n  // ignore IDs\n  return '<h' + level + '>' + text + '</h' + level + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered, start) {\n  var type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n  return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.checkbox = function(checked) {\n  return '<input '\n    + (checked ? 'checked=\"\" ' : '')\n    + 'disabled=\"\" type=\"checkbox\"'\n    + (this.options.xhtml ? ' /' : '')\n    + '> ';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  if (body) body = '<tbody>' + body + '</tbody>';\n\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + body\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' align=\"' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n  if (href === null) {\n    return text;\n  }\n  var out = '<a href=\"' + escape(href) + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n  if (href === null) {\n    return text;\n  }\n\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += this.options.xhtml ? '/>' : '>';\n  return out;\n};\n\nRenderer.prototype.text = function(text) {\n  return text;\n};\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\n\nfunction TextRenderer() {}\n\n// no need for block level renderers\n\nTextRenderer.prototype.strong =\nTextRenderer.prototype.em =\nTextRenderer.prototype.codespan =\nTextRenderer.prototype.del =\nTextRenderer.prototype.text = function(text) {\n  return text;\n};\n\nTextRenderer.prototype.link =\nTextRenderer.prototype.image = function(href, title, text) {\n  return '' + text;\n};\n\nTextRenderer.prototype.br = function() {\n  return '';\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer();\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n  this.slugger = new Slugger();\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options) {\n  var parser = new Parser(options);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options);\n  // use an InlineLexer with a TextRenderer to extract pure text\n  this.inlineText = new InlineLexer(\n    src.links,\n    merge({}, this.options, { renderer: new TextRenderer() })\n  );\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  this.token = this.tokens.pop();\n  return this.token;\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        unescape(this.inlineText.output(this.token.text)),\n        this.slugger);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = '',\n          body = '',\n          i,\n          row,\n          cell,\n          j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      body = '';\n      var ordered = this.token.ordered,\n          start = this.token.start;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered, start);\n    }\n    case 'list_item_start': {\n      body = '';\n      var loose = this.token.loose;\n      var checked = this.token.checked;\n      var task = this.token.task;\n\n      if (this.token.task) {\n        body += this.renderer.checkbox(checked);\n      }\n\n      while (this.next().type !== 'list_item_end') {\n        body += !loose && this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n      return this.renderer.listitem(body, task, checked);\n    }\n    case 'html': {\n      // TODO parse inline content if parameter markdown=1\n      return this.renderer.html(this.token.text);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n    default: {\n      var errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n      if (this.options.silent) {\n        console.log(errMsg);\n      } else {\n        throw new Error(errMsg);\n      }\n    }\n  }\n};\n\n/**\n * Slugger generates header id\n */\n\nfunction Slugger() {\n  this.seen = {};\n}\n\n/**\n * Convert string to unique id\n */\n\nSlugger.prototype.slug = function(value) {\n  var slug = value\n    .toLowerCase()\n    .trim()\n    .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n    .replace(/\\s/g, '-');\n\n  if (this.seen.hasOwnProperty(slug)) {\n    var originalSlug = slug;\n    do {\n      this.seen[originalSlug]++;\n      slug = originalSlug + '-' + this.seen[originalSlug];\n    } while (this.seen.hasOwnProperty(slug));\n  }\n  this.seen[slug] = 0;\n\n  return slug;\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  if (encode) {\n    if (escape.escapeTest.test(html)) {\n      return html.replace(escape.escapeReplace, function(ch) { return escape.replacements[ch]; });\n    }\n  } else {\n    if (escape.escapeTestNoEncode.test(html)) {\n      return html.replace(escape.escapeReplaceNoEncode, function(ch) { return escape.replacements[ch]; });\n    }\n  }\n\n  return html;\n}\n\nescape.escapeTest = /[&<>\"']/;\nescape.escapeReplace = /[&<>\"']/g;\nescape.replacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\nescape.escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nescape.escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  return {\n    replace: function(name, val) {\n      val = val.source || val;\n      val = val.replace(/(^|[^\\[])\\^/g, '$1');\n      regex = regex.replace(name, val);\n      return this;\n    },\n    getRegex: function() {\n      return new RegExp(regex, opt);\n    }\n  };\n}\n\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (/^[^:]+:\\/*[^/]*$/.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n\n  if (href.slice(0, 2) === '//') {\n    return base.replace(/:[\\s\\S]*/, ':') + href;\n  } else if (href.charAt(0) === '/') {\n    return base.replace(/(:\\/*[^/]*)[\\s\\S]*/, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\nvar baseUrls = {};\nvar originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1,\n      target,\n      key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  var row = tableRow.replace(/\\|/g, function(match, offset, str) {\n        var escaped = false,\n            curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n        if (escaped) {\n          // odd number of slashes means | is escaped\n          // so we leave it alone\n          return '|';\n        } else {\n          // add space before unescaped |\n          return ' |';\n        }\n      }),\n      cells = row.split(/ \\|/),\n      i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  if (str.length === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  var suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < str.length) {\n    var currChar = str.charAt(str.length - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, str.length - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  var level = 0;\n  for (var i = 0; i < str.length; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    var highlight = opt.highlight,\n        tokens,\n        pending,\n        i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    checkSanitizeDeprecation(opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.getDefaults = function() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: new Renderer(),\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    xhtml: false\n  };\n};\n\nmarked.defaults = marked.getDefaults();\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  root.marked = marked;\n}\n})(this || (typeof window !== 'undefined' ? window : global));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import app, { Component, on } from 'apprun';\n\nclass HeaderComponent extends Component {\n  state = {};\n  view = state => {\n    const user = state.user;\n    return (\n      <ul class=\"nav navbar-nav pull-xs-right\">\n        <li class=\"nav-item\">\n          <a class=\"nav-link active\" href=\"#/\">\n            Home\n          </a>\n        </li>\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/editor\">\n              <i class=\"ion-compose\"></i>&nbsp;New Post\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/settings\">\n              <i class=\"ion-gear-a\"></i>&nbsp;Settings\n            </a>\n          </li>\n        )}\n        {!user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/login\">\n              Sign In\n            </a>\n          </li>\n        )}\n        {!user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/register\">\n              Sign Up\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href={`#/profile/${user.username}`}>\n              {user.username}\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/logout\">\n              Sign Out\n            </a>\n          </li>\n        )}\n      </ul>\n    );\n  };\n\n  @on('/set-user') setUser = (state, user) => ({ ...state, user });\n}\n\nexport default new HeaderComponent().start('header');\n","declare var defaultBasePath;\n\nlet access_token: string =\n  (window && window.localStorage && window.localStorage.getItem('jwt')) || '';\nexport function getToken() {\n  return access_token;\n}\n\nexport function setToken(token: string) {\n  access_token = token;\n  if (!window.localStorage) return;\n  if (token) window.localStorage.setItem('jwt', token);\n  else window.localStorage.removeItem('jwt');\n}\n\nexport async function fetchAsync(\n  method: 'GET' | 'POST' | 'DELETE' | 'PUT',\n  url: string,\n  body?: any\n) {\n  const headers = { 'Content-Type': 'application/json; charset=utf-8' };\n  if (access_token) headers['Authorization'] = `Token ${access_token}`;\n  const response = await window['fetch'](`${defaultBasePath}${url}`, {\n    method,\n    headers,\n    body: body && JSON.stringify(body)\n  });\n  if (response.status === 401) {\n    setToken(null);\n    throw new Error('401');\n  }\n  const result = await response.json();\n  if (!response.ok) throw result;\n  return result;\n}\n\nexport function get<T>(url: string): Promise<T> {\n  return fetchAsync('GET', url);\n}\n\nexport function post<T>(url: string, body?: any): Promise<T> {\n  return fetchAsync('POST', url, body);\n}\n\nexport function del(url: string) {\n  return fetchAsync('DELETE', url);\n}\n\nexport function put(url: string, body?: any) {\n  return fetchAsync('PUT', url, body);\n}\nexport function toQueryString(obj) {\n  const parts = [];\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      parts.push(encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]));\n    }\n  }\n  return parts.join('&');\n}\n\nexport function serializeObject<T>(form) {\n  let obj = {};\n  if (typeof form == 'object' && form.nodeName == 'FORM') {\n    for (let i = 0; i < form.elements.length; i++) {\n      const field = form.elements[i];\n      if (\n        field.name &&\n        field.type != 'file' &&\n        field.type != 'reset' &&\n        field.type != 'submit' &&\n        field.type != 'button'\n      ) {\n        if (field.type == 'select-multiple') {\n          obj[field.name] = '';\n          let tempvalue = '';\n          for (let j = 0; j < form.elements[i].options.length; j++) {\n            if (field.options[j].selected) tempvalue += field.options[j].value + ';';\n          }\n          if (tempvalue.charAt(tempvalue.length - 1) === ';')\n            obj[field.name] = tempvalue.substring(0, tempvalue.length - 1);\n        } else if ((field.type != 'checkbox' && field.type != 'radio') || field.checked) {\n          obj[field.name] = field.value;\n        }\n      }\n    }\n  }\n  return obj as T;\n}\n","import app from 'apprun';\r\n\r\n// Conduit API\r\nwindow['defaultBasePath'] = 'https://conduit.productionready.io/api';\r\n\r\nimport { toQueryString, serializeObject, getToken, setToken, get, post, del, put } from './fetch';\r\nexport { toQueryString, serializeObject };\r\nimport { IUser, IProfile, IArticle, IComment } from './models';\r\n\r\nexport interface IAuthResponse {\r\n  user: IUser;\r\n}\r\n\r\nexport interface ITags {\r\n  tags: Array<string>;\r\n}\r\n\r\nexport interface IFeed {\r\n  articles: Array<IArticle>;\r\n  articlesCount: number;\r\n}\r\n\r\nexport interface IArticlesRequest {\r\n  tag?: string;\r\n  author?: string;\r\n  favorited?: string;\r\n  limit: number;\r\n  offset: number;\r\n}\r\n\r\nexport interface INewArticle {\r\n  title: string;\r\n  description: string;\r\n  body: string;\r\n  tagList: Array<string>;\r\n}\r\n\r\nexport interface IArticlesResponse {\r\n  article: IArticle;\r\n}\r\n\r\nexport interface ICommentsResponse {\r\n  comments: Array<IComment>;\r\n}\r\n\r\nexport interface IProfileResponse {\r\n  profile: IProfile;\r\n}\r\n\r\nexport const tags = {\r\n  all: () => get<ITags>('/tags')\r\n};\r\n\r\nexport const auth = {\r\n  current: () => (getToken() ? get<IAuthResponse>('/user') : null),\r\n  signIn: (user: { email: string; password: string }) =>\r\n    post<IAuthResponse>('/users/login', { user }),\r\n  register: (user: { username: string; email: string; password: string }) =>\r\n    post<IAuthResponse>('/users', { user }),\r\n  save: user => put('/user', { user }),\r\n  authorized: (): boolean => (app['user'] ? true : app.run('#/login') && false) // app.run returns true if found event handlers\r\n};\r\n\r\nexport const articles = {\r\n  search: (request: IArticlesRequest) => get<IFeed>(`/articles?${toQueryString(request)}`),\r\n  feed: (request: { limit: number; offset: number }) =>\r\n    get<IFeed>(`/articles/feed?${toQueryString(request)}`),\r\n  get: (slug: string) => get<IArticlesResponse>(`/articles/${slug}`),\r\n  delete: (slug: string) => del(`/articles/${slug}`),\r\n  favorite: (slug: string) => post(`/articles/${slug}/favorite`),\r\n  unfavorite: (slug: string) => del(`/articles/${slug}/favorite`),\r\n  update: (article: IArticle) => put(`/articles/${article.slug}`, { article }),\r\n  create: (article: INewArticle) => post<IArticlesResponse>('/articles', { article })\r\n};\r\n\r\nexport const comments = {\r\n  create: (slug: string, comment: { body: string }) =>\r\n    post(`/articles/${slug}/comments`, { comment }),\r\n  delete: (slug: string, commentId: string) => del(`/articles/${slug}/comments/${commentId}`),\r\n  forArticle: (slug: string) => get<ICommentsResponse>(`/articles/${slug}/comments`)\r\n};\r\n\r\nexport const profile = {\r\n  get: (username: string) => get<IProfileResponse>(`/profiles/${username}`),\r\n  follow: (username: string) => post<IProfileResponse>(`/profiles/${username}/follow`),\r\n  unfollow: (username: string) => del(`/profiles/${username}/follow`)\r\n};\r\n\r\napp.on('/get-user', async () => {\r\n  try {\r\n    const current = await auth.current();\r\n    if (current) app.run('/set-user', current.user);\r\n  } catch {\r\n    setToken(null);\r\n    document.location.reload(true);\r\n  }\r\n});\r\n\r\napp.on('/set-user', user => {\r\n  app['user'] = user;\r\n  setToken(user ? user.token : null);\r\n});\r\n\r\napp.on('/toggle-follow', async (author: IProfile, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = author.following\r\n    ? await profile.unfollow(author.username)\r\n    : await profile.follow(author.username);\r\n  component.run('update-follow', result.profile);\r\n});\r\n\r\napp.on('/toggle-fav-article', async (article: IArticle, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = article.favorited\r\n    ? await articles.unfavorite(article.slug)\r\n    : await articles.favorite(article.slug);\r\n  component.run('update-article', result.article);\r\n});\r\n","import app from 'apprun';\nimport { IArticle } from '../models';\n\nfunction Article(props) {\n  const article = props.article as IArticle;\n  const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\n  return (\n    <div class=\"article-preview\">\n      <div class=\"article-meta\">\n        <a href={article.author.image}>\n          <img src={article.author.image} />\n        </a>\n        <div class=\"info\">\n          <a href={`#/profile/${article.author.username}`} class=\"author\">\n            {article.author.username}\n          </a>\n          <span class=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\n        </div>\n        <button\n          class={`btn btn-sm pull-xs-right ${favClass}`}\n          onclick={e => app.run('toggle-fav-article', article, props.component)}>\n          <i class=\"ion-heart\"></i> {article.favoritesCount}\n        </button>\n      </div>\n      <a href={`#/article/${article.slug}`} class=\"preview-link\">\n        <h1>{article.title}</h1>\n        <p>{article.description}</p>\n        <span>Read more...</span>\n        <ul class=\"tag-list\">\n          {article.tagList.map(tag => (\n            <li class=\"tag-default tag-pill tag-outline\">\n              <a href={`#/tag/${tag}`}>{tag} </a>\n            </li>\n          ))}\n        </ul>\n      </a>\n    </div>\n  );\n}\n\nexport default function({ articles, component }: { articles: Array<IArticle>; component }) {\n  return articles.length ? (\n    articles.map(article => <Article article={article} component={component}></Article>)\n  ) : (\n    <div class=\"article-preview\">No articles are here... yet.</div>\n  );\n}\n","import app from 'apprun';\n\nexport default function({ max, selected, link }) {\n  const pages = new Array(max).fill(0);\n  return (\n    <nav>\n      <ul class=\"pagination\">\n        {pages.map((page, idx) => (\n          <li class={`page-item ${idx + 1 === selected ? 'active' : ''}`}>\n            <a href={`${link}/${idx + 1}`} class=\"page-link\">\n              {idx + 1}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, tags, articles } from '../api';\nimport { IArticle } from '../models';\nimport Articles from './article-list';\nimport Pages from './page-list';\n\nconst PAGE_SIZE = 10;\nconst Tag = ({ tag }) => (\n  <a href={`#/tag/${tag}/1`} class=\"tag-pill tag-default\">\n    {tag}\n  </a>\n);\n\ndeclare interface IState {\n  type: '' | 'feed' | 'tag';\n  articles: Array<IArticle>;\n  tags: Array<string>;\n  max: number;\n  page: number;\n}\n\nclass HomeComponent extends Component {\n  state: IState = {\n    type: '',\n    articles: [],\n    tags: [],\n    max: 1,\n    page: 1\n  };\n\n  view = state => {\n    const tag = state.type === 'tag' && state.tag ? `/${state.tag}` : '';\n    return (\n      <div class=\"home-page\">\n        <div class=\"banner\">\n          <div class=\"container\">\n            <h1 class=\"logo-font\">conduit</h1>\n            <p>A place to share your knowledge.</p>\n          </div>\n        </div>\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-9\">\n              <div class=\"feed-toggle\">\n                <ul class=\"nav nav-pills outline-active\">\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${app['user'] ? '' : 'disabled'} ${\n                        state.type === 'feed' ? 'active' : ''\n                      }`}\n                      href=\"#/feed\">\n                      Your Feed\n                    </a>\n                  </li>\n                  <li class=\"nav-item\">\n                    <a class={`nav-link ${state.type === '' ? 'active' : ''}`} href=\"#/\">\n                      Global Feed\n                    </a>\n                  </li>\n                  {state.tag ? (\n                    <li class=\"nav-item\">\n                      <a\n                        class={`nav-link ${state.type === 'tag' ? 'active' : ''}`}\n                        href={`#/tag/${state.tag}`}>\n                        #{state.tag}\n                      </a>\n                    </li>\n                  ) : (\n                    ''\n                  )}\n                </ul>\n              </div>\n              <Articles articles={state.articles} component={this} />\n              <Pages\n                max={Math.floor(state.max / PAGE_SIZE)}\n                selected={state.page}\n                link={`#/${state.type}${tag}`}\n              />\n            </div>\n            <div class=\"col-md-3\">\n              <div class=\"sidebar\">\n                <p>Popular Tags</p>\n                <div class=\"tag-list\">\n                  {state.tags.map(tag => (\n                    <Tag tag={tag} />\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  updateState = async (state, type: '' | 'feed' | 'tag', page, tag?: string) => {\n    try {\n      let tagList = state.tags.length ? { tags: state.tags } : await tags.all();\n      page = parseInt(page) || 1;\n      tag = tag || state.tag;\n      const limit = PAGE_SIZE;\n      const offset = (page - 1) * PAGE_SIZE;\n      let feed;\n      switch (type) {\n        case 'feed':\n          if (!auth.authorized()) return { ...state, articles: [], max: 0 };\n          feed = await articles.feed({ limit, offset });\n          break;\n        case 'tag':\n          feed = await articles.search({ tag, limit, offset });\n          break;\n        default:\n          feed = await articles.search({ limit, offset });\n          break;\n      }\n      page = Math.min(page, Math.floor(feed.articlesCount / PAGE_SIZE) + 1);\n      return {\n        ...state,\n        tags: tagList.tags,\n        type,\n        page,\n        tag,\n        articles: feed.articles,\n        max: feed.articlesCount\n      };\n    } catch ({ errors }) {\n      return { ...state, errors, articles: [], max: 0 };\n    }\n  };\n\n  @on('#/') root = async (state, page) => await this.updateState(state, '', page);\n\n  @on('#/feed') feed = async (state, page) => await this.updateState(state, 'feed', page);\n\n  @on('#/tag') tag = async (state, tag, page) => await this.updateState(state, 'tag', page, tag);\n\n  @on('update-article') updateArticle = (state, article) => {\n    state.articles = state.articles.map(a => {\n      return a.slug === article.slug ? article : a;\n    });\n    return state;\n  };\n}\n\nexport default new HomeComponent().mount('my-app');\n","import app from 'apprun';\n\nexport default function({ errors }) {\n  return (\n    <ul class=\"error-messages\">\n      {Object.keys(errors).map(key => (\n        <li>{`${key} ${errors[key]}`}</li>\n      ))}\n    </ul>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, serializeObject } from '../api';\n\nimport Errors from './error-list';\n\nclass SigninComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!state || state instanceof Promise) return;\n    return (\n      <div class=\"auth-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              <h1 class=\"text-xs-center\">Sign In</h1>\n              <p class=\"text-xs-center\">\n                <a href=\"#/register\">Need an account?</a>\n              </p>\n\n              {state.errors && <Errors errors={state.errors} />}\n\n              <form onsubmit={e => this.run('sign-in', e)}>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\">Sign In</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/login') login = state => ({ ...state, messages: [], returnTo: document.location.hash });\n\n  @on('#/logout') logout = state => {\n    app.run('/set-user', null);\n    document.location.hash = '#/';\n  };\n\n  @on('sign-in') signIn = async (state, e) => {\n    try {\n      e.preventDefault();\n      const session = await auth.signIn(serializeObject(e.target));\n      app.run('/set-user', session.user);\n      const returnTo: string = (state.returnTo || '').replace(/\\#\\/login\\/?/, '');\n      if (!returnTo) document.location.hash = '#/feed';\n      else {\n        app.run('route', returnTo);\n        history.pushState(null, null, returnTo);\n      }\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new SigninComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { auth, serializeObject } from '../api';\nimport Errors from './error-list';\n\nclass RegisterComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!state || state instanceof Promise) return;\n    return (\n      <div class=\"auth-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              <h1 class=\"text-xs-center\">Sign Up</h1>\n              <p class=\"text-xs-center\">\n                <a href=\"#/login\">Have an account?</a>\n              </p>\n\n              {state.errors && <Errors errors={state.errors} />}\n\n              <form onsubmit={e => this.run('register', e)}>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Your Name\"\n                    name=\"username\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\">Sign up</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/register') register = (state, messages) => ({ ...state, messages });\n\n  @on('register') submitRegistration = async (state, e) => {\n    try {\n      e.preventDefault();\n      const session = await auth.register(serializeObject(e.target));\n      app.run('#user', session.user);\n      app.run('route', '#/');\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new RegisterComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { IProfile } from '../models';\nimport { auth, articles, profile } from '../api';\nimport Articles from './article-list';\nimport Pages from './page-list';\n\nconst PAGE_SIZE = 10;\n\nclass ProfileComponent extends Component {\n  state = {\n    name: '',\n    type: 'articles',\n    articles: [],\n    page: 1\n  };\n\n  view = state => {\n    const profile = state.profile as IProfile;\n    if (!profile) return;\n    return (\n      <div class=\"profile-page\">\n        <div class=\"user-info\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"col-xs-12 col-md-10 offset-md-1\">\n                <img src={profile.image} class=\"user-img\" />\n                <h4>{profile.username}</h4>\n                <p>{profile.bio}</p>\n                <button\n                  class=\"btn btn-sm btn-outline-secondary action-btn\"\n                  onclick={e => app.run('/toggle-follow', profile, this)}>\n                  {profile.following ? (\n                    <span>\n                      <i class=\"ion-minus-round\"></i> Unfollow {profile.username}\n                    </span>\n                  ) : (\n                    <span>\n                      <i class=\"ion-plus-round\"></i> Follow {profile.username}\n                    </span>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-xs-12 col-md-10 offset-md-1\">\n              <div class=\"articles-toggle\">\n                <ul class=\"nav nav-pills outline-active\">\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${state.type === 'articles' ? 'active' : ''}`}\n                      href={`#/profile/${profile.username}/articles/1`}>\n                      My Articles\n                    </a>\n                  </li>\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${state.type === 'favorites' ? 'active' : ''}`}\n                      href={`#/profile/${profile.username}/favorites/1`}>\n                      Favorited Articles\n                    </a>\n                  </li>\n                </ul>\n              </div>\n              <Articles articles={state.articles} component={this} />\n              <Pages\n                max={Math.floor(state.max / PAGE_SIZE)}\n                selected={state.page}\n                link={`#/profile/${state.profile.username}/${state.type}`}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  updateState = async (state, name, type, page) => {\n    name = decodeURIComponent(name || state.name);\n    type = type || state.type;\n    page = parseInt(page) || state.page;\n    let newState = state;\n    if (name !== state.name) {\n      const profileResult = await profile.get(name);\n      newState = { ...newState, profile: profileResult.profile };\n    }\n    if (name !== state.name || type !== state.type || page !== state.page) {\n      const limit = PAGE_SIZE;\n      const offset = (page - 1) * limit;\n      const articleResult =\n        type === 'favorites'\n          ? await articles.search({ favorited: name, offset, limit })\n          : await articles.search({ author: name, offset, limit });\n      newState = {\n        ...newState,\n        name,\n        type,\n        page,\n        articles: articleResult.articles,\n        max: articleResult.articlesCount\n      };\n    }\n    return newState;\n  };\n\n  @on('#/profile') root = (state, name, type, page) => this.updateState(state, name, type, page);\n\n  @on('update-article') updateArticle = (state, article) => {\n    state.articles = state.articles.map(a => {\n      return a.slug === article.slug ? article : a;\n    });\n    return state;\n  };\n\n  @on('update-follow') updateFollow = (state, profile) => ({ ...state, profile });\n}\n\nexport default new ProfileComponent().mount('my-app');\n","import app from 'apprun';\n\nexport default function({ title, body, ok, cancel, onOK, onCancel }) {\n  return (\n    <div class=\"modal-open\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">\n              {title}\n              <button\n                type=\"button\"\n                class=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                onclick={e => onCancel(e)}>\n                <span aria-hidden=\"true\"></span>\n              </button>\n            </h5>\n          </div>\n          <div class=\"modal-body\">\n            <p>{body}</p>\n          </div>\n          <div class=\"modal-footer\">\n            {cancel && (\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n                onclick={e => onCancel(e)}>\n                {cancel}\n              </button>\n            )}\n            &nbsp;&nbsp;\n            <button type=\"button\" class=\"btn btn-primary\" onclick={e => onOK(e)}>\n              {ok}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-backdrop show\" onclick={e => onCancel(e)}></div>\n    </div>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { serializeObject, auth } from '../api';\nimport Errors from './error-list';\nimport Modal from './modal';\n\nclass SettingsComponent extends Component {\n  state = {};\n\n  view = state => {\n    const user = state.user;\n    if (!user) return;\n    return (\n      <div class=\"settings-page\">\n        {state.showModal ? (\n          <Modal\n            title=\"Confirmation\"\n            body=\"Your settings has been updated successfully.\"\n            ok=\"OK\"\n            cancel=\"Cancel\"\n            onOK={e => this.run('ok', e)}\n            onCancel={e => this.run('cancel', e)}\n          />\n        ) : (\n          ''\n        )}\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              {state.errors && <Errors errors={state.errors} />}\n              <h1 class=\"text-xs-center\">Your Settings</h1>\n              <form onsubmit={e => this.run('submit-settings', e)}>\n                <fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control\"\n                      type=\"text\"\n                      placeholder=\"URL of profile picture\"\n                      name=\"image\"\n                      value={user.image}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Your Name\"\n                      name=\"username\"\n                      value={user.username}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <textarea\n                      class=\"form-control form-control-lg\"\n                      rows=\"8\"\n                      placeholder=\"Short bio about you\"\n                      name=\"bio\">\n                      {user.bio}\n                    </textarea>\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Email\"\n                      name=\"email\"\n                      value={user.email}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"password\"\n                      placeholder=\"Password\"\n                      name=\"password\"\n                      value={user.password}\n                    />\n                  </fieldset>\n                  <button class=\"btn btn-lg btn-primary pull-xs-right\">Update Settings</button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/settings') settings = state => {\n    if (!auth.authorized()) return;\n    return { user: app['user'] };\n  };\n\n  @on('submit-settings') submitSettings = async (state, e) => {\n    try {\n      e.preventDefault();\n      const user = serializeObject<any>(e.target);\n      const result = await auth.save(user);\n      app.run('#user', result.user);\n      return { showModal: true };\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n\n  @on('ok, cancel') ok = state => {\n    return { showModel: false };\n  };\n}\n\nexport default new SettingsComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { serializeObject, articles, auth } from '../api';\nimport Errors from './error-list';\n\nclass EditorComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!app['user'] || !state.article) return;\n    const article = state.article;\n    return (\n      <div class=\"editor-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-10 offset-md-1 col-xs-12\">\n              {state.errors && <Errors errors={state.errors} />}\n              <form onsubmit={e => this.run('submit-article', e)}>\n                {article.slug && <input type=\"hidden\" name=\"slug\" value={article.slug} />}\n                <fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control form-control-lg\"\n                      placeholder=\"Article Title\"\n                      name=\"title\"\n                      value={article.title}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"What's this article about?\"\n                      name=\"description\"\n                      value={article.description}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <textarea\n                      class=\"form-control\"\n                      rows=\"8\"\n                      placeholder=\"Write your article (in markdown)\"\n                      name=\"body\">\n                      {article.body}\n                    </textarea>\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"Enter tags\"\n                      name=\"tags\"\n                      value={article.tagList.join(', ')}\n                    />\n                    <div class=\"tag-list\"></div>\n                  </fieldset>\n                  <button class=\"btn btn-lg pull-xs-right btn-primary\" type=\"submit\">\n                    Publish Article\n                  </button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/editor') root = async (state, slug) => {\n    if (!auth.authorized()) return;\n    let article;\n    if (slug) {\n      const result = await articles.get(slug);\n      article = result.article;\n    }\n    article = article || { title: '', description: '', body: '', tagList: [] };\n    return { article };\n  };\n\n  @on('submit-article') submitArticle = async (state, e) => {\n    try {\n      e.preventDefault();\n      const article = serializeObject<any>(e.target);\n      article.tagList = article.tags.split(',');\n      const result = article.slug ? await articles.update(article) : await articles.create(article);\n      document.location.hash = `#/article/${result.article.slug}`;\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new EditorComponent().mount('my-app');\n","import app from 'apprun';\nimport { IComment, IProfile } from '../models';\nimport * as marked from 'marked';\n\nfunction Comment({ comment }: { comment: IComment }) {\n  return (\n    <div class=\"card\">\n      <div class=\"card-block\">\n        <p class=\"card-text\">\n          <p>{`_html:${marked(comment.body, { sanitize: true })}`}</p>\n        </p>\n      </div>\n      <div class=\"card-footer\">\n        <a class=\"comment-author\">\n          <img src={comment.author.image} class=\"comment-author-img\" />\n        </a>\n        &nbsp;\n        <a class=\"comment-author\" href={`#/profile/${comment.author.username}`}>\n          {comment.author.username}\n        </a>\n        <span class=\"date-posted\">{new Date(comment.createdAt).toLocaleString()}</span>\n        {app['user'] && app['user'].username === comment.author.username && (\n          <span class=\"mod-options\">\n            <i class=\"ion-trash-a\" onclick={e => app.run('/delete-comment', comment)}></i>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function({ comments }: { comments: Array<IComment> }) {\n  const user = app['user'] as IProfile;\n  return (\n    <div class=\"row\">\n      <div class=\"col-xs-12 col-md-8 offset-md-2\">\n        {!user ? (\n          <p>\n            <a href={`#/login/${document.location.hash}`}>Sign in</a> or&nbsp;\n            <a href=\"#/register\">sign up</a> to add comments on this article.\n          </p>\n        ) : (\n          <form class=\"card comment-form\" onsubmit={e => app.run('/new-comment', e)}>\n            <div class=\"card-block\">\n              <textarea\n                class=\"form-control\"\n                placeholder=\"Write a comment...\"\n                rows=\"3\"\n                name=\"comment\"></textarea>\n            </div>\n            <div class=\"card-footer\">\n              {user.image ? (\n                <img src={user.image} class=\"comment-author-img\" />\n              ) : (\n                <span>@{user.username}</span>\n              )}\n              <button class=\"btn btn-sm btn-primary\" type=\"submit\">\n                Post Comment\n              </button>\n            </div>\n          </form>\n        )}\n        {comments.map(comment => (\n          <Comment comment={comment} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import app from 'apprun';\nimport { IArticle } from '../models';\n\nexport default function ArticleMeta({ article, component }: { article: IArticle; component }) {\n  const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\n  const followClass = article.author.following ? 'btn-secondary' : 'btn-outline-secondary';\n  return (\n    <div class=\"article-meta\">\n      <a href={article.author.image}>\n        <img src={article.author.image} />\n      </a>\n      <div class=\"info\">\n        <a href={`#/profile/${article.author.username}`} class=\"author\">\n          {article.author.username}\n        </a>\n        <span class=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\n      </div>\n\n      {app['user'] && app['user'].username === article.author.username ? (\n        <span>\n          <button\n            class=\"btn btn-sm btn-outline-secondary\"\n            onclick={e => component.run('edit-article', article)}>\n            <i class=\"ion-edit\"></i>&nbsp; Edit Article\n          </button>\n          &nbsp;&nbsp;\n          <button\n            class=\"btn btn-sm btn-outline-danger\"\n            onclick={e => component.run('delete-article', article)}>\n            <i class=\"ion-trash-o\"></i>&nbsp; Delete Article\n          </button>\n        </span>\n      ) : (\n        <span>\n          <button\n            class={`btn btn-sm ${followClass}`}\n            onclick={e => app.run('/toggle-follow', article.author, component)}>\n            {article.author.following ? (\n              <span>\n                <i class=\"ion-minus-round\"></i> Unfollow {article.author.username}\n              </span>\n            ) : (\n              <span>\n                <i class=\"ion-plus-round\"></i> Follow {article.author.username}\n              </span>\n            )}\n          </button>{' '}\n          &nbsp;&nbsp;\n          <button\n            class={`btn btn-sm ${favClass}`}\n            onclick={e => app.run('/toggle-fav-article', article, component)}>\n            <i class=\"ion-heart\"></i>\n            &nbsp; Favorite Post <span class=\"counter\">({article.favoritesCount})</span>\n          </button>\n        </span>\n      )}\n    </div>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, articles, comments } from '../api';\nimport { IArticle } from '../models';\nimport Comments from './comment-list';\nimport ArticleMeta from './article-meta';\nimport Modal from './modal';\nimport * as marked from 'marked';\n\nclass ArticleComponent extends Component {\n  state = {\n    article: null,\n    comments: []\n  };\n\n  view = state => {\n    const article = state.article as IArticle;\n    if (!article) return;\n    return (\n      <div class=\"article-page\">\n        {state.deleting && (\n          <Modal\n            title=\"Delete Article\"\n            body=\"Are you sure you want to delete this article?\"\n            ok=\"Delete\"\n            cancel=\"No\"\n            onOK={e => this.run('ok-delete-article', e)}\n            onCancel={e => this.run('cancel-delete-article', e)}\n          />\n        )}\n\n        <div class=\"banner\">\n          <div class=\"container\">\n            <h1>{article.title}</h1>\n            <ArticleMeta article={article} component={this} />\n          </div>\n        </div>\n\n        <div class=\"container page\">\n          <div class=\"row article-content\">\n            <div class=\"col-md-12\">\n              <p>{`_html:${marked(article.body, { sanitize: true })}`}</p>\n              <div class=\"tag-list\">\n                <br />\n                {article.tagList.map(tag => (\n                  <li class=\"tag-default tag-pill tag-outline\">\n                    <a href={`#/tag/${tag}`}>{tag} </a>\n                  </li>\n                ))}\n              </div>\n            </div>\n          </div>\n          <hr />\n          <div class=\"article-actions\">\n            <ArticleMeta article={article} component={this} />\n          </div>\n          <Comments comments={state.comments} />\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/article') root = async (state, slug) => {\n    let article = state.article as IArticle;\n    let _comments = state.comments;\n    if (!article || article.slug !== slug) {\n      const result = await articles.get(slug);\n      article = result.article;\n      const commentsResponse = await comments.forArticle(article.slug);\n      _comments = commentsResponse.comments;\n    }\n    return { ...state, article, comments: _comments };\n  };\n\n  @on('/new-comment') newComment = async (state, e) => {\n    try {\n      e.preventDefault();\n      const comment = e.target['comment'].value;\n      if (!comment) return;\n      await comments.create(state.article.slug, { body: comment });\n      const commentsResponse = await comments.forArticle(state.article.slug);\n      return { ...state, comments: commentsResponse.comments };\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n\n  @on('/delete-comment') deleteComment = async (state, comment) => {\n    await comments.delete(this.state.article.slug, comment.id);\n    const commentsResponse = await comments.forArticle(state.article.slug);\n    return { ...state, comments: commentsResponse.comments };\n  };\n\n  @on('update-article') updateArticle = (state, article) => ({\n    ...state,\n    article\n  });\n\n  @on('update-follow') updateFollow = (state, author) => {\n    state.article.author = author;\n    return state;\n  };\n\n  @on('edit-article') editArticle = (state, article) => {\n    document.location.hash = `#/editor/${article.slug}`;\n  };\n\n  @on('delete-article') deleteArticle = (state, article) => ({\n    ...state,\n    deleting: true\n  });\n\n  @on('ok-delete-article') okDelete = (state, e) => {\n    articles.delete(state.article.slug);\n    document.location.hash = '#/';\n    return { ...state, deleting: false };\n  };\n\n  @on('cancel-delete-article') cancelDelete = (state, article) => ({\n    ...state,\n    deleting: false\n  });\n}\n\nexport default new ArticleComponent().mount('my-app');\n","import app from 'apprun';\n\nimport './components/header';\nimport './components/home';\nimport './components/signin';\nimport './components/register';\nimport './components/profile';\nimport './components/settings';\nimport './components/editor';\nimport './components/article';\n\napp.on('#', (route, ...p) => {\n  app.run(`#/${route || ''}`, ...p);\n});\n\napp.run('/get-user');\n"],"sourceRoot":""}