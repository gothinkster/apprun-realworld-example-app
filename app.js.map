{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/app.ts","webpack:///../src/createComponent.tsx","webpack:///../src/vdom-my.ts","webpack:///../src/web-component.ts","webpack:///../src/decorator.ts","webpack:///../src/directive.ts","webpack:///../src/component.ts","webpack:///../src/router.ts","webpack:///../src/apprun.ts","webpack:///../src/vdom.ts","webpack:///./node_modules/marked/lib/marked.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./src/components/header.tsx","webpack:///./src/fetch.ts","webpack:///./src/api.ts","webpack:///./src/components/article-list.tsx","webpack:///./src/components/page-list.tsx","webpack:///./src/components/home.tsx","webpack:///./src/components/error-list.tsx","webpack:///./src/components/signin.tsx","webpack:///./src/components/register.tsx","webpack:///./src/components/profile.tsx","webpack:///./src/components/modal.tsx","webpack:///./src/components/settings.tsx","webpack:///./src/components/editor.tsx","webpack:///./src/components/comment-list.tsx","webpack:///./src/components/article-meta.tsx","webpack:///./src/components/article.tsx","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","App","[object Object]","this","_events","fn","options","push","subscribers","filter","sub","length","args","console","assert","delay","apply","once","on","_t","clearTimeout","setTimeout","app","root","self","global","_idx","ATTR_PROPS","collect","children","ch","forEach","Array","isArray","keyCache","updateElement","element","nodes","parent","createComponent","node","idx","map","child","vdom","getPrototypeOf","tag","__isAppRunComponent","props","id","Date","now","__componentCache","component","mount","mounted","state","Promise","view","_view","rendered","updateChildren","update","el","key1","nodeName","key2","toUpperCase","updateProps","parentNode","replaceChild","len","Math","min","childNodes","HTMLElement","insertBefore","textContent","nodeType","createText","old","appendChild","removeChild","lastChild","document","createDocumentFragment","indexOf","div","createElement","insertAdjacentHTML","substring","createTextNode","isSvg","SVGElement","JSON","stringify","createElementNS","oldProps","newProps","keys","style","cssText","startsWith","cname","replace","match","dataset","getAttribute","setAttribute","removeAttribute","customElement","componentClass","super","_component","observedAttributes","isConnected","opts","render","shadow","_shadowRoot","attachShadow","from","attributes","item","parentElement","run","unmount","customElements","define","Reflect","meta","WeakMap","metadataKey","metadataValue","target","has","set","events","toString","defineMetadata","getStateValue","setStateValue","setState","event","e","handler","type","checked","Number","multiple","selected","componentCache","components","REFRESH","Component","_history_idx","_history","history","h","directive","html","getElementById","tracking_attr","unload","tracking_id","valueOf","MutationObserver","observer","changes","removedNodes","oldValue","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","then","catch","err","error","_state","renderState","enable_history","callback","global_event","prev","_history_prev","next","_history_next","add_actions","_global_events","action","newState","actions","getMetadataKeys","getMetadata","all","act","split","trim","add_action","is_global_event","_app","_actions","off","route","url","rest","_","Error","Fragment","webComponent","start","model","NOOP","addEventListener","window","onpopstate","location","hash","block","newline","code","fences","hr","heading","blockquote","list","def","nptable","noop","table","lheading","_paragraph","text","Lexer","tokens","links","marked","defaults","rules","normal","pedantic","gfm","_label","_title","edit","getRegex","bullet","source","_tag","_comment","paragraph","merge","lex","src","token","top","loose","cap","bull","b","listStart","listItems","space","isordered","istask","ischecked","exec","lastToken","trimRight","codeBlockStyle","rtrim","lang","depth","header","splitCells","align","cells","test","ordered","RegExp","smartLists","slice","join","charAt","undefined","task","sanitize","pre","sanitizer","escape","toLowerCase","href","title","charCodeAt","inline","autolink","link","reflink","nolink","strong","em","br","del","InlineLexer","renderer","Renderer","breaks","TextRenderer","Parser","slugger","Slugger","seen","encode","escapeTest","escapeReplace","replacements","escapeTestNoEncode","escapeReplaceNoEncode","unescape","String","fromCharCode","parseInt","regex","opt","val","cleanUrl","base","prot","decodeURIComponent","originIndependentUrl","baseUrls","resolveUrl","encodeURI","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","output","prevCapZero","out","inLink","inRawBlock","lastParenIndex","findClosingBracket","linkLen","outputLink","escapes","codespan","mangle","smartypants","image","random","infostring","escaped","highlight","langPrefix","quote","level","raw","headerIds","headerPrefix","slug","xhtml","body","listitem","checkbox","tablerow","content","tablecell","flags","baseUrl","parse","inlineText","reverse","tok","pop","peek","parseText","row","cell","j","errMsg","silent","log","originalSlug","obj","arguments","tableRow","count","offset","str","curr","splice","invert","suffLen","currChar","substr","checkSanitizeDeprecation","warn","pending","done","message","setOptions","getDefaults","parser","lexer","inlineLexer","g","Function","__decorate","decorators","desc","getOwnPropertyDescriptor","decorate","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","result","user","className","username","setUser","access_token","localStorage","getItem","setToken","setItem","removeItem","fetchAsync","method","headers","response","defaultBasePath","status","json","ok","post","put","toQueryString","parts","encodeURIComponent","serializeObject","form","elements","field","tempvalue","tags","auth","current","signIn","register","save","authorized","search","request","feed","delete","favorite","unfavorite","article","comment","commentId","forArticle","follow","unfollow","Article","favClass","favorited","author","updatedAt","toLocaleString","onclick","favoritesCount","description","tagList","reload","following","profile","articles","max","pages","fill","page","PAGE_SIZE","Tag","floor","updateState","limit","articlesCount","errors","updateArticle","a","onsubmit","placeholder","login","messages","returnTo","logout","preventDefault","session","pushState","submitRegistration","bio","profileResult","articleResult","updateFollow","cancel","onOK","onCancel","role","showModal","rows","email","password","settings","submitSettings","showModel","submitArticle","Comment","createdAt","comments","ArticleMeta","followClass","deleting","_comments","newComment","commentsResponse","deleteComment","editArticle","deleteArticle","okDelete","cancelDelete"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","export class App {\n\n  private _events: Object;\n\n  public start;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: any = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn: fn, options: options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    let subscribers = this._events[name];\n    if (subscribers) {\n      subscribers = subscribers.filter((sub) => sub.fn !== fn);\n      if (subscribers.length) this._events[name] = subscribers;\n      else delete this._events[name]\n    }\n  }\n\n  run(name: string, ...args): number {\n    let subscribers = this._events[name];\n    console.assert(!!subscribers, 'No subscriber for event: ' + name);\n    if (subscribers) {\n      subscribers = subscribers.filter((sub) => {\n        const { fn, options } = sub;\n        if (options.delay) {\n          this.delay(name, fn, args, options);\n        } else {\n          fn.apply(this, args);\n        }\n        return !sub.options.once;\n      });\n      if (subscribers.length) this._events[name] = subscribers;\n      else delete this._events[name]\n    }\n\n    return subscribers ? subscribers.length : 0;\n  }\n\n  once(name: string, fn, options: any = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n    component['__eid'] = id;\n  } else {\n    id = component['__eid'];\n  }\n  component.mounted && component.mounted(props, children);\n  const state = component.state;\n  let vdom = '';\n  if (!(state instanceof Promise) && component.view) {\n    vdom = component._view(state, props);\n    component.rendered && setTimeout(() => component.rendered(state, props));\n  }\n  return <section {...props} id={id}>{vdom}</section>;\n}\n\nlet _idx = 0;\nexport default function createComponent(node, parent, idx = 0) {\n  if (idx === 0) _idx = 0;\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, _idx));\n  let vdom = node;\n  if (node && typeof (node.tag) === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent)\n    vdom = render(node, parent, _idx++);\n  if (vdom && Array.isArray(vdom.children))\n    vdom.children = vdom.children.map(child => createComponent(child, parent, _idx));\n  return vdom;\n }\n","import createComponent from './createComponent';\nimport { VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = {};\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VNode | VNode[], parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null) return;\n\n  nodes = createComponent(nodes, parent);\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes);\n  } else {\n    updateChildren(element, [nodes]);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode) {\n  console.assert(!!element);\n  //console.log('update', element, node);\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node), element);\n    return;\n  }\n  updateChildren(element, node.children);\n  updateProps(element, node.props);\n}\n\nfunction updateChildren(element, children) {\n  const len = Math.min(element.childNodes.length, children.length);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    const el = element.childNodes[i];\n    if (child instanceof HTMLElement) {\n      element.insertBefore(child, el);\n    }\n    else if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.textContent = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child);\n        } else {\n          const old = keyCache[key];\n          if (old) {\n            element.insertBefore(old, el);\n            element.appendChild(el);\n            update(element.childNodes[i], child);\n          } else {\n            element.insertBefore(create(child), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (children.length > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i]));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg = false): Element {\n  console.assert(node !== null && node !== undefined);\n  // console.log('create', node, typeof node);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props);\n\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}) {\n  console.assert(!!element);\n  // console.log('updateProps', element, props);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      for (const s in value) {\n        if (element.style[s] !== value[s]) element.style[s] = value[s];\n      }\n    } else if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'id' || name === 'class' || name.startsWith(\"role\") || name.indexOf(\"-\") > 0 ||\n      element instanceof SVGElement) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n        element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?, shadow?, history?, global_event?: boolean;\n  observedAttributes?: string[]\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    return { ...options }['observedAttributes'];\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = { render: true, shadow: false, ...options };\n      this._shadowRoot = opts.shadow ?\n        this.attachShadow({ mode: 'open' }) : this;\n      const props = {}\n      Array.from(this.attributes).forEach(item => props[item.name] = item.value);\n      const children = this.children ? Array.from(this.children) : [];\n      children.forEach(el => el.parentElement.removeChild(el));\n      this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n      this._component.mounted && this._component.mounted(props, children);\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n    }\n  }\n\n  disconnectedCallback() {\n    this._component.unmount();\n    this._component = null;\n  }\n\n  attributeChangedCallback(...args) {\n    this._component && this._component.run('attributeChanged', ...args);\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = { ...component['state'] };\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, EventOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private _view(state, p = null) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = p ? this.view(state, p) : this.view(state);\r\n    app.createElement = h;\r\n    return html;\r\n  }\r\n\r\n  private renderState(state: T) {\r\n    if (!this.view) return;\r\n    const html = this._view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          const observer = new MutationObserver(changes => {\r\n            const { removedNodes, oldValue } = changes[0];\r\n            if (oldValue === this.tracking_id || Array.from(removedNodes).indexOf(el) >= 0) {\r\n              this.unload(this.state);\r\n              observer.disconnect();\r\n            }\r\n          });\r\n          if (el.parentNode) observer.observe(el.parentNode, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    this.render(el, html);\r\n    if (this.rendered) (this.rendered(this.state));\r\n  }\r\n\r\n  public setState(state: T, options: EventOptions\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null,\r\n    options: { render?: boolean, history?, global_event?: boolean } = { render: true }): Component<T> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: { render?: boolean, history?, global_event?: boolean}) {\r\n\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n    this.add_actions();\r\n    if (this.state === undefined) this.state = this['model'] != null ? this['model'] : {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n\r\n    componentCache[element] = componentCache[element] || [];\r\n    componentCache[element].push(this);\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: EventOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this. _global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: { history?, rendered?: (state: T) => void}): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n}\n\napp.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E=any>(element?: HTMLElement | string, model?: T,  view?: View<T>, update?: Update<T, E>,\n  options?: { history?, rendered?: (state: T) => void }) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, EventOptions }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n;(function(root) {\n'use strict';\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  nptable: noop,\n  table: noop,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\nblock.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\nblock.item = edit(block.item, 'gm')\n  .replace(/bull/g, block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} +')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n  table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n});\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n  fences: noop, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = Object.create(null);\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.pedantic) {\n    this.rules = block.pedantic;\n  } else if (this.options.gfm) {\n    this.rules = block.gfm;\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  src = src.replace(/^ +$/gm, '');\n  var next,\n      loose,\n      cap,\n      bull,\n      b,\n      item,\n      listStart,\n      listItems,\n      t,\n      space,\n      i,\n      tag,\n      l,\n      isordered,\n      istask,\n      ischecked;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      var lastToken = this.tokens[this.tokens.length - 1];\n      src = src.substring(cap[0].length);\n      // An indented code block cannot interrupt a paragraph.\n      if (lastToken && lastToken.type === 'paragraph') {\n        lastToken.text += '\\n' + cap[0].trimRight();\n      } else {\n        cap = cap[0].replace(/^ {4}/gm, '');\n        this.tokens.push({\n          type: 'code',\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic\n            ? rtrim(cap, '\\n')\n            : cap\n        });\n      }\n      continue;\n    }\n\n    // fences\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text: cap[3] || ''\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (cap = this.rules.nptable.exec(src)) {\n      item = {\n        type: 'table',\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        src = src.substring(cap[0].length);\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = splitCells(item.cells[i], item.header.length);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n      isordered = bull.length > 1;\n\n      listStart = {\n        type: 'list_start',\n        ordered: isordered,\n        start: isordered ? +bull : '',\n        loose: false\n      };\n\n      this.tokens.push(listStart);\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      listItems = [];\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull.length > 1 ? b.length === 1\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          listStart.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        t = {\n          type: 'list_item_start',\n          task: istask,\n          checked: ischecked,\n          loose: loose\n        };\n\n        listItems.push(t);\n        this.tokens.push(t);\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      if (listStart.loose) {\n        l = listItems.length;\n        i = 0;\n        for (; i < l; i++) {\n          listItems[i].loose = true;\n        }\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      if (!this.tokens.links[tag]) {\n        this.tokens.links[tag] = {\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n      continue;\n    }\n\n    // table (gfm)\n    if (cap = this.rules.table.exec(src)) {\n      item = {\n        type: 'table',\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        src = src.substring(cap[0].length);\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = splitCells(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noop,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n  em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noop,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n};\n\n// list of punctuation marks from common mark spec\n// without ` and ] to workaround Rule 17 (inline code blocks/links)\ninline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\ninline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', block._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer();\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  } else if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = '',\n      link,\n      text,\n      href,\n      title,\n      cap,\n      prevCapZero;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(cap[1]);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.inRawBlock = true;\n      } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.inRawBlock = false;\n      }\n\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? this.options.sanitizer\n          ? this.options.sanitizer(cap[0])\n          : escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      var lastParenIndex = findClosingBracket(cap[2], '()');\n      if (lastParenIndex > -1) {\n        var linkLen = 4 + cap[1].length + lastParenIndex;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      href = cap[2];\n      if (this.options.pedantic) {\n        link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      out += this.outputLink(cap, {\n        href: InlineLexer.escapes(href),\n        title: InlineLexer.escapes(title)\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2].trim(), true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = escape(this.mangle(cap[1]));\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      if (cap[2] === '@') {\n        text = escape(cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      src = src.substring(cap[0].length);\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (this.inRawBlock) {\n        out += this.renderer.text(this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]);\n      } else {\n        out += this.renderer.text(escape(this.smartypants(cap[0])));\n      }\n      continue;\n    }\n\n    if (src) {\n      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\nInlineLexer.escapes = function(text) {\n  return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = link.href,\n      title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  if (!this.options.mangle) return text;\n  var out = '',\n      l = text.length,\n      i = 0,\n      ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || marked.defaults;\n}\n\nRenderer.prototype.code = function(code, infostring, escaped) {\n  var lang = (infostring || '').match(/\\S*/)[0];\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw, slugger) {\n  if (this.options.headerIds) {\n    return '<h'\n      + level\n      + ' id=\"'\n      + this.options.headerPrefix\n      + slugger.slug(raw)\n      + '\">'\n      + text\n      + '</h'\n      + level\n      + '>\\n';\n  }\n  // ignore IDs\n  return '<h' + level + '>' + text + '</h' + level + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered, start) {\n  var type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n  return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.checkbox = function(checked) {\n  return '<input '\n    + (checked ? 'checked=\"\" ' : '')\n    + 'disabled=\"\" type=\"checkbox\"'\n    + (this.options.xhtml ? ' /' : '')\n    + '> ';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  if (body) body = '<tbody>' + body + '</tbody>';\n\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + body\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' align=\"' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n  if (href === null) {\n    return text;\n  }\n  var out = '<a href=\"' + escape(href) + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n  if (href === null) {\n    return text;\n  }\n\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += this.options.xhtml ? '/>' : '>';\n  return out;\n};\n\nRenderer.prototype.text = function(text) {\n  return text;\n};\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\n\nfunction TextRenderer() {}\n\n// no need for block level renderers\n\nTextRenderer.prototype.strong =\nTextRenderer.prototype.em =\nTextRenderer.prototype.codespan =\nTextRenderer.prototype.del =\nTextRenderer.prototype.text = function(text) {\n  return text;\n};\n\nTextRenderer.prototype.link =\nTextRenderer.prototype.image = function(href, title, text) {\n  return '' + text;\n};\n\nTextRenderer.prototype.br = function() {\n  return '';\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer();\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n  this.slugger = new Slugger();\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options) {\n  var parser = new Parser(options);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options);\n  // use an InlineLexer with a TextRenderer to extract pure text\n  this.inlineText = new InlineLexer(\n    src.links,\n    merge({}, this.options, { renderer: new TextRenderer() })\n  );\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  this.token = this.tokens.pop();\n  return this.token;\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        unescape(this.inlineText.output(this.token.text)),\n        this.slugger);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = '',\n          body = '',\n          i,\n          row,\n          cell,\n          j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      body = '';\n      var ordered = this.token.ordered,\n          start = this.token.start;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered, start);\n    }\n    case 'list_item_start': {\n      body = '';\n      var loose = this.token.loose;\n      var checked = this.token.checked;\n      var task = this.token.task;\n\n      if (this.token.task) {\n        body += this.renderer.checkbox(checked);\n      }\n\n      while (this.next().type !== 'list_item_end') {\n        body += !loose && this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n      return this.renderer.listitem(body, task, checked);\n    }\n    case 'html': {\n      // TODO parse inline content if parameter markdown=1\n      return this.renderer.html(this.token.text);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n    default: {\n      var errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n      if (this.options.silent) {\n        console.log(errMsg);\n      } else {\n        throw new Error(errMsg);\n      }\n    }\n  }\n};\n\n/**\n * Slugger generates header id\n */\n\nfunction Slugger() {\n  this.seen = {};\n}\n\n/**\n * Convert string to unique id\n */\n\nSlugger.prototype.slug = function(value) {\n  var slug = value\n    .toLowerCase()\n    .trim()\n    .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n    .replace(/\\s/g, '-');\n\n  if (this.seen.hasOwnProperty(slug)) {\n    var originalSlug = slug;\n    do {\n      this.seen[originalSlug]++;\n      slug = originalSlug + '-' + this.seen[originalSlug];\n    } while (this.seen.hasOwnProperty(slug));\n  }\n  this.seen[slug] = 0;\n\n  return slug;\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  if (encode) {\n    if (escape.escapeTest.test(html)) {\n      return html.replace(escape.escapeReplace, function(ch) { return escape.replacements[ch]; });\n    }\n  } else {\n    if (escape.escapeTestNoEncode.test(html)) {\n      return html.replace(escape.escapeReplaceNoEncode, function(ch) { return escape.replacements[ch]; });\n    }\n  }\n\n  return html;\n}\n\nescape.escapeTest = /[&<>\"']/;\nescape.escapeReplace = /[&<>\"']/g;\nescape.replacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\nescape.escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nescape.escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  return {\n    replace: function(name, val) {\n      val = val.source || val;\n      val = val.replace(/(^|[^\\[])\\^/g, '$1');\n      regex = regex.replace(name, val);\n      return this;\n    },\n    getRegex: function() {\n      return new RegExp(regex, opt);\n    }\n  };\n}\n\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (/^[^:]+:\\/*[^/]*$/.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n\n  if (href.slice(0, 2) === '//') {\n    return base.replace(/:[\\s\\S]*/, ':') + href;\n  } else if (href.charAt(0) === '/') {\n    return base.replace(/(:\\/*[^/]*)[\\s\\S]*/, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\nvar baseUrls = {};\nvar originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1,\n      target,\n      key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  var row = tableRow.replace(/\\|/g, function(match, offset, str) {\n        var escaped = false,\n            curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n        if (escaped) {\n          // odd number of slashes means | is escaped\n          // so we leave it alone\n          return '|';\n        } else {\n          // add space before unescaped |\n          return ' |';\n        }\n      }),\n      cells = row.split(/ \\|/),\n      i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  if (str.length === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  var suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < str.length) {\n    var currChar = str.charAt(str.length - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, str.length - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  var level = 0;\n  for (var i = 0; i < str.length; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    var highlight = opt.highlight,\n        tokens,\n        pending,\n        i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    checkSanitizeDeprecation(opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.getDefaults = function() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: new Renderer(),\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    xhtml: false\n  };\n};\n\nmarked.defaults = marked.getDefaults();\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  root.marked = marked;\n}\n})(this || (typeof window !== 'undefined' ? window : global));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import app, { Component, on } from 'apprun';\r\n\r\nclass HeaderComponent extends Component {\r\n  state = {}\r\n  view = state => {\r\n    const user = state.user\r\n    return <ul className=\"nav navbar-nav pull-xs-right\">\r\n      <li className=\"nav-item\">\r\n        <a className=\"nav-link active\" href=\"#/\">Home</a>\r\n      </li>\r\n      {user && <li className=\"nav-item\">\r\n        <a className=\"nav-link\" href=\"#/editor\">\r\n          <i className=\"ion-compose\"></i>&nbsp;New Post\r\n            </a>\r\n      </li>\r\n      }\r\n      {user && <li className=\"nav-item\">\r\n        <a className=\"nav-link\" href=\"#/settings\">\r\n          <i className=\"ion-gear-a\"></i>&nbsp;Settings\r\n            </a>\r\n      </li>\r\n      }\r\n      {user ? '' : <li className=\"nav-item\">\r\n        <a className=\"nav-link\" href=\"#/login\">Sign In</a>\r\n      </li>\r\n      }\r\n      {user ? '' : <li className=\"nav-item\">\r\n        <a className=\"nav-link\" href=\"#/register\">Sign Up</a>\r\n      </li>\r\n      }\r\n      {user && <li className=\"nav-item\">\r\n        <a className=\"nav-link\" href={`#/profile/${user.username}`}>{user.username}</a>\r\n      </li>\r\n      }\r\n      {user && <li className=\"nav-item\">\r\n        <a className=\"nav-link\" href=\"#/logout\">Sign Out</a>\r\n      </li>\r\n      }\r\n    </ul>\r\n  }\r\n\r\n  @on('/set-user') setUser = (state, user) => ({ ...state, user })\r\n\r\n}\r\n\r\nexport default new HeaderComponent().start('header')","declare var defaultBasePath;\r\n\r\nlet access_token: string = window && window.localStorage && window.localStorage.getItem('jwt') || '';\r\nexport function getToken() {\r\n  return access_token;\r\n}\r\n\r\nexport function setToken(token: string) {\r\n  access_token = token;\r\n  if (!window.localStorage) return;\r\n  if (token)\r\n    window.localStorage.setItem('jwt', token);\r\n  else\r\n    window.localStorage.removeItem('jwt');\r\n}\r\n\r\nexport async function fetchAsync(method: 'GET' | 'POST' | 'DELETE' | 'PUT', url: string, body?: any) {\r\n  const headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n  if (access_token) headers['Authorization'] = `Token ${access_token}`;\r\n  const response = await window['fetch'](`${defaultBasePath}${url}`, {\r\n    method,\r\n    headers,\r\n    body: body && JSON.stringify(body)\r\n  });\r\n  if (response.status === 401) {\r\n    setToken(null);\r\n    throw new Error('401');\r\n  }\r\n  const result = await response.json();\r\n  if (!response.ok) throw result;\r\n  return result;\r\n}\r\n\r\nexport function get<T>(url: string): Promise<T> {\r\n  return fetchAsync('GET', url);\r\n}\r\n\r\nexport function post<T>(url: string, body?: any): Promise<T> {\r\n  return fetchAsync('POST', url, body);\r\n}\r\n\r\nexport function del(url: string) {\r\n  return fetchAsync('DELETE', url);\r\n}\r\n\r\nexport function put(url: string, body?: any) {\r\n  return fetchAsync('PUT', url, body);\r\n}\r\nexport function toQueryString(obj) {\r\n  const parts = [];\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      parts.push(encodeURIComponent(i) + \"=\" + encodeURIComponent(obj[i]));\r\n    }\r\n  }\r\n  return parts.join(\"&\");\r\n}\r\n\r\nexport function serializeObject<T>(form) {\r\n  let obj = {};\r\n  if (typeof form == 'object' && form.nodeName == \"FORM\") {\r\n    for (let i = 0; i < form.elements.length; i++) {\r\n      const field = form.elements[i];\r\n      if (field.name\r\n        && field.type != 'file'\r\n        && field.type != 'reset'\r\n        && field.type != 'submit'\r\n        && field.type != 'button') {\r\n        if (field.type == 'select-multiple') {\r\n          obj[field.name] = '';\r\n          let tempvalue = '';\r\n          for (let j = 0; j < form.elements[i].options.length; j++) {\r\n            if (field.options[j].selected)\r\n              tempvalue += field.options[j].value + ';';\r\n          }\r\n          if (tempvalue.charAt(tempvalue.length - 1) === ';') obj[field.name] = tempvalue.substring(0, tempvalue.length - 1);\r\n\r\n        } else if ((field.type != 'checkbox' && field.type != 'radio') || field.checked) {\r\n          obj[field.name] = field.value;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return obj as T;\r\n}\r\n\r\n","import app from 'apprun';\r\n\r\n// Conduit API\r\nwindow['defaultBasePath'] = 'https://conduit.productionready.io/api';\r\n\r\nimport { toQueryString, serializeObject, getToken, setToken, get, post, del, put } from './fetch';\r\nexport { toQueryString, serializeObject }\r\nimport { IUser, IProfile, IArticle, IComment } from './models';\r\n\r\nexport interface IAuthResponse {\r\n  user: IUser\r\n}\r\n\r\nexport interface ITags {\r\n  tags: Array<string>;\r\n}\r\n\r\nexport interface IFeed {\r\n  articles: Array<IArticle>;\r\n  articlesCount: number;\r\n}\r\n\r\n\r\nexport interface IArticlesRequest {\r\n  tag?: string;\r\n  author?: string;\r\n  favorited?: string;\r\n  limit: number;\r\n  offset: number;\r\n}\r\n\r\nexport interface INewArticle {\r\n  title: string,\r\n  description: string,\r\n  body: string,\r\n  tagList: Array<string>;\r\n\r\n}\r\n\r\nexport interface IArticlesResponse {\r\n  article: IArticle\r\n}\r\n\r\nexport interface ICommentsResponse {\r\n  comments: Array<IComment>\r\n}\r\n\r\nexport interface IProfileResponse {\r\n  profile: IProfile\r\n}\r\n\r\nexport const tags = {\r\n  all: () => get<ITags>('/tags')\r\n}\r\n\r\nexport const auth = {\r\n  current: () => getToken()\r\n    ? get<IAuthResponse>('/user')\r\n    : null,\r\n  signIn: (user: { email: string, password: string }) =>\r\n    post<IAuthResponse>('/users/login', { user }),\r\n  register: (user: { username: string, email: string, password: string }) =>\r\n    post<IAuthResponse>('/users', { user }),\r\n  save: user =>\r\n    put('/user', { user }),\r\n  authorized: (): boolean => app['user']  ? true : app.run('#/login') && false // app.run returns true if found event handlers\r\n}\r\n\r\nexport const articles = {\r\n  search: (request: IArticlesRequest) =>\r\n    get<IFeed>(`/articles?${toQueryString(request)}`),\r\n  feed: (request: { limit: number, offset: number }) =>\r\n    get<IFeed>(`/articles/feed?${toQueryString(request)}`),\r\n  get: (slug: string) =>\r\n    get<IArticlesResponse>(`/articles/${slug}`),\r\n  delete: (slug: string) =>\r\n    del(`/articles/${slug}`),\r\n  favorite: (slug: string) =>\r\n    post(`/articles/${slug}/favorite`),\r\n  unfavorite: (slug: string) =>\r\n    del(`/articles/${slug}/favorite`),\r\n  update: (article: IArticle) =>\r\n    put(`/articles/${article.slug}`, { article }),\r\n  create: (article: INewArticle) =>\r\n    post<IArticlesResponse>('/articles', { article })\r\n}\r\n\r\nexport const comments = {\r\n  create: (slug: string, comment: { body: string }) =>\r\n    post(`/articles/${slug}/comments`, { comment }),\r\n  delete: (slug: string, commentId: string) =>\r\n    del(`/articles/${slug}/comments/${commentId}`),\r\n  forArticle: (slug: string) =>\r\n    get<ICommentsResponse>(`/articles/${slug}/comments`)\r\n};\r\n\r\nexport const profile = {\r\n  get: (username: string) =>\r\n    get<IProfileResponse>(`/profiles/${username}`),\r\n  follow: (username: string) =>\r\n    post<IProfileResponse>(`/profiles/${username}/follow`),\r\n  unfollow: (username: string) =>\r\n    del(`/profiles/${username}/follow`)\r\n};\r\n\r\napp.on('/get-user', async () => {\r\n  try {\r\n    const current = await auth.current();\r\n    if (current) app.run('/set-user', current.user);\r\n  }\r\n  catch {\r\n    setToken(null);\r\n    document.location.reload(true);\r\n  }\r\n});\r\n\r\napp.on('/set-user', user => {\r\n  app['user'] = user;\r\n  setToken(user ? user.token : null);\r\n});\r\n\r\napp.on('/toggle-follow', async (author: IProfile, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = author.following\r\n    ? await profile.unfollow(author.username)\r\n    : await profile.follow(author.username);\r\n  component.run('update-follow', result.profile);\r\n});\r\n\r\napp.on('/toggle-fav-article', async (article: IArticle, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = article.favorited\r\n    ? await articles.unfavorite(article.slug)\r\n    : await articles.favorite(article.slug);\r\n  component.run('update-article', result.article);\r\n});","import app from 'apprun';\r\nimport { IArticle } from '../models';\r\n\r\nfunction Article(props) {\r\n  const article = props.article as IArticle;\r\n  const favClass = article.favorited ? \"btn-primary\" : \"btn-outline-primary\";\r\n  return <div className=\"article-preview\">\r\n    <div className=\"article-meta\">\r\n      <a href={article.author.image} ><img src={article.author.image} /></a>\r\n      <div className=\"info\">\r\n        <a href={`#/profile/${article.author.username}`} className=\"author\">\r\n          {article.author.username}\r\n        </a>\r\n        <span className=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\r\n      </div>\r\n      <button className={`btn btn-sm pull-xs-right ${favClass}`}\r\n        onclick={e => app.run('toggle-fav-article', article, props.component)}>\r\n        <i className=\"ion-heart\"></i> {article.favoritesCount}\r\n      </button>\r\n    </div>\r\n    <a href={`#/article/${article.slug}`} className=\"preview-link\">\r\n      <h1>{article.title}</h1>\r\n      <p>{article.description}</p>\r\n      <span>Read more...</span>\r\n\r\n      <ul className=\"tag-list\">\r\n        {article.tagList.map(tag =>\r\n          <li className=\"tag-default tag-pill tag-outline\">\r\n            <a href={`#/tag/${tag}`}>{tag} </a>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </a>\r\n  </div>\r\n}\r\n\r\nexport default function ({ articles, component }: { articles: Array<IArticle>, component }) {\r\n  return articles.length\r\n    ? articles.map(article => <Article article={article} component={component}></Article>)\r\n    : <div className=\"article-preview\">No articles are here... yet.</div>\r\n}","import app from 'apprun';\r\n\r\nexport default function ({ max, selected, link }) {\r\n  const pages = new Array(max).fill(0);\r\n  return <nav>\r\n    <ul className=\"pagination\">\r\n      {pages.map((page, idx) => <li className={`page-item ${(idx + 1) === selected ? 'active' : ''}`}>\r\n        <a href={`${link}/${idx + 1}`} className=\"page-link\">{idx + 1}</a>\r\n        </li>)}\r\n    </ul>\r\n  </nav>\r\n}","import app, { Component, on } from 'apprun';\r\nimport { auth, tags, articles } from '../api';\r\nimport { IArticle } from '../models';\r\nimport Articles from './article-list';\r\nimport Pages from './page-list';\r\n\r\nconst PAGE_SIZE = 10\r\nconst Tag = ({ tag }) => <a href={`#/tag/${tag}/1`} className=\"tag-pill tag-default\">{tag}</a>\r\n\r\ndeclare interface IState {\r\n  type: '' | 'feed' | 'tag'\r\n  articles: Array<IArticle>\r\n  tags: Array<string>\r\n  max: number\r\n  page: number\r\n}\r\n\r\nclass HomeComponent extends Component {\r\n  state: IState = {\r\n    type: '',\r\n    articles: [],\r\n    tags: [],\r\n    max: 1,\r\n    page: 1\r\n  };\r\n\r\n  view = (state) => {\r\n    const tag = state.type === 'tag' && state.tag ? `/${state.tag}` : '';\r\n    return <div className=\"home-page\">\r\n      <div className=\"banner\">\r\n        <div className=\"container\">\r\n          <h1 className=\"logo-font\">conduit</h1>\r\n          <p>A place to share your knowledge.</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"container page\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-9\">\r\n            <div className=\"feed-toggle\">\r\n              <ul className=\"nav nav-pills outline-active\">\r\n                <li className=\"nav-item\">\r\n                  <a className={`nav-link ${app['user'] ? '' : 'disabled'} ${state.type === 'feed' ? 'active' : ''}`}\r\n                    href=\"#/feed\">Your Feed</a>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <a className={`nav-link ${state.type === '' ? 'active' : ''}`} href=\"#/\">Global Feed</a>\r\n                </li>\r\n                {state.tag ?\r\n                  <li className=\"nav-item\">\r\n                    <a className={`nav-link ${state.type === 'tag' ? 'active' : ''}`} href={`#/tag/${state.tag}`}>#{state.tag}</a>\r\n                  </li>\r\n                  : ''\r\n                }\r\n              </ul>\r\n            </div>\r\n            <Articles articles={state.articles} component={this} />\r\n            <Pages max={Math.floor(state.max / PAGE_SIZE)} selected={state.page} link={`#/${state.type}${tag}`} />\r\n          </div>\r\n          <div className=\"col-md-3\">\r\n            <div className=\"sidebar\">\r\n              <p>Popular Tags</p>\r\n              <div className=\"tag-list\">\r\n                {state.tags.map(tag => <Tag tag={tag} />)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n  updateState = async (state, type: '' | 'feed' | 'tag', page, tag?: string) => {\r\n    try {\r\n      let tagList = state.tags.length\r\n        ? { tags: state.tags }\r\n        : await tags.all();\r\n\r\n      page = parseInt(page) || 1;\r\n      tag = tag || state.tag;\r\n      const limit = PAGE_SIZE;\r\n      const offset = (page - 1) * PAGE_SIZE;\r\n      let feed;\r\n      switch (type) {\r\n        case 'feed':\r\n          if (!auth.authorized()) return { ...state, articles: [], max: 0};\r\n          feed = await articles.feed({ limit, offset });\r\n          break;\r\n        case 'tag':\r\n          feed = await articles.search({ tag, limit, offset });\r\n          break;\r\n        default:\r\n          feed = await articles.search({ limit, offset });\r\n          break;\r\n      }\r\n      page = Math.min(page, Math.floor(feed.articlesCount / PAGE_SIZE) + 1);\r\n      return {\r\n        ...state,\r\n        tags: tagList.tags,\r\n        type, page, tag,\r\n        articles: feed.articles,\r\n        max: feed.articlesCount\r\n      }\r\n    } catch ({ errors }) {\r\n      return { ...state, errors, articles: [], max: 0 }\r\n    }\r\n  }\r\n\r\n  @on('#/')  root = async (state, page) => await this.updateState(state, '', page)\r\n\r\n  @on('#/feed') feed = async (state, page) => await this.updateState(state, 'feed', page)\r\n\r\n  @on('#/tag')  tag = async (state, tag, page) => await this.updateState(state, 'tag', page, tag)\r\n\r\n  @on('update-article') updateArticle = (state, article) => {\r\n    state.articles = state.articles.map(a => {\r\n      return a.slug === article.slug ? article : a;\r\n    })\r\n    return state;\r\n  }\r\n}\r\n\r\nexport default new HomeComponent().mount('my-app')\r\n\r\n","import app from 'apprun'\r\n\r\nexport default function ({ errors }) {\r\n  return <ul className=\"error-messages\">\r\n    {Object.keys(errors).map(key => <li>{`${key} ${errors[key]}`}</li>)}\r\n  </ul>\r\n}\r\n","import app, { Component, on } from 'apprun';\r\nimport { auth, serializeObject } from '../api'\r\n\r\nimport Errors from './error-list';\r\n\r\nclass SigninComponent extends Component {\r\n  state = {}\r\n\r\n  view = (state) => {\r\n    if (!state || state instanceof Promise) return;\r\n\r\n    return <div className=\"auth-page\">\r\n      <div className=\"container page\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\r\n            <h1 className=\"text-xs-center\">Sign In</h1>\r\n            <p className=\"text-xs-center\">\r\n              <a href=\"#/register\">Need an account?</a>\r\n            </p>\r\n\r\n            {state.errors && <Errors errors={state.errors} />}\r\n\r\n            <form onsubmit={e => this.run('sign-in', e)}>\r\n              <fieldset className=\"form-group\">\r\n                <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Email\" name=\"email\" />\r\n              </fieldset>\r\n              <fieldset className=\"form-group\">\r\n                <input className=\"form-control form-control-lg\" type=\"password\" placeholder=\"Password\" name=\"password\" />\r\n              </fieldset>\r\n              <button className=\"btn btn-lg btn-primary pull-xs-right\">\r\n                Sign In\r\n              </button>\r\n            </form>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n  @on('#/login') login = state => ({ ...state, messages: [], returnTo: document.location.hash })\r\n\r\n  @on('#/logout') logout = state => {\r\n    app.run('/set-user', null);\r\n    document.location.hash = '#/';\r\n  }\r\n\r\n  @on('sign-in') signIn = async (state, e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const session = await auth.signIn(serializeObject(e.target));\r\n      app.run('/set-user', session.user);\r\n      const returnTo: string = (state.returnTo || '').replace(/\\#\\/login\\/?/, '')\r\n      if (!returnTo)\r\n        document.location.hash = '#/feed';\r\n      else {\r\n        app.run('route', returnTo);\r\n        history.pushState(null, null, returnTo);\r\n      }\r\n    } catch ({ errors }) {\r\n      return { ...state, errors }\r\n    }\r\n  }\r\n}\r\n\r\nexport default new SigninComponent().mount('my-app')","import app, { Component, on } from 'apprun';\r\nimport { auth, serializeObject } from '../api'\r\nimport Errors from './error-list';\r\n\r\nclass RegisterComponent extends Component {\r\n  state = {}\r\n\r\n  view = (state) => {\r\n    if (!state || state instanceof Promise) return;\r\n\r\n    return <div className=\"auth-page\">\r\n      <div className=\"container page\">\r\n        <div className=\"row\">\r\n\r\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\r\n            <h1 className=\"text-xs-center\">Sign Up</h1>\r\n            <p className=\"text-xs-center\">\r\n              <a href=\"#/login\">Have an account?</a>\r\n            </p>\r\n\r\n            {state.errors && <Errors errors={state.errors} />}\r\n\r\n            <form onsubmit={e => this.run('register', e)}>\r\n              <fieldset className=\"form-group\">\r\n                <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Your Name\" name=\"username\" />\r\n              </fieldset>\r\n              <fieldset className=\"form-group\">\r\n                <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Email\" name=\"email\" />\r\n              </fieldset>\r\n              <fieldset className=\"form-group\">\r\n                <input className=\"form-control form-control-lg\" type=\"password\" placeholder=\"Password\" name=\"password\" />\r\n              </fieldset>\r\n              <button className=\"btn btn-lg btn-primary pull-xs-right\">\r\n                Sign up\r\n              </button>\r\n            </form>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n  @on('#/register') register = (state, messages) => ({ ...state, messages })\r\n\r\n  @on('register') submitRegistration = async (state, e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const session = await auth.register(serializeObject(e.target));\r\n      app.run('#user', session.user);\r\n      app.run('route', '#/');\r\n    } catch ({ errors }) {\r\n      return { ...state, errors }\r\n    }\r\n  }\r\n}\r\n\r\nexport default new RegisterComponent().mount('my-app')\r\n","import app, { Component, on } from 'apprun';\r\nimport { IProfile } from '../models';\r\nimport { auth, articles, profile } from '../api';\r\nimport Articles from './article-list';\r\nimport Pages from './page-list';\r\n\r\nconst PAGE_SIZE = 10;\r\n\r\nclass ProfileComponent extends Component {\r\n  state = {\r\n    name: '',\r\n    type: 'articles',\r\n    articles: [],\r\n    page: 1\r\n  }\r\n\r\n  view = (state) => {\r\n    const profile = state.profile as IProfile;\r\n    if (!profile) return;\r\n    return <div className=\"profile-page\">\r\n      <div className=\"user-info\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-xs-12 col-md-10 offset-md-1\">\r\n              <img src={profile.image} className=\"user-img\" />\r\n              <h4>{profile.username}</h4>\r\n              <p>\r\n                {profile.bio}\r\n              </p>\r\n              <button className=\"btn btn-sm btn-outline-secondary action-btn\"\r\n                onclick={e => app.run('/toggle-follow', profile, this)}>\r\n                {profile.following\r\n                  ? <span><i className=\"ion-minus-round\"></i> Unfollow {profile.username}</span>\r\n                  : <span><i className=\"ion-plus-round\"></i> Follow {profile.username}</span>\r\n                }\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-xs-12 col-md-10 offset-md-1\">\r\n            <div className=\"articles-toggle\">\r\n              <ul className=\"nav nav-pills outline-active\">\r\n                <li className=\"nav-item\">\r\n                  <a className={`nav-link ${state.type === 'articles' ? 'active' : ''}`}\r\n                    href={`#/profile/${profile.username}/articles/1`}>My Articles</a>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                  <a className={`nav-link ${state.type === 'favorites' ? 'active' : ''}`}\r\n                    href={`#/profile/${profile.username}/favorites/1`}>Favorited Articles</a>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <Articles articles={state.articles} component={this} />\r\n            <Pages max={Math.floor(state.max / PAGE_SIZE)} selected={state.page}\r\n              link={`#/profile/${state.profile.username}/${state.type}`} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n  updateState = async (state, name, type, page) => {\r\n    name = decodeURIComponent(name || state.name);\r\n    type = type || state.type;\r\n    page = parseInt(page) || state.page;\r\n    let newState = state;\r\n    if (name !== state.name) {\r\n      const profileResult = await profile.get(name);\r\n      newState = { ...newState, profile: profileResult.profile }\r\n    }\r\n    if (name !== state.name || type !== state.type || page !== state.page) {\r\n      const limit = PAGE_SIZE;\r\n      const offset = (page - 1) * limit;\r\n      const articleResult = type === \"favorites\"\r\n        ? await articles.search({ favorited: name, offset, limit })\r\n        : await articles.search({ author: name, offset, limit });\r\n      newState = {\r\n        ...newState, name, type, page,\r\n        articles: articleResult.articles,\r\n        max: articleResult.articlesCount,\r\n      }\r\n    }\r\n    return newState\r\n  }\r\n\r\n  @on('#/profile') root = (state, name, type, page) => this.updateState(state, name, type, page)\r\n\r\n  @on('update-article') updateArticle = (state, article) => {\r\n    state.articles = state.articles.map(a => {\r\n      return a.slug === article.slug ? article : a;\r\n    })\r\n    return state;\r\n  }\r\n\r\n  @on('update-follow') updateFollow = (state, profile) => ({...state, profile })\r\n\r\n}\r\n\r\nexport default new ProfileComponent().mount('my-app')\r\n","import app from 'apprun';\r\n\r\nexport default function ({ title, body, ok, cancel, onOK, onCancel }) {\r\n  return <div className=\"modal-open\">\r\n    <div className=\"modal-dialog\" role=\"document\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h5 className=\"modal-title\">{title}\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onclick={e => onCancel(e)}>\r\n              <span aria-hidden=\"true\"></span>\r\n            </button>\r\n          </h5>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n          <p>{body}</p>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          {cancel && <button type=\"button\" className=\"btn btn-secondary\"\r\n            data-dismiss=\"modal\" onclick={e => onCancel(e)}>{cancel}</button>}\r\n          &nbsp;&nbsp;\r\n          <button type=\"button\" className=\"btn btn-primary\" onclick={e => onOK(e)}>{ok}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className=\"modal-backdrop show\" onclick={e => onCancel(e)}></div>\r\n  </div>\r\n}","import app, { Component, on } from 'apprun';\r\nimport { serializeObject, auth } from '../api'\r\nimport Errors from './error-list';\r\nimport Modal from './modal';\r\n\r\nclass SettingsComponent extends Component {\r\n  state = {}\r\n\r\n  view = (state) => {\r\n    const user = state.user;\r\n    if (!user) return;\r\n    return <div className=\"settings-page\">\r\n      {\r\n        state.showModal ? <Modal title='Confirmation'\r\n          body='Your settings has been updated successfully.'\r\n          ok='OK' cancel='Cancel'\r\n          onOK={e => this.run('ok', e)}\r\n          onCancel={e => this.run('cancel', e)} /> : ''\r\n      }\r\n      <div className=\"container page\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 offset-md-3 col-xs-12\">\r\n            {state.errors && <Errors errors={state.errors} />}\r\n            <h1 className=\"text-xs-center\">Your Settings</h1>\r\n            <form onsubmit={e => this.run('submit-settings', e)}>\r\n              <fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input className=\"form-control\" type=\"text\" placeholder=\"URL of profile picture\"\r\n                    name='image' value={user.image} />\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Your Name\"\r\n                    name='username' value={user.username} />\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <textarea className=\"form-control form-control-lg\" rows=\"8\" placeholder=\"Short bio about you\"\r\n                    name='bio'>{user.bio}\r\n                  </textarea>\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Email\"\r\n                    name='email' value={user.email} />\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input className=\"form-control form-control-lg\" type=\"password\" placeholder=\"Password\"\r\n                    name='password' value={user.password} />\r\n                </fieldset>\r\n                <button className=\"btn btn-lg btn-primary pull-xs-right\">\r\n                  Update Settings\r\n              </button>\r\n              </fieldset>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n\r\n  @on('#/settings') settings = state => {\r\n    if (!auth.authorized()) return;\r\n    return { user: app['user'] };\r\n  }\r\n\r\n  @on('submit-settings') submitSettings = async (state, e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const user = serializeObject<any>(e.target);\r\n      const result = await auth.save(user);\r\n      app.run('#user', result.user);\r\n      return { showModal: true }\r\n    } catch ({ errors }) {\r\n      return { ...state, errors }\r\n    }\r\n  }\r\n\r\n  @on('ok, cancel') ok = state => {\r\n    return { showModel: false }\r\n    //document.location.hash = `#/profile/${app['user'].username}`;\r\n  }\r\n\r\n}\r\n\r\nexport default new SettingsComponent().mount('my-app')","import app, { Component, on } from 'apprun';\r\nimport { serializeObject, articles, auth } from '../api'\r\nimport Errors from './error-list';\r\n\r\nclass EditorComponent extends Component {\r\n  state = {}\r\n\r\n  view = (state) => {\r\n    if (!app['user'] || !state.article) return;\r\n    const article = state.article;\r\n    return <div className=\"editor-page\">\r\n      <div className=\"container page\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-10 offset-md-1 col-xs-12\">\r\n            {state.errors && <Errors errors={state.errors} />}\r\n            <form onsubmit={e => this.run('submit-article', e)}>\r\n              {article.slug && <input type=\"hidden\" name=\"slug\" value={article.slug} />}\r\n              <fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input type=\"text\" className=\"form-control form-control-lg\" placeholder=\"Article Title\"\r\n                    name=\"title\" value={article.title} />\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input type=\"text\" className=\"form-control\" placeholder=\"What's this article about?\"\r\n                    name=\"description\" value={article.description} />\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <textarea className=\"form-control\" rows=\"8\" placeholder=\"Write your article (in markdown)\" name=\"body\">\r\n                    {article.body}\r\n                  </textarea>\r\n                </fieldset>\r\n                <fieldset className=\"form-group\">\r\n                  <input type=\"text\" className=\"form-control\" placeholder=\"Enter tags\" name=\"tags\"\r\n                    value={article.tagList.join(', ')} />\r\n                  <div className=\"tag-list\"></div>\r\n                </fieldset>\r\n                <button className=\"btn btn-lg pull-xs-right btn-primary\" type=\"submit\">\r\n                  Publish Article\r\n                </button>\r\n              </fieldset>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n\r\n  @on('#/editor') root = async (state, slug) => {\r\n    if (!auth.authorized()) return;\r\n    let article;\r\n    if (slug) {\r\n      const result = await articles.get(slug);\r\n      article = result.article\r\n    }\r\n    article = article || { title: '', description: '', body: '', tagList: [] };\r\n    return { article };\r\n  }\r\n\r\n  @on('submit-article') submitArticle = async (state, e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const article = serializeObject<any>(e.target);\r\n      article.tagList = article.tags.split(',');\r\n      const result = article.slug\r\n        ? await articles.update(article)\r\n        : await articles.create(article)\r\n      document.location.hash = `#/article/${result.article.slug}`;\r\n    } catch ({ errors }) {\r\n      return { ...state, errors }\r\n    }\r\n  }\r\n}\r\n\r\nexport default new EditorComponent().mount('my-app')\r\n","import app from 'apprun';\r\nimport { IComment, IProfile } from '../models';\r\nimport * as marked from 'marked';\r\n\r\nfunction Comment({ comment }: { comment: IComment }) {\r\n  return <div className=\"card\">\r\n    <div className=\"card-block\">\r\n      <p className=\"card-text\">\r\n        <p>{`_html:${marked(comment.body, { sanitize: true })}`}</p>\r\n      </p>\r\n    </div>\r\n    <div className=\"card-footer\">\r\n      <a className=\"comment-author\">\r\n        <img src={comment.author.image} className=\"comment-author-img\" />\r\n    </a>\r\n    &nbsp;\r\n    <a className=\"comment-author\" href={`#/profile/${comment.author.username}`}>\r\n      { comment.author.username }\r\n    </a>\r\n    <span className=\"date-posted\">\r\n      { new Date(comment.createdAt).toLocaleString() }\r\n    </span>\r\n    { app['user'] && app['user'].username === comment.author.username\r\n      ? <span className=\"mod-options\">\r\n          <i className=\"ion-trash-a\" onclick={e=>app.run('/delete-comment', comment)} ></i>\r\n        </span>\r\n      : ''}\r\n  </div>\r\n</div>\r\n}\r\n\r\nexport default function ({ comments }: { comments: Array<IComment> }) {\r\n  const user = app['user'] as IProfile;\r\n  return <div className=\"row\">\r\n    <div className=\"col-xs-12 col-md-8 offset-md-2\">\r\n      {!user\r\n        ? <p><a href={`#/login/${document.location.hash}`}>Sign in</a> or&nbsp;\r\n          <a href='#/register'>sign up</a> to add comments on this article.</p>\r\n        : <form className=\"card comment-form\" onsubmit={e=>app.run('/new-comment', e)}>\r\n          <div className=\"card-block\">\r\n            <textarea className=\"form-control\" placeholder=\"Write a comment...\" rows=\"3\" name='comment'></textarea>\r\n          </div>\r\n          <div className=\"card-footer\">\r\n            {user.image\r\n              ? <img src={user.image} className=\"comment-author-img\" />\r\n              : <span>@{user.username}</span>\r\n            }\r\n            <button className=\"btn btn-sm btn-primary\" type='submit'>\r\n              Post Comment\r\n            </button>\r\n          </div>\r\n        </form>\r\n      }\r\n      {comments.map(comment => <Comment comment={comment} />)}\r\n    </div>\r\n  </div>\r\n}\r\n","import app from 'apprun';\r\nimport { IArticle } from '../models';\r\n\r\nexport default\r\n  function ArticleMeta({ article, component }: { article: IArticle, component }) {\r\n  const favClass = article.favorited ? \"btn-primary\" : \"btn-outline-primary\";\r\n  const followClass = article.author.following ? \"btn-secondary\" : \"btn-outline-secondary\";\r\n  return <div className=\"article-meta\">\r\n    <a href={article.author.image} ><img src={article.author.image} /></a>\r\n    <div className=\"info\">\r\n      <a href={`#/profile/${article.author.username}`} className=\"author\">\r\n        {article.author.username}\r\n      </a>\r\n      <span className=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\r\n    </div>\r\n\r\n    {app['user'] && app['user'].username === article.author.username\r\n      ? <span>\r\n        <button className=\"btn btn-sm btn-outline-secondary\"\r\n          onclick={e => component.run('edit-article', article)}>\r\n          <i className=\"ion-edit\"></i>&nbsp; Edit Article\r\n          </button>&nbsp;&nbsp;\r\n          <button className=\"btn btn-sm btn-outline-danger\"\r\n          onclick={e => component.run('delete-article', article)}>\r\n          <i className=\"ion-trash-o\"></i>&nbsp; Delete Article\r\n              </button>\r\n      </span>\r\n      : <span>\r\n        <button className={`btn btn-sm ${followClass}`}\r\n          onclick={e => app.run('/toggle-follow', article.author, component)}>\r\n          {article.author.following\r\n            ? <span><i className=\"ion-minus-round\"></i> Unfollow {article.author.username}</span>\r\n            : <span><i className=\"ion-plus-round\"></i> Follow {article.author.username}</span>\r\n          }\r\n        </button> &nbsp;&nbsp;\r\n        <button className={`btn btn-sm ${favClass}`}\r\n          onclick={e => app.run('/toggle-fav-article', article, component)}>\r\n          <i className=\"ion-heart\"></i>\r\n          &nbsp; Favorite Post <span className=\"counter\">({article.favoritesCount})</span>\r\n        </button>\r\n      </span>\r\n    }\r\n  </div>\r\n}\r\n","import app, { Component, on } from 'apprun';\r\nimport { auth, articles, comments } from '../api';\r\nimport { IArticle } from '../models';\r\nimport Comments from './comment-list';\r\nimport ArticleMeta from './article-meta';\r\nimport Modal from './modal';\r\nimport * as marked from 'marked';\r\n\r\nclass ArticleComponent extends Component {\r\n  state = {\r\n    article: null,\r\n    comments: []\r\n  }\r\n\r\n  view = (state) => {\r\n    const article = state.article as IArticle;\r\n    if (!article) return;\r\n\r\n    return <div className=\"article-page\">\r\n\r\n      {\r\n        state.deleting ? <Modal title='Delete Article'\r\n        body='Are you sure you want to delete this article?'\r\n        ok='Delete' cancel='No'\r\n        onOK={e => this.run('ok-delete-article', e)}\r\n        onCancel={e => this.run('cancel-delete-article', e)} /> : ''\r\n      }\r\n\r\n      <div className=\"banner\">\r\n        <div className=\"container\">\r\n          <h1>{article.title}</h1>\r\n          <ArticleMeta article={article} component={this}/>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"container page\">\r\n        <div className=\"row article-content\">\r\n          <div className=\"col-md-12\">\r\n            <p>{`_html:${marked(article.body, { sanitize: true })}`}</p>\r\n            <div className=\"tag-list\"><br />\r\n              {article.tagList.map(tag =>\r\n                <li className=\"tag-default tag-pill tag-outline\">\r\n                  <a href={`#/tag/${tag}`}>{tag} </a>\r\n                </li>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n        <div className=\"article-actions\">\r\n          <ArticleMeta article={article} component={this}/>\r\n        </div>\r\n        <Comments comments={state.comments}/>\r\n      </div>\r\n    </div>\r\n  }\r\n\r\n  @on('#/article') root = async (state, slug) => {\r\n    let article = state.article as IArticle;\r\n    let _comments = state.comments;\r\n    if (!article || article.slug !== slug) {\r\n      const result = await articles.get(slug);\r\n      article = result.article;\r\n      const commentsResponse = await comments.forArticle(article.slug);\r\n      _comments = commentsResponse.comments;\r\n    }\r\n    return { ...state, article, comments: _comments }\r\n  }\r\n\r\n  @on('/new-comment') newComment = async (state, e) => {\r\n    try {\r\n      e.preventDefault();\r\n      const comment = e.target['comment'].value;\r\n      if (!comment) return;\r\n      await comments.create(state.article.slug, { body: comment });\r\n      const commentsResponse = await comments.forArticle(state.article.slug);\r\n      return { ...state, comments: commentsResponse.comments }\r\n    } catch ({ errors }) {\r\n      return { ...state, errors }\r\n    }\r\n  }\r\n\r\n  @on('/delete-comment') deleteComment = async (state, comment) => {\r\n    await comments.delete(this.state.article.slug, comment.id);\r\n    const commentsResponse = await comments.forArticle(state.article.slug);\r\n    return { ...state, comments: commentsResponse.comments }\r\n  }\r\n\r\n  @on('update-article') updateArticle = (state, article) => ({ ...state, article });\r\n\r\n  @on('update-follow') updateFollow = (state, author) => {\r\n    state.article.author = author;\r\n    return state;\r\n  }\r\n\r\n  @on('edit-article') editArticle = (state, article) => {\r\n    document.location.hash = `#/editor/${article.slug}`;\r\n  }\r\n\r\n  @on('delete-article') deleteArticle = (state, article) => ({ ...state, deleting: true })\r\n\r\n  @on('ok-delete-article') okDelete = (state, e) => {\r\n    articles.delete(state.article.slug);\r\n    document.location.hash = '#/';\r\n    return ({ ...state, deleting: false })\r\n  }\r\n\r\n  @on('cancel-delete-article') cancelDelete = (state, article) => ({ ...state, deleting: false })\r\n\r\n}\r\n\r\nexport default new ArticleComponent().mount('my-app')\r\n","import app from 'apprun';\r\n\r\nimport './components/header';\r\nimport './components/home';\r\nimport './components/signin';\r\nimport './components/register';\r\nimport './components/profile';\r\nimport './components/settings';\r\nimport './components/editor';\r\nimport './components/article';\r\n\r\napp.on('#', (route, ...p) => {\r\n  app.run(`#/${route || ''}`, ...p);\r\n})\r\n\r\napp.run('/get-user');"],"sourceRoot":""}