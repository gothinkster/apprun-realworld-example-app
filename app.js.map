{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"apprun\"","webpack:///external \"marked\"","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./src/components/header.tsx","webpack:///./src/fetch.ts","webpack:///./src/api.ts","webpack:///./src/components/article-list.tsx","webpack:///./src/components/page-list.tsx","webpack:///./src/components/home.tsx","webpack:///./src/components/error-list.tsx","webpack:///./src/components/signin.tsx","webpack:///./src/components/register.tsx","webpack:///./src/components/profile.tsx","webpack:///./src/components/modal.tsx","webpack:///./src/components/settings.tsx","webpack:///./src/components/editor.tsx","webpack:///./src/components/comment-list.tsx","webpack:///./src/components/article-meta.tsx","webpack:///./src/components/article.tsx","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","apprun","marked","__decorate","decorators","target","desc","arguments","length","getOwnPropertyDescriptor","Reflect","decorate","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","state","view","user","class","href","username","setUser","start","access_token","window","localStorage","getItem","setToken","token","setItem","removeItem","fetchAsync","method","url","body","headers","response","defaultBasePath","JSON","stringify","status","Error","json","ok","post","del","put","toQueryString","obj","parts","push","encodeURIComponent","join","serializeObject","form","nodeName","elements","field","type","tempvalue","j","options","selected","charAt","substring","checked","tags","auth","a","run","request","slug","article","comment","commentId","Article","props","favClass","favorited","author","image","src","Date","updatedAt","toLocaleString","onclick","component","favoritesCount","title","description","tagList","map","tag","on","current","document","location","reload","following","profile","articles","max","link","pages","Array","fill","page","idx","Tag","this","Math","floor","updateState","parseInt","limit","offset","feed","min","articlesCount","errors","root","updateArticle","mount","keys","onsubmit","placeholder","login","messages","returnTo","hash","logout","signIn","preventDefault","session","replace","history","pushState","register","submitRegistration","bio","decodeURIComponent","newState","profileResult","articleResult","updateFollow","cancel","onOK","onCancel","role","showModal","rows","email","password","settings","submitSettings","showModel","submitArticle","split","Comment","sanitize","createdAt","comments","ArticleMeta","followClass","deleting","_comments","newComment","commentsResponse","deleteComment","id","editArticle","deleteArticle","okDelete","cancelDelete","route"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = apprun;","module.exports = marked;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import app, { Component, on } from 'apprun';\n\nclass HeaderComponent extends Component {\n  state = {};\n  view = state => {\n    const user = state.user;\n    return (\n      <ul class=\"nav navbar-nav pull-xs-right\">\n        <li class=\"nav-item\">\n          <a class=\"nav-link active\" href=\"#/\">\n            Home\n          </a>\n        </li>\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/editor\">\n              <i class=\"ion-compose\"></i>&nbsp;New Post\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/settings\">\n              <i class=\"ion-gear-a\"></i>&nbsp;Settings\n            </a>\n          </li>\n        )}\n        {!user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/login\">\n              Sign In\n            </a>\n          </li>\n        )}\n        {!user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/register\">\n              Sign Up\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href={`#/profile/${user.username}`}>\n              {user.username}\n            </a>\n          </li>\n        )}\n        {user && (\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#/logout\">\n              Sign Out\n            </a>\n          </li>\n        )}\n      </ul>\n    );\n  };\n\n  @on('/set-user') setUser = (state, user) => ({ ...state, user });\n}\n\nexport default new HeaderComponent().start('header');\n","declare var defaultBasePath;\n\nlet access_token: string =\n  (window && window.localStorage && window.localStorage.getItem('jwt')) || '';\nexport function getToken() {\n  return access_token;\n}\n\nexport function setToken(token: string) {\n  access_token = token;\n  if (!window.localStorage) return;\n  if (token) window.localStorage.setItem('jwt', token);\n  else window.localStorage.removeItem('jwt');\n}\n\nexport async function fetchAsync(\n  method: 'GET' | 'POST' | 'DELETE' | 'PUT',\n  url: string,\n  body?: any\n) {\n  const headers = { 'Content-Type': 'application/json; charset=utf-8' };\n  if (access_token) headers['Authorization'] = `Token ${access_token}`;\n  const response = await window['fetch'](`${defaultBasePath}${url}`, {\n    method,\n    headers,\n    body: body && JSON.stringify(body)\n  });\n  if (response.status === 401) {\n    setToken(null);\n    throw new Error('401');\n  }\n  const result = await response.json();\n  if (!response.ok) throw result;\n  return result;\n}\n\nexport function get<T>(url: string): Promise<T> {\n  return fetchAsync('GET', url);\n}\n\nexport function post<T>(url: string, body?: any): Promise<T> {\n  return fetchAsync('POST', url, body);\n}\n\nexport function del(url: string) {\n  return fetchAsync('DELETE', url);\n}\n\nexport function put(url: string, body?: any) {\n  return fetchAsync('PUT', url, body);\n}\nexport function toQueryString(obj) {\n  const parts = [];\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      parts.push(encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]));\n    }\n  }\n  return parts.join('&');\n}\n\nexport function serializeObject<T>(form) {\n  let obj = {};\n  if (typeof form == 'object' && form.nodeName == 'FORM') {\n    for (let i = 0; i < form.elements.length; i++) {\n      const field = form.elements[i];\n      if (\n        field.name &&\n        field.type != 'file' &&\n        field.type != 'reset' &&\n        field.type != 'submit' &&\n        field.type != 'button'\n      ) {\n        if (field.type == 'select-multiple') {\n          obj[field.name] = '';\n          let tempvalue = '';\n          for (let j = 0; j < form.elements[i].options.length; j++) {\n            if (field.options[j].selected) tempvalue += field.options[j].value + ';';\n          }\n          if (tempvalue.charAt(tempvalue.length - 1) === ';')\n            obj[field.name] = tempvalue.substring(0, tempvalue.length - 1);\n        } else if ((field.type != 'checkbox' && field.type != 'radio') || field.checked) {\n          obj[field.name] = field.value;\n        }\n      }\n    }\n  }\n  return obj as T;\n}\n","import app from 'apprun';\r\n\r\n// Conduit API\r\nwindow['defaultBasePath'] = 'https://conduit.productionready.io/api';\r\n\r\nimport { toQueryString, serializeObject, getToken, setToken, get, post, del, put } from './fetch';\r\nexport { toQueryString, serializeObject };\r\nimport { IUser, IProfile, IArticle, IComment } from './models';\r\n\r\nexport interface IAuthResponse {\r\n  user: IUser;\r\n}\r\n\r\nexport interface ITags {\r\n  tags: Array<string>;\r\n}\r\n\r\nexport interface IFeed {\r\n  articles: Array<IArticle>;\r\n  articlesCount: number;\r\n}\r\n\r\nexport interface IArticlesRequest {\r\n  tag?: string;\r\n  author?: string;\r\n  favorited?: string;\r\n  limit: number;\r\n  offset: number;\r\n}\r\n\r\nexport interface INewArticle {\r\n  title: string;\r\n  description: string;\r\n  body: string;\r\n  tagList: Array<string>;\r\n}\r\n\r\nexport interface IArticlesResponse {\r\n  article: IArticle;\r\n}\r\n\r\nexport interface ICommentsResponse {\r\n  comments: Array<IComment>;\r\n}\r\n\r\nexport interface IProfileResponse {\r\n  profile: IProfile;\r\n}\r\n\r\nexport const tags = {\r\n  all: () => get<ITags>('/tags')\r\n};\r\n\r\nexport const auth = {\r\n  current: () => (getToken() ? get<IAuthResponse>('/user') : null),\r\n  signIn: (user: { email: string; password: string }) =>\r\n    post<IAuthResponse>('/users/login', { user }),\r\n  register: (user: { username: string; email: string; password: string }) =>\r\n    post<IAuthResponse>('/users', { user }),\r\n  save: user => put('/user', { user }),\r\n  authorized: (): boolean => (app['user'] ? true : app.run('#/login') && false) // app.run returns true if found event handlers\r\n};\r\n\r\nexport const articles = {\r\n  search: (request: IArticlesRequest) => get<IFeed>(`/articles?${toQueryString(request)}`),\r\n  feed: (request: { limit: number; offset: number }) =>\r\n    get<IFeed>(`/articles/feed?${toQueryString(request)}`),\r\n  get: (slug: string) => get<IArticlesResponse>(`/articles/${slug}`),\r\n  delete: (slug: string) => del(`/articles/${slug}`),\r\n  favorite: (slug: string) => post(`/articles/${slug}/favorite`),\r\n  unfavorite: (slug: string) => del(`/articles/${slug}/favorite`),\r\n  update: (article: IArticle) => put(`/articles/${article.slug}`, { article }),\r\n  create: (article: INewArticle) => post<IArticlesResponse>('/articles', { article })\r\n};\r\n\r\nexport const comments = {\r\n  create: (slug: string, comment: { body: string }) =>\r\n    post(`/articles/${slug}/comments`, { comment }),\r\n  delete: (slug: string, commentId: string) => del(`/articles/${slug}/comments/${commentId}`),\r\n  forArticle: (slug: string) => get<ICommentsResponse>(`/articles/${slug}/comments`)\r\n};\r\n\r\nexport const profile = {\r\n  get: (username: string) => get<IProfileResponse>(`/profiles/${username}`),\r\n  follow: (username: string) => post<IProfileResponse>(`/profiles/${username}/follow`),\r\n  unfollow: (username: string) => del(`/profiles/${username}/follow`)\r\n};\r\n\r\napp.on('/get-user', async () => {\r\n  try {\r\n    const current = await auth.current();\r\n    if (current) app.run('/set-user', current.user);\r\n  } catch {\r\n    setToken(null);\r\n    document.location.reload(true);\r\n  }\r\n});\r\n\r\napp.on('/set-user', user => {\r\n  app['user'] = user;\r\n  setToken(user ? user.token : null);\r\n});\r\n\r\napp.on('/toggle-follow', async (author: IProfile, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = author.following\r\n    ? await profile.unfollow(author.username)\r\n    : await profile.follow(author.username);\r\n  component.run('update-follow', result.profile);\r\n});\r\n\r\napp.on('/toggle-fav-article', async (article: IArticle, component) => {\r\n  if (!auth.authorized()) return;\r\n  const result = article.favorited\r\n    ? await articles.unfavorite(article.slug)\r\n    : await articles.favorite(article.slug);\r\n  component.run('update-article', result.article);\r\n});\r\n","import app from 'apprun';\nimport { IArticle } from '../models';\n\nfunction Article(props) {\n  const article = props.article as IArticle;\n  const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\n  return (\n    <div class=\"article-preview\">\n      <div class=\"article-meta\">\n        <a href={article.author.image}>\n          <img src={article.author.image} />\n        </a>\n        <div class=\"info\">\n          <a href={`#/profile/${article.author.username}`} class=\"author\">\n            {article.author.username}\n          </a>\n          <span class=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\n        </div>\n        <button\n          class={`btn btn-sm pull-xs-right ${favClass}`}\n          onclick={e => app.run('toggle-fav-article', article, props.component)}>\n          <i class=\"ion-heart\"></i> {article.favoritesCount}\n        </button>\n      </div>\n      <a href={`#/article/${article.slug}`} class=\"preview-link\">\n        <h1>{article.title}</h1>\n        <p>{article.description}</p>\n        <span>Read more...</span>\n        <ul class=\"tag-list\">\n          {article.tagList.map(tag => (\n            <li class=\"tag-default tag-pill tag-outline\">\n              <a href={`#/tag/${tag}`}>{tag} </a>\n            </li>\n          ))}\n        </ul>\n      </a>\n    </div>\n  );\n}\n\nexport default function({ articles, component }: { articles: Array<IArticle>; component }) {\n  return articles.length ? (\n    articles.map(article => <Article article={article} component={component}></Article>)\n  ) : (\n    <div class=\"article-preview\">No articles are here... yet.</div>\n  );\n}\n","import app from 'apprun';\n\nexport default function({ max, selected, link }) {\n  const pages = new Array(max).fill(0);\n  return (\n    <nav>\n      <ul class=\"pagination\">\n        {pages.map((page, idx) => (\n          <li class={`page-item ${idx + 1 === selected ? 'active' : ''}`}>\n            <a href={`${link}/${idx + 1}`} class=\"page-link\">\n              {idx + 1}\n            </a>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, tags, articles } from '../api';\nimport { IArticle } from '../models';\nimport Articles from './article-list';\nimport Pages from './page-list';\n\nconst PAGE_SIZE = 10;\nconst Tag = ({ tag }) => (\n  <a href={`#/tag/${tag}/1`} class=\"tag-pill tag-default\">\n    {tag}\n  </a>\n);\n\ndeclare interface IState {\n  type: '' | 'feed' | 'tag';\n  articles: Array<IArticle>;\n  tags: Array<string>;\n  max: number;\n  page: number;\n}\n\nclass HomeComponent extends Component {\n  state: IState = {\n    type: '',\n    articles: [],\n    tags: [],\n    max: 1,\n    page: 1\n  };\n\n  view = state => {\n    const tag = state.type === 'tag' && state.tag ? `/${state.tag}` : '';\n    return (\n      <div class=\"home-page\">\n        <div class=\"banner\">\n          <div class=\"container\">\n            <h1 class=\"logo-font\">conduit</h1>\n            <p>A place to share your knowledge.</p>\n          </div>\n        </div>\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-9\">\n              <div class=\"feed-toggle\">\n                <ul class=\"nav nav-pills outline-active\">\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${app['user'] ? '' : 'disabled'} ${\n                        state.type === 'feed' ? 'active' : ''\n                      }`}\n                      href=\"#/feed\">\n                      Your Feed\n                    </a>\n                  </li>\n                  <li class=\"nav-item\">\n                    <a class={`nav-link ${state.type === '' ? 'active' : ''}`} href=\"#/\">\n                      Global Feed\n                    </a>\n                  </li>\n                  {state.tag ? (\n                    <li class=\"nav-item\">\n                      <a\n                        class={`nav-link ${state.type === 'tag' ? 'active' : ''}`}\n                        href={`#/tag/${state.tag}`}>\n                        #{state.tag}\n                      </a>\n                    </li>\n                  ) : (\n                    ''\n                  )}\n                </ul>\n              </div>\n              <Articles articles={state.articles} component={this} />\n              <Pages\n                max={Math.floor(state.max / PAGE_SIZE)}\n                selected={state.page}\n                link={`#/${state.type}${tag}`}\n              />\n            </div>\n            <div class=\"col-md-3\">\n              <div class=\"sidebar\">\n                <p>Popular Tags</p>\n                <div class=\"tag-list\">\n                  {state.tags.map(tag => (\n                    <Tag tag={tag} />\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  updateState = async (state, type: '' | 'feed' | 'tag', page, tag?: string) => {\n    try {\n      let tagList = state.tags.length ? { tags: state.tags } : await tags.all();\n      page = parseInt(page) || 1;\n      tag = tag || state.tag;\n      const limit = PAGE_SIZE;\n      const offset = (page - 1) * PAGE_SIZE;\n      let feed;\n      switch (type) {\n        case 'feed':\n          if (!auth.authorized()) return { ...state, articles: [], max: 0 };\n          feed = await articles.feed({ limit, offset });\n          break;\n        case 'tag':\n          feed = await articles.search({ tag, limit, offset });\n          break;\n        default:\n          feed = await articles.search({ limit, offset });\n          break;\n      }\n      page = Math.min(page, Math.floor(feed.articlesCount / PAGE_SIZE) + 1);\n      return {\n        ...state,\n        tags: tagList.tags,\n        type,\n        page,\n        tag,\n        articles: feed.articles,\n        max: feed.articlesCount\n      };\n    } catch ({ errors }) {\n      return { ...state, errors, articles: [], max: 0 };\n    }\n  };\n\n  @on('#/') root = async (state, page) => await this.updateState(state, '', page);\n\n  @on('#/feed') feed = async (state, page) => await this.updateState(state, 'feed', page);\n\n  @on('#/tag') tag = async (state, tag, page) => await this.updateState(state, 'tag', page, tag);\n\n  @on('update-article') updateArticle = (state, article) => {\n    state.articles = state.articles.map(a => {\n      return a.slug === article.slug ? article : a;\n    });\n    return state;\n  };\n}\n\nexport default new HomeComponent().mount('my-app');\n","import app from 'apprun';\n\nexport default function({ errors }) {\n  return (\n    <ul class=\"error-messages\">\n      {Object.keys(errors).map(key => (\n        <li>{`${key} ${errors[key]}`}</li>\n      ))}\n    </ul>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { auth, serializeObject } from '../api';\n\nimport Errors from './error-list';\n\nclass SigninComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!state || state instanceof Promise) return;\n    return (\n      <div class=\"auth-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              <h1 class=\"text-xs-center\">Sign In</h1>\n              <p class=\"text-xs-center\">\n                <a href=\"#/register\">Need an account?</a>\n              </p>\n\n              {state.errors && <Errors errors={state.errors} />}\n\n              <form onsubmit={e => this.run('sign-in', e)}>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\">Sign In</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/login') login = state => ({ ...state, messages: [], returnTo: document.location.hash });\n\n  @on('#/logout') logout = state => {\n    app.run('/set-user', null);\n    document.location.hash = '#/';\n  };\n\n  @on('sign-in') signIn = async (state, e) => {\n    try {\n      e.preventDefault();\n      const session = await auth.signIn(serializeObject(e.target));\n      app.run('/set-user', session.user);\n      const returnTo: string = (state.returnTo || '').replace(/\\#\\/login\\/?/, '');\n      if (!returnTo) document.location.hash = '#/feed';\n      else {\n        app.run('route', returnTo);\n        history.pushState(null, null, returnTo);\n      }\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new SigninComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { auth, serializeObject } from '../api';\nimport Errors from './error-list';\n\nclass RegisterComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!state || state instanceof Promise) return;\n    return (\n      <div class=\"auth-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              <h1 class=\"text-xs-center\">Sign Up</h1>\n              <p class=\"text-xs-center\">\n                <a href=\"#/login\">Have an account?</a>\n              </p>\n\n              {state.errors && <Errors errors={state.errors} />}\n\n              <form onsubmit={e => this.run('register', e)}>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Your Name\"\n                    name=\"username\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"text\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                  />\n                </fieldset>\n                <fieldset class=\"form-group\">\n                  <input\n                    class=\"form-control form-control-lg\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                  />\n                </fieldset>\n                <button class=\"btn btn-lg btn-primary pull-xs-right\">Sign up</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/register') register = (state, messages) => ({ ...state, messages });\n\n  @on('register') submitRegistration = async (state, e) => {\n    try {\n      e.preventDefault();\n      const session = await auth.register(serializeObject(e.target));\n      app.run('#user', session.user);\n      app.run('route', '#/');\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new RegisterComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { IProfile } from '../models';\nimport { articles, profile } from '../api';\nimport Articles from './article-list';\nimport Pages from './page-list';\n\nconst PAGE_SIZE = 10;\n\nclass ProfileComponent extends Component {\n  state = {\n    name: '',\n    type: 'articles',\n    articles: [],\n    page: 1\n  };\n\n  view = state => {\n    const profile = state.profile as IProfile;\n    if (!profile) return;\n    return (\n      <div class=\"profile-page\">\n        <div class=\"user-info\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"col-xs-12 col-md-10 offset-md-1\">\n                <img src={profile.image} class=\"user-img\" />\n                <h4>{profile.username}</h4>\n                <p>{profile.bio}</p>\n                <button\n                  class=\"btn btn-sm btn-outline-secondary action-btn\"\n                  onclick={e => app.run('/toggle-follow', profile, this)}>\n                  {profile.following ? (\n                    <span>\n                      <i class=\"ion-minus-round\"></i> Unfollow {profile.username}\n                    </span>\n                  ) : (\n                    <span>\n                      <i class=\"ion-plus-round\"></i> Follow {profile.username}\n                    </span>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col-xs-12 col-md-10 offset-md-1\">\n              <div class=\"articles-toggle\">\n                <ul class=\"nav nav-pills outline-active\">\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${state.type === 'articles' ? 'active' : ''}`}\n                      href={`#/profile/${profile.username}/articles/1`}>\n                      My Articles\n                    </a>\n                  </li>\n                  <li class=\"nav-item\">\n                    <a\n                      class={`nav-link ${state.type === 'favorites' ? 'active' : ''}`}\n                      href={`#/profile/${profile.username}/favorites/1`}>\n                      Favorited Articles\n                    </a>\n                  </li>\n                </ul>\n              </div>\n              <Articles articles={state.articles} component={this} />\n              <Pages\n                max={Math.floor(state.max / PAGE_SIZE)}\n                selected={state.page}\n                link={`#/profile/${state.profile.username}/${state.type}`}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  updateState = async (state, name, type, page) => {\n    name = decodeURIComponent(name || state.name);\n    type = type || state.type;\n    page = parseInt(page) || state.page;\n    let newState = state;\n    if (name !== state.name) {\n      const profileResult = await profile.get(name);\n      newState = { ...newState, profile: profileResult.profile };\n    }\n    if (name !== state.name || type !== state.type || page !== state.page) {\n      const limit = PAGE_SIZE;\n      const offset = (page - 1) * limit;\n      const articleResult =\n        type === 'favorites'\n          ? await articles.search({ favorited: name, offset, limit })\n          : await articles.search({ author: name, offset, limit });\n      newState = {\n        ...newState,\n        name,\n        type,\n        page,\n        articles: articleResult.articles,\n        max: articleResult.articlesCount\n      };\n    }\n    return newState;\n  };\n\n  @on('#/profile') root = (state, name, type, page) => this.updateState(state, name, type, page);\n\n  @on('update-article') updateArticle = (state, article) => {\n    state.articles = state.articles.map(a => {\n      return a.slug === article.slug ? article : a;\n    });\n    return state;\n  };\n\n  @on('update-follow') updateFollow = (state, profile) => ({ ...state, profile });\n}\n\nexport default new ProfileComponent().mount('my-app');\n","import app from 'apprun';\n\nexport default function({ title, body, ok, cancel, onOK, onCancel }) {\n  return (\n    <div class=\"modal-open\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">\n              {title}\n              <button\n                type=\"button\"\n                class=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n                onclick={e => onCancel(e)}>\n                <span aria-hidden=\"true\"></span>\n              </button>\n            </h5>\n          </div>\n          <div class=\"modal-body\">\n            <p>{body}</p>\n          </div>\n          <div class=\"modal-footer\">\n            {cancel && (\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n                onclick={e => onCancel(e)}>\n                {cancel}\n              </button>\n            )}\n            &nbsp;&nbsp;\n            <button type=\"button\" class=\"btn btn-primary\" onclick={e => onOK(e)}>\n              {ok}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-backdrop show\" onclick={e => onCancel(e)}></div>\n    </div>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { serializeObject, auth } from '../api';\nimport Errors from './error-list';\nimport Modal from './modal';\n\nclass SettingsComponent extends Component {\n  state = {};\n\n  view = state => {\n    const user = state.user;\n    if (!user) return;\n    return (\n      <div class=\"settings-page\">\n        {state.showModal ? (\n          <Modal\n            title=\"Confirmation\"\n            body=\"Your settings has been updated successfully.\"\n            ok=\"OK\"\n            cancel=\"Cancel\"\n            onOK={e => this.run('ok', e)}\n            onCancel={e => this.run('cancel', e)}\n          />\n        ) : (\n          ''\n        )}\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3 col-xs-12\">\n              {state.errors && <Errors errors={state.errors} />}\n              <h1 class=\"text-xs-center\">Your Settings</h1>\n              <form onsubmit={e => this.run('submit-settings', e)}>\n                <fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control\"\n                      type=\"text\"\n                      placeholder=\"URL of profile picture\"\n                      name=\"image\"\n                      value={user.image}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Your Name\"\n                      name=\"username\"\n                      value={user.username}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <textarea\n                      class=\"form-control form-control-lg\"\n                      rows=\"8\"\n                      placeholder=\"Short bio about you\"\n                      name=\"bio\">\n                      {user.bio}\n                    </textarea>\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"text\"\n                      placeholder=\"Email\"\n                      name=\"email\"\n                      value={user.email}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      class=\"form-control form-control-lg\"\n                      type=\"password\"\n                      placeholder=\"Password\"\n                      name=\"password\"\n                      value={user.password}\n                    />\n                  </fieldset>\n                  <button class=\"btn btn-lg btn-primary pull-xs-right\">Update Settings</button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/settings') settings = state => {\n    if (!auth.authorized()) return;\n    return { user: app['user'] };\n  };\n\n  @on('submit-settings') submitSettings = async (state, e) => {\n    try {\n      e.preventDefault();\n      const user = serializeObject<any>(e.target);\n      const result = await auth.save(user);\n      app.run('#user', result.user);\n      return { showModal: true };\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n\n  @on('ok, cancel') ok = state => {\n    return { showModel: false };\n  };\n}\n\nexport default new SettingsComponent().mount('my-app');\n","import app, { Component, on } from 'apprun';\nimport { serializeObject, articles, auth } from '../api';\nimport Errors from './error-list';\n\nclass EditorComponent extends Component {\n  state = {};\n\n  view = state => {\n    if (!app['user'] || !state.article) return;\n    const article = state.article;\n    return (\n      <div class=\"editor-page\">\n        <div class=\"container page\">\n          <div class=\"row\">\n            <div class=\"col-md-10 offset-md-1 col-xs-12\">\n              {state.errors && <Errors errors={state.errors} />}\n              <form onsubmit={e => this.run('submit-article', e)}>\n                {article.slug && <input type=\"hidden\" name=\"slug\" value={article.slug} />}\n                <fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control form-control-lg\"\n                      placeholder=\"Article Title\"\n                      name=\"title\"\n                      value={article.title}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"What's this article about?\"\n                      name=\"description\"\n                      value={article.description}\n                    />\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <textarea\n                      class=\"form-control\"\n                      rows=\"8\"\n                      placeholder=\"Write your article (in markdown)\"\n                      name=\"body\">\n                      {article.body}\n                    </textarea>\n                  </fieldset>\n                  <fieldset class=\"form-group\">\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"Enter tags\"\n                      name=\"tags\"\n                      value={article.tagList.join(', ')}\n                    />\n                    <div class=\"tag-list\"></div>\n                  </fieldset>\n                  <button class=\"btn btn-lg pull-xs-right btn-primary\" type=\"submit\">\n                    Publish Article\n                  </button>\n                </fieldset>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/editor') root = async (state, slug) => {\n    if (!auth.authorized()) return;\n    let article;\n    if (slug) {\n      const result = await articles.get(slug);\n      article = result.article;\n    }\n    article = article || { title: '', description: '', body: '', tagList: [] };\n    return { article };\n  };\n\n  @on('submit-article') submitArticle = async (state, e) => {\n    try {\n      e.preventDefault();\n      const article = serializeObject<any>(e.target);\n      article.tagList = article.tags.split(',');\n      const result = article.slug ? await articles.update(article) : await articles.create(article);\n      document.location.hash = `#/article/${result.article.slug}`;\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n}\n\nexport default new EditorComponent().mount('my-app');\n","import app from 'apprun';\nimport { IComment, IProfile } from '../models';\nimport marked from 'marked';\n\nfunction Comment({ comment }: { comment: IComment }) {\n  return (\n    <div class=\"card\">\n      <div class=\"card-block\">\n        <p class=\"card-text\">\n          <p>{`_html:${marked(comment.body, { sanitize: true })}`}</p>\n        </p>\n      </div>\n      <div class=\"card-footer\">\n        <a class=\"comment-author\">\n          <img src={comment.author.image} class=\"comment-author-img\" />\n        </a>\n        &nbsp;\n        <a class=\"comment-author\" href={`#/profile/${comment.author.username}`}>\n          {comment.author.username}\n        </a>\n        <span class=\"date-posted\">{new Date(comment.createdAt).toLocaleString()}</span>\n        {app['user'] && app['user'].username === comment.author.username && (\n          <span class=\"mod-options\">\n            <i class=\"ion-trash-a\" onclick={e => app.run('/delete-comment', comment)}></i>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default function({ comments }: { comments: Array<IComment> }) {\n  const user = app['user'] as IProfile;\n  return (\n    <div class=\"row\">\n      <div class=\"col-xs-12 col-md-8 offset-md-2\">\n        {!user ? (\n          <p>\n            <a href={`#/login/${document.location.hash}`}>Sign in</a> or&nbsp;\n            <a href=\"#/register\">sign up</a> to add comments on this article.\n          </p>\n        ) : (\n          <form class=\"card comment-form\" onsubmit={e => app.run('/new-comment', e)}>\n            <div class=\"card-block\">\n              <textarea\n                class=\"form-control\"\n                placeholder=\"Write a comment...\"\n                rows=\"3\"\n                name=\"comment\"></textarea>\n            </div>\n            <div class=\"card-footer\">\n              {user.image ? (\n                <img src={user.image} class=\"comment-author-img\" />\n              ) : (\n                <span>@{user.username}</span>\n              )}\n              <button class=\"btn btn-sm btn-primary\" type=\"submit\">\n                Post Comment\n              </button>\n            </div>\n          </form>\n        )}\n        {comments.map(comment => (\n          <Comment comment={comment} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import app from 'apprun';\nimport { IArticle } from '../models';\n\nexport default function ArticleMeta({ article, component }: { article: IArticle; component }) {\n  const favClass = article.favorited ? 'btn-primary' : 'btn-outline-primary';\n  const followClass = article.author.following ? 'btn-secondary' : 'btn-outline-secondary';\n  return (\n    <div class=\"article-meta\">\n      <a href={article.author.image}>\n        <img src={article.author.image} />\n      </a>\n      <div class=\"info\">\n        <a href={`#/profile/${article.author.username}`} class=\"author\">\n          {article.author.username}\n        </a>\n        <span class=\"date\">{new Date(article.updatedAt).toLocaleString()}</span>\n      </div>\n\n      {app['user'] && app['user'].username === article.author.username ? (\n        <span>\n          <button\n            class=\"btn btn-sm btn-outline-secondary\"\n            onclick={e => component.run('edit-article', article)}>\n            <i class=\"ion-edit\"></i>&nbsp; Edit Article\n          </button>\n          &nbsp;&nbsp;\n          <button\n            class=\"btn btn-sm btn-outline-danger\"\n            onclick={e => component.run('delete-article', article)}>\n            <i class=\"ion-trash-o\"></i>&nbsp; Delete Article\n          </button>\n        </span>\n      ) : (\n        <span>\n          <button\n            class={`btn btn-sm ${followClass}`}\n            onclick={e => app.run('/toggle-follow', article.author, component)}>\n            {article.author.following ? (\n              <span>\n                <i class=\"ion-minus-round\"></i> Unfollow {article.author.username}\n              </span>\n            ) : (\n              <span>\n                <i class=\"ion-plus-round\"></i> Follow {article.author.username}\n              </span>\n            )}\n          </button>{' '}\n          &nbsp;&nbsp;\n          <button\n            class={`btn btn-sm ${favClass}`}\n            onclick={e => app.run('/toggle-fav-article', article, component)}>\n            <i class=\"ion-heart\"></i>\n            &nbsp; Favorite Post <span class=\"counter\">({article.favoritesCount})</span>\n          </button>\n        </span>\n      )}\n    </div>\n  );\n}\n","import app, { Component, on } from 'apprun';\nimport { articles, comments } from '../api';\nimport { IArticle } from '../models';\nimport Comments from './comment-list';\nimport ArticleMeta from './article-meta';\nimport Modal from './modal';\nimport marked from 'marked';\n\nclass ArticleComponent extends Component {\n  state = {\n    article: null,\n    comments: []\n  };\n\n  view = state => {\n    const article = state.article as IArticle;\n    if (!article) return;\n    return (\n      <div class=\"article-page\">\n        {state.deleting && (\n          <Modal\n            title=\"Delete Article\"\n            body=\"Are you sure you want to delete this article?\"\n            ok=\"Delete\"\n            cancel=\"No\"\n            onOK={e => this.run('ok-delete-article', e)}\n            onCancel={e => this.run('cancel-delete-article', e)}\n          />\n        )}\n\n        <div class=\"banner\">\n          <div class=\"container\">\n            <h1>{article.title}</h1>\n            <ArticleMeta article={article} component={this} />\n          </div>\n        </div>\n\n        <div class=\"container page\">\n          <div class=\"row article-content\">\n            <div class=\"col-md-12\">\n              <p>{`_html:${marked(article.body, { sanitize: true })}`}</p>\n              <div class=\"tag-list\">\n                <br />\n                {article.tagList.map(tag => (\n                  <li class=\"tag-default tag-pill tag-outline\">\n                    <a href={`#/tag/${tag}`}>{tag} </a>\n                  </li>\n                ))}\n              </div>\n            </div>\n          </div>\n          <hr />\n          <div class=\"article-actions\">\n            <ArticleMeta article={article} component={this} />\n          </div>\n          <Comments comments={state.comments} />\n        </div>\n      </div>\n    );\n  };\n\n  @on('#/article') root = async (state, slug) => {\n    let article = state.article as IArticle;\n    let _comments = state.comments;\n    if (!article || article.slug !== slug) {\n      const result = await articles.get(slug);\n      article = result.article;\n      const commentsResponse = await comments.forArticle(article.slug);\n      _comments = commentsResponse.comments;\n    }\n    return { ...state, article, comments: _comments };\n  };\n\n  @on('/new-comment') newComment = async (state, e) => {\n    try {\n      e.preventDefault();\n      const comment = e.target['comment'].value;\n      if (!comment) return;\n      await comments.create(state.article.slug, { body: comment });\n      const commentsResponse = await comments.forArticle(state.article.slug);\n      return { ...state, comments: commentsResponse.comments };\n    } catch ({ errors }) {\n      return { ...state, errors };\n    }\n  };\n\n  @on('/delete-comment') deleteComment = async (state, comment) => {\n    await comments.delete(this.state.article.slug, comment.id);\n    const commentsResponse = await comments.forArticle(state.article.slug);\n    return { ...state, comments: commentsResponse.comments };\n  };\n\n  @on('update-article') updateArticle = (state, article) => ({\n    ...state,\n    article\n  });\n\n  @on('update-follow') updateFollow = (state, author) => {\n    state.article.author = author;\n    return state;\n  };\n\n  @on('edit-article') editArticle = (state, article) => {\n    document.location.hash = `#/editor/${article.slug}`;\n  };\n\n  @on('delete-article') deleteArticle = (state, article) => ({\n    ...state,\n    deleting: true\n  });\n\n  @on('ok-delete-article') okDelete = (state, e) => {\n    articles.delete(state.article.slug);\n    document.location.hash = '#/';\n    return { ...state, deleting: false };\n  };\n\n  @on('cancel-delete-article') cancelDelete = (state, article) => ({\n    ...state,\n    deleting: false\n  });\n}\n\nexport default new ArticleComponent().mount('my-app');\n","import app from 'apprun';\n\nimport './components/header';\nimport './components/home';\nimport './components/signin';\nimport './components/register';\nimport './components/profile';\nimport './components/settings';\nimport './components/editor';\nimport './components/article';\n\napp.on('#', (route, ...p) => {\n  app.run(`#/${route || ''}`, ...p);\n});\n\napp.run('/get-user');\n"],"sourceRoot":""}